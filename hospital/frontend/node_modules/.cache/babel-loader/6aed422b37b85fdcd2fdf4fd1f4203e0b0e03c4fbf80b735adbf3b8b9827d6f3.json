{"ast":null,"code":"export default {\n  name: 'DepartmentList',\n  data() {\n    return {\n      user: null,\n      departments: [],\n      searchKeyword: '',\n      loading: false\n    };\n  },\n  computed: {\n    filteredDepartments() {\n      if (!this.searchKeyword.trim()) {\n        return this.departments;\n      }\n      const keyword = this.searchKeyword.toLowerCase().trim();\n      return this.departments.filter(dept => dept.name.toLowerCase().includes(keyword) || dept.description.toLowerCase().includes(keyword) || dept.type.toLowerCase().includes(keyword));\n    }\n  },\n  created() {\n    this.loadUserInfo();\n    this.loadDepartments();\n  },\n  methods: {\n    loadUserInfo() {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        this.user = JSON.parse(userStr);\n      }\n    },\n    loadDepartments() {\n      this.loading = true;\n      this.$axios.get('/department/list').then(res => {\n        if (res.success) {\n          this.departments = res.data;\n        }\n      }).catch(err => {\n        console.error('加载科室列表失败:', err);\n        this.$message.error('加载科室列表失败');\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    handleSearch() {\n      // 搜索功能已通过computed属性实现，这里可以添加额外的逻辑\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        this.user = null;\n        this.$router.push('/login');\n        this.$message.success('退出登录成功');\n      }).catch(() => {\n        // 取消退出\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","departments","searchKeyword","loading","computed","filteredDepartments","trim","keyword","toLowerCase","filter","dept","includes","description","type","created","loadUserInfo","loadDepartments","methods","userStr","localStorage","getItem","JSON","parse","$axios","get","then","res","success","catch","err","console","error","$message","finally","handleSearch","handleLogout","$confirm","confirmButtonText","cancelButtonText","removeItem","$router","push"],"sources":["src/views/DepartmentList.vue"],"sourcesContent":["<template>\n  <div class=\"department-container\">\n    <!-- 顶部导航栏 -->\n    <header class=\"header\">\n      <div class=\"header-content\">\n        <div class=\"logo\">\n          <i class=\"el-icon-medal-1\"></i>\n          <span>医院预约系统</span>\n        </div>\n        <nav class=\"nav-menu\">\n          <router-link to=\"/home\" class=\"nav-item\">首页</router-link>\n          <router-link to=\"/departments\" class=\"nav-item active\">科室介绍</router-link>\n          <router-link to=\"/doctors\" class=\"nav-item\">医生团队</router-link>\n          <router-link to=\"/medical-guide\" class=\"nav-item\">医疗导诊</router-link>\n        </nav>\n        <div class=\"user-info\">\n          <div v-if=\"user\" class=\"logged-in\">\n            <span class=\"welcome\">欢迎，{{ user.name || user.username }}</span>\n            <router-link to=\"/user-info\" class=\"btn-text\">个人信息</router-link>\n            <button class=\"btn-text\" @click=\"handleLogout\">退出登录</button>\n          </div>\n          <div v-else class=\"not-logged-in\">\n            <router-link to=\"/login\" class=\"btn-primary\">登录</router-link>\n            <router-link to=\"/register\" class=\"btn-text\">注册</router-link>\n          </div>\n        </div>\n      </div>\n    </header>\n    <!-- 内容区域 -->\n    <main class=\"main-content\">\n      <div class=\"page-header\">\n        <h1>科室介绍</h1>\n        <p class=\"page-desc\">了解我院各科室的专业领域和医疗特色</p>\n      </div>\n      <!-- 科室搜索 -->\n      <div class=\"search-section\">\n        <el-input v-model=\"searchKeyword\" placeholder=\"请输入科室名称或关键词\" prefix-icon=\"el-icon-search\" size=\"large\">\n          <template v-slot:append>\n            <el-button type=\"primary\" @click=\"handleSearch\">搜索</el-button>\n          </template>\n        </el-input>\n      </div>\n      <!-- 科室列表 -->\n      <div class=\"department-list\">\n        <el-card v-for=\"department in filteredDepartments\" :key=\"department.id\" class=\"department-card\">\n          <div class=\"department-header\">\n            <h3 class=\"department-name\">{{ department.name }}</h3>\n            <el-tag size=\"medium\" type=\"primary\">{{ department.type }}</el-tag>\n          </div>\n          <div class=\"department-content\">\n            <p class=\"department-description\">{{ department.description }}</p>\n            <div class=\"department-info\">\n              <div class=\"info-item\">\n                <i class=\"el-icon-location\"></i>\n                <span>位置：{{ department.location }}</span>\n              </div>\n              <div class=\"info-item\">\n                <i class=\"el-icon-phone\"></i>\n                <span>电话：{{ department.phone }}</span>\n              </div>\n              <div class=\"info-item\">\n                <i class=\"el-icon-user-solid\"></i>\n                <span>医生数量：{{ department.doctorCount || 0 }}</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"department-footer\">\n            <router-link :to=\"{ path: '/doctors', query: { departmentId: department.id }}\" class=\"view-doctors-btn\">\n              查看医生列表\n              <i class=\"el-icon-arrow-right\"></i>\n            </router-link>\n            <router-link :to=\"{ path: '/appointment', query: { departmentId: department.id }}\" class=\"make-appointment-btn\" v-if=\"user && user.role !== 'ADMIN'\">\n              立即预约\n            </router-link>\n          </div>\n        </el-card>\n      </div>\n      <!-- 无数据提示 -->\n      <div v-if=\"filteredDepartments.length === 0\" class=\"no-data\">\n        <el-empty description=\"暂无科室信息\"></el-empty>\n      </div>\n    </main>\n    <!-- 页脚 -->\n    <footer class=\"footer\">\n      <div class=\"footer-content\">\n        <p>© 2024 医院预约系统 版权所有</p>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DepartmentList',\n  data() {\n    return {\n      user: null,\n      departments: [],\n      searchKeyword: '',\n      loading: false\n    }\n  },\n  computed: {\n    filteredDepartments() {\n      if (!this.searchKeyword.trim()) {\n        return this.departments\n      }\n      \n      const keyword = this.searchKeyword.toLowerCase().trim()\n      return this.departments.filter(dept => \n        dept.name.toLowerCase().includes(keyword) || \n        dept.description.toLowerCase().includes(keyword) ||\n        dept.type.toLowerCase().includes(keyword)\n      )\n    }\n  },\n  created() {\n    this.loadUserInfo()\n    this.loadDepartments()\n  },\n  methods: {\n    loadUserInfo() {\n      const userStr = localStorage.getItem('user')\n      if (userStr) {\n        this.user = JSON.parse(userStr)\n      }\n    },\n    loadDepartments() {\n      this.loading = true\n      this.$axios.get('/department/list').then(res => {\n        if (res.success) {\n          this.departments = res.data\n        }\n      }).catch(err => {\n        console.error('加载科室列表失败:', err)\n        this.$message.error('加载科室列表失败')\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    handleSearch() {\n      // 搜索功能已通过computed属性实现，这里可以添加额外的逻辑\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token')\n        localStorage.removeItem('user')\n        this.user = null\n        this.$router.push('/login')\n        this.$message.success('退出登录成功')\n      }).catch(() => {\n        // 取消退出\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.department-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 顶部导航栏 - 复用Home页面的样式 */\n.header {\n  background-color: #fff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n}\n\n.header-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 60px;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  font-size: 20px;\n  font-weight: bold;\n  color: #1890ff;\n}\n\n.logo i {\n  margin-right: 10px;\n  font-size: 24px;\n}\n\n.nav-menu {\n  display: flex;\n}\n\n.nav-item {\n  margin: 0 20px;\n  color: #606266;\n  text-decoration: none;\n  font-size: 16px;\n  padding: 5px 0;\n  position: relative;\n  transition: color 0.3s;\n}\n\n.nav-item:hover,\n.nav-item.active {\n  color: #1890ff;\n}\n\n.nav-item.active::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background-color: #1890ff;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n}\n\n.logged-in {\n  display: flex;\n  align-items: center;\n}\n\n.welcome {\n  margin-right: 20px;\n  color: #606266;\n}\n\n.btn-text,\n.btn-primary {\n  padding: 5px 15px;\n  margin-left: 10px;\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all 0.3s;\n}\n\n.btn-text {\n  color: #606266;\n  background: none;\n  border: none;\n}\n\n.btn-text:hover {\n  color: #1890ff;\n}\n\n.btn-primary {\n  background-color: #1890ff;\n  color: white;\n  border: none;\n}\n\n.btn-primary:hover {\n  background-color: #40a9ff;\n}\n\n/* 主内容区域 */\n.main-content {\n  flex: 1;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 30px 20px;\n  width: 100%;\n}\n\n.page-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.page-header h1 {\n  font-size: 32px;\n  color: #303133;\n  margin-bottom: 10px;\n}\n\n.page-desc {\n  font-size: 16px;\n  color: #606266;\n  margin: 0;\n}\n\n/* 搜索区域 */\n.search-section {\n  margin-bottom: 30px;\n  max-width: 600px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n/* 科室列表 */\n.department-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n  gap: 20px;\n}\n\n.department-card {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.department-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.department-name {\n  font-size: 20px;\n  font-weight: bold;\n  color: #303133;\n  margin: 0;\n}\n\n.department-content {\n  flex: 1;\n}\n\n.department-description {\n  color: #606266;\n  line-height: 1.6;\n  margin-bottom: 20px;\n}\n\n.department-info {\n  background-color: #f5f7fa;\n  padding: 15px;\n  border-radius: 6px;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  color: #606266;\n}\n\n.info-item:last-child {\n  margin-bottom: 0;\n}\n\n.info-item i {\n  margin-right: 8px;\n  color: #1890ff;\n}\n\n.department-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 20px;\n}\n\n.view-doctors-btn {\n  color: #1890ff;\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  transition: color 0.3s;\n}\n\n.view-doctors-btn:hover {\n  color: #40a9ff;\n}\n\n.view-doctors-btn i {\n  margin-left: 5px;\n  font-size: 14px;\n}\n\n.make-appointment-btn {\n  background-color: #1890ff;\n  color: white;\n  padding: 8px 16px;\n  border-radius: 4px;\n  text-decoration: none;\n  transition: background-color 0.3s;\n}\n\n.make-appointment-btn:hover {\n  background-color: #40a9ff;\n}\n\n/* 无数据提示 */\n.no-data {\n  text-align: center;\n  padding: 60px 0;\n}\n\n/* 页脚 */\n.footer {\n  background-color: #f0f2f5;\n  padding: 20px 0;\n  margin-top: 40px;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  text-align: center;\n  color: #606266;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .header-content {\n    flex-direction: column;\n    height: auto;\n    padding: 15px;\n  }\n  \n  .nav-menu {\n    margin: 15px 0;\n  }\n  \n  .nav-item {\n    margin: 0 10px;\n  }\n  \n  .department-list {\n    grid-template-columns: 1fr;\n  }\n  \n  .department-footer {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .view-doctors-btn {\n    margin-bottom: 10px;\n  }\n}\n</style>\n"],"mappings":"AA4FA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,WAAA;MACAC,aAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACAC,oBAAA;MACA,UAAAH,aAAA,CAAAI,IAAA;QACA,YAAAL,WAAA;MACA;MAEA,MAAAM,OAAA,QAAAL,aAAA,CAAAM,WAAA,GAAAF,IAAA;MACA,YAAAL,WAAA,CAAAQ,MAAA,CAAAC,IAAA,IACAA,IAAA,CAAAZ,IAAA,CAAAU,WAAA,GAAAG,QAAA,CAAAJ,OAAA,KACAG,IAAA,CAAAE,WAAA,CAAAJ,WAAA,GAAAG,QAAA,CAAAJ,OAAA,KACAG,IAAA,CAAAG,IAAA,CAAAL,WAAA,GAAAG,QAAA,CAAAJ,OAAA,CACA;IACA;EACA;EACAO,QAAA;IACA,KAAAC,YAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAF,aAAA;MACA,MAAAG,OAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAF,OAAA;QACA,KAAAlB,IAAA,GAAAqB,IAAA,CAAAC,KAAA,CAAAJ,OAAA;MACA;IACA;IACAF,gBAAA;MACA,KAAAb,OAAA;MACA,KAAAoB,MAAA,CAAAC,GAAA,qBAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACA,KAAA1B,WAAA,GAAAyB,GAAA,CAAA3B,IAAA;QACA;MACA,GAAA6B,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,KAAA,cAAAF,GAAA;QACA,KAAAG,QAAA,CAAAD,KAAA;MACA,GAAAE,OAAA;QACA,KAAA9B,OAAA;MACA;IACA;IACA+B,aAAA;MACA;IAAA,CACA;IACAC,aAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAzB,IAAA;MACA,GAAAY,IAAA;QACAN,YAAA,CAAAoB,UAAA;QACApB,YAAA,CAAAoB,UAAA;QACA,KAAAvC,IAAA;QACA,KAAAwC,OAAA,CAAAC,IAAA;QACA,KAAAT,QAAA,CAAAL,OAAA;MACA,GAAAC,KAAA;QACA;MAAA,CACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}