{"ast":null,"code":"export default {\n  name: 'DoctorList',\n  data() {\n    return {\n      user: null,\n      doctors: [],\n      departments: [],\n      selectedDepartment: '',\n      searchKeyword: '',\n      loading: false\n    };\n  },\n  computed: {\n    filteredDoctors() {\n      let result = this.doctors;\n\n      // 科室筛选\n      if (this.selectedDepartment) {\n        result = result.filter(doctor => doctor.departmentId === this.selectedDepartment);\n      }\n\n      // 关键词搜索\n      if (this.searchKeyword.trim()) {\n        const keyword = this.searchKeyword.toLowerCase().trim();\n        result = result.filter(doctor => doctor.name.toLowerCase().includes(keyword) || doctor.specialty && doctor.specialty.toLowerCase().includes(keyword) || doctor.introduction && doctor.introduction.toLowerCase().includes(keyword));\n      }\n      return result;\n    }\n  },\n  created() {\n    this.loadUserInfo();\n    this.loadDepartments();\n    this.loadDoctors();\n\n    // 检查URL参数中是否有科室筛选条件\n    if (this.$route.query.departmentId) {\n      this.selectedDepartment = this.$route.query.departmentId;\n    }\n  },\n  methods: {\n    loadUserInfo() {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        this.user = JSON.parse(userStr);\n      }\n    },\n    loadDepartments() {\n      this.$axios.get('/department/list').then(res => {\n        if (res.success) {\n          this.departments = res.data;\n        }\n      });\n    },\n    loadDoctors() {\n      this.loading = true;\n\n      // 如果有科室ID参数，只加载该科室的医生\n      const params = this.selectedDepartment ? {\n        departmentId: this.selectedDepartment\n      } : {};\n      this.$axios.get('/doctor/list', {\n        params\n      }).then(res => {\n        if (res.success) {\n          this.doctors = res.data;\n        }\n      }).catch(err => {\n        console.error('加载医生列表失败:', err);\n        this.$message.error('加载医生列表失败');\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    handleFilterChange() {\n      this.loadDoctors();\n    },\n    handleSearch() {\n      // 搜索功能已通过computed属性实现，这里可以添加额外的逻辑\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        this.user = null;\n        this.$router.push('/login');\n        this.$message.success('退出登录成功');\n      }).catch(() => {\n        // 取消退出\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","doctors","departments","selectedDepartment","searchKeyword","loading","computed","filteredDoctors","result","filter","doctor","departmentId","trim","keyword","toLowerCase","includes","specialty","introduction","created","loadUserInfo","loadDepartments","loadDoctors","$route","query","methods","userStr","localStorage","getItem","JSON","parse","$axios","get","then","res","success","params","catch","err","console","error","$message","finally","handleFilterChange","handleSearch","handleLogout","$confirm","confirmButtonText","cancelButtonText","type","removeItem","$router","push"],"sources":["src/views/DoctorList.vue"],"sourcesContent":["<template>\n  <div class=\"doctor-container\">\n    <!-- 顶部导航栏 -->\n    <header class=\"header\">\n      <div class=\"header-content\">\n        <div class=\"logo\">\n          <i class=\"el-icon-medal-1\"></i>\n          <span>医院预约系统</span>\n        </div>\n        <nav class=\"nav-menu\">\n          <router-link to=\"/home\" class=\"nav-item\">首页</router-link>\n          <router-link to=\"/departments\" class=\"nav-item\">科室介绍</router-link>\n          <router-link to=\"/doctors\" class=\"nav-item active\">医生团队</router-link>\n          <router-link to=\"/medical-guide\" class=\"nav-item\">医疗导诊</router-link>\n        </nav>\n        <div class=\"user-info\">\n          <div v-if=\"user\" class=\"logged-in\">\n            <span class=\"welcome\">欢迎，{{ user.name || user.username }}</span>\n            <router-link to=\"/user-info\" class=\"btn-text\">个人信息</router-link>\n            <button class=\"btn-text\" @click=\"handleLogout\">退出登录</button>\n          </div>\n          <div v-else class=\"not-logged-in\">\n            <router-link to=\"/login\" class=\"btn-primary\">登录</router-link>\n            <router-link to=\"/register\" class=\"btn-text\">注册</router-link>\n          </div>\n        </div>\n      </div>\n    </header>\n    <!-- 内容区域 -->\n    <main class=\"main-content\">\n      <div class=\"page-header\">\n        <h1>医生团队</h1>\n        <p class=\"page-desc\">认识我们专业的医疗团队，选择最适合您的医生</p>\n      </div>\n      <!-- 筛选和搜索 -->\n      <div class=\"filter-section\">\n        <div class=\"filter-group\">\n          <label class=\"filter-label\">科室筛选：</label>\n          <el-select v-model=\"selectedDepartment\" placeholder=\"全部科室\" @change=\"handleFilterChange\">\n            <el-option label=\"全部科室\" value=\"\"></el-option>\n            <el-option v-for=\"dept in departments\" :key=\"dept.id\" :label=\"dept.name\" :value=\"dept.id\"></el-option>\n          </el-select>\n        </div>\n        <div class=\"filter-group\">\n          <label class=\"filter-label\">搜索医生：</label>\n          <el-input v-model=\"searchKeyword\" placeholder=\"请输入医生姓名或专长\" prefix-icon=\"el-icon-search\" @input=\"handleSearch\"></el-input>\n        </div>\n      </div>\n      <!-- 医生列表 -->\n      <div class=\"doctor-list\">\n        <el-card v-for=\"doctor in filteredDoctors\" :key=\"doctor.id\" class=\"doctor-card\">\n          <div class=\"doctor-header\">\n            <el-avatar :size=\"100\" :src=\"doctor.avatar\" icon=\"el-icon-user-solid\"></el-avatar>\n            <div class=\"doctor-basic-info\">\n              <h3 class=\"doctor-name\">{{ doctor.name }}<el-tag size=\"small\" class=\"doctor-title\">{{ doctor.title }}</el-tag></h3>\n              <p class=\"doctor-department\">{{ doctor.department?.name || '未分配科室' }}</p>\n              <p class=\"doctor-specialty\">专长：{{ doctor.specialty }}</p>\n            </div>\n          </div>\n          <div class=\"doctor-content\">\n            <p class=\"doctor-introduction\">{{ doctor.introduction || '暂无简介' }}</p>\n          </div>\n          <div class=\"doctor-footer\">\n            <div class=\"doctor-stats\">\n              <div class=\"stat-item\">\n                <span class=\"stat-value\">{{ doctor.appointmentCount || 0 }}</span>\n                <span class=\"stat-label\">预约量</span>\n              </div>\n              <div class=\"stat-item\">\n                <span class=\"stat-value\">{{ doctor.consultationTime || '8:00-17:30' }}</span>\n                <span class=\"stat-label\">出诊时间</span>\n              </div>\n            </div>\n            <router-link :to=\"{ path: '/appointment', query: { doctorId: doctor.id }}\" class=\"make-appointment-btn\" v-if=\"user && user.role !== 'ADMIN'\">\n              立即预约\n            </router-link>\n          </div>\n        </el-card>\n      </div>\n      <!-- 无数据提示 -->\n      <div v-if=\"filteredDoctors.length === 0\" class=\"no-data\">\n        <el-empty description=\"暂无医生信息\"></el-empty>\n      </div>\n    </main>\n    <!-- 页脚 -->\n    <footer class=\"footer\">\n      <div class=\"footer-content\">\n        <p>© 2024 医院预约系统 版权所有</p>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DoctorList',\n  data() {\n    return {\n      user: null,\n      doctors: [],\n      departments: [],\n      selectedDepartment: '',\n      searchKeyword: '',\n      loading: false\n    }\n  },\n  computed: {\n    filteredDoctors() {\n      let result = this.doctors\n      \n      // 科室筛选\n      if (this.selectedDepartment) {\n        result = result.filter(doctor => doctor.departmentId === this.selectedDepartment)\n      }\n      \n      // 关键词搜索\n      if (this.searchKeyword.trim()) {\n        const keyword = this.searchKeyword.toLowerCase().trim()\n        result = result.filter(doctor => \n          doctor.name.toLowerCase().includes(keyword) || \n          (doctor.specialty && doctor.specialty.toLowerCase().includes(keyword)) ||\n          (doctor.introduction && doctor.introduction.toLowerCase().includes(keyword))\n        )\n      }\n      \n      return result\n    }\n  },\n  created() {\n    this.loadUserInfo()\n    this.loadDepartments()\n    this.loadDoctors()\n    \n    // 检查URL参数中是否有科室筛选条件\n    if (this.$route.query.departmentId) {\n      this.selectedDepartment = this.$route.query.departmentId\n    }\n  },\n  methods: {\n    loadUserInfo() {\n      const userStr = localStorage.getItem('user')\n      if (userStr) {\n        this.user = JSON.parse(userStr)\n      }\n    },\n    loadDepartments() {\n      this.$axios.get('/department/list').then(res => {\n        if (res.success) {\n          this.departments = res.data\n        }\n      })\n    },\n    loadDoctors() {\n      this.loading = true\n      \n      // 如果有科室ID参数，只加载该科室的医生\n      const params = this.selectedDepartment ? { departmentId: this.selectedDepartment } : {}\n      \n      this.$axios.get('/doctor/list', { params }).then(res => {\n        if (res.success) {\n          this.doctors = res.data\n        }\n      }).catch(err => {\n        console.error('加载医生列表失败:', err)\n        this.$message.error('加载医生列表失败')\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    handleFilterChange() {\n      this.loadDoctors()\n    },\n    handleSearch() {\n      // 搜索功能已通过computed属性实现，这里可以添加额外的逻辑\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token')\n        localStorage.removeItem('user')\n        this.user = null\n        this.$router.push('/login')\n        this.$message.success('退出登录成功')\n      }).catch(() => {\n        // 取消退出\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.doctor-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 顶部导航栏 - 复用Home页面的样式 */\n.header {\n  background-color: #fff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n}\n\n.header-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 60px;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  font-size: 20px;\n  font-weight: bold;\n  color: #1890ff;\n}\n\n.logo i {\n  margin-right: 10px;\n  font-size: 24px;\n}\n\n.nav-menu {\n  display: flex;\n}\n\n.nav-item {\n  margin: 0 20px;\n  color: #606266;\n  text-decoration: none;\n  font-size: 16px;\n  padding: 5px 0;\n  position: relative;\n  transition: color 0.3s;\n}\n\n.nav-item:hover,\n.nav-item.active {\n  color: #1890ff;\n}\n\n.nav-item.active::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background-color: #1890ff;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n}\n\n.logged-in {\n  display: flex;\n  align-items: center;\n}\n\n.welcome {\n  margin-right: 20px;\n  color: #606266;\n}\n\n.btn-text,\n.btn-primary {\n  padding: 5px 15px;\n  margin-left: 10px;\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all 0.3s;\n}\n\n.btn-text {\n  color: #606266;\n  background: none;\n  border: none;\n}\n\n.btn-text:hover {\n  color: #1890ff;\n}\n\n.btn-primary {\n  background-color: #1890ff;\n  color: white;\n  border: none;\n}\n\n.btn-primary:hover {\n  background-color: #40a9ff;\n}\n\n/* 主内容区域 */\n.main-content {\n  flex: 1;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 30px 20px;\n  width: 100%;\n}\n\n.page-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.page-header h1 {\n  font-size: 32px;\n  color: #303133;\n  margin-bottom: 10px;\n}\n\n.page-desc {\n  font-size: 16px;\n  color: #606266;\n  margin: 0;\n}\n\n/* 筛选区域 */\n.filter-section {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n}\n\n.filter-group {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.filter-label {\n  font-size: 16px;\n  color: #606266;\n}\n\n.filter-group .el-select {\n  width: 200px;\n}\n\n.filter-group .el-input {\n  width: 300px;\n}\n\n/* 医生列表 */\n.doctor-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 20px;\n}\n\n.doctor-card {\n  height: 100%;\n}\n\n.doctor-header {\n  display: flex;\n  gap: 20px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid #ebeef5;\n  margin-bottom: 20px;\n}\n\n.doctor-basic-info {\n  flex: 1;\n}\n\n.doctor-name {\n  font-size: 20px;\n  font-weight: bold;\n  color: #303133;\n  margin: 0 0 10px 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.doctor-title {\n  font-size: 14px;\n}\n\n.doctor-department {\n  color: #1890ff;\n  margin: 0 0 5px 0;\n  font-size: 14px;\n}\n\n.doctor-specialty {\n  color: #606266;\n  margin: 0;\n  font-size: 14px;\n}\n\n.doctor-content {\n  margin-bottom: 20px;\n}\n\n.doctor-introduction {\n  color: #606266;\n  line-height: 1.6;\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n}\n\n.doctor-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 20px;\n  border-top: 1px solid #ebeef5;\n}\n\n.doctor-stats {\n  display: flex;\n  gap: 30px;\n}\n\n.stat-item {\n  text-align: center;\n}\n\n.stat-value {\n  display: block;\n  font-size: 18px;\n  font-weight: bold;\n  color: #1890ff;\n}\n\n.stat-label {\n  display: block;\n  font-size: 12px;\n  color: #909399;\n}\n\n.make-appointment-btn {\n  background-color: #1890ff;\n  color: white;\n  padding: 8px 20px;\n  border-radius: 4px;\n  text-decoration: none;\n  transition: background-color 0.3s;\n}\n\n.make-appointment-btn:hover {\n  background-color: #40a9ff;\n}\n\n/* 无数据提示 */\n.no-data {\n  text-align: center;\n  padding: 60px 0;\n}\n\n/* 页脚 */\n.footer {\n  background-color: #f0f2f5;\n  padding: 20px 0;\n  margin-top: 40px;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  text-align: center;\n  color: #606266;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .header-content {\n    flex-direction: column;\n    height: auto;\n    padding: 15px;\n  }\n  \n  .nav-menu {\n    margin: 15px 0;\n  }\n  \n  .nav-item {\n    margin: 0 10px;\n  }\n  \n  .filter-section {\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  .filter-group {\n    width: 100%;\n  }\n  \n  .filter-group .el-select,\n  .filter-group .el-input {\n    width: 100%;\n  }\n  \n  .doctor-list {\n    grid-template-columns: 1fr;\n  }\n  \n  .doctor-header {\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n  }\n  \n  .doctor-footer {\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  .doctor-stats {\n    justify-content: center;\n  }\n}\n</style>\n"],"mappings":"AA8FA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;MACAC,WAAA;MACAC,kBAAA;MACAC,aAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACAC,gBAAA;MACA,IAAAC,MAAA,QAAAP,OAAA;;MAEA;MACA,SAAAE,kBAAA;QACAK,MAAA,GAAAA,MAAA,CAAAC,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,YAAA,UAAAR,kBAAA;MACA;;MAEA;MACA,SAAAC,aAAA,CAAAQ,IAAA;QACA,MAAAC,OAAA,QAAAT,aAAA,CAAAU,WAAA,GAAAF,IAAA;QACAJ,MAAA,GAAAA,MAAA,CAAAC,MAAA,CAAAC,MAAA,IACAA,MAAA,CAAAZ,IAAA,CAAAgB,WAAA,GAAAC,QAAA,CAAAF,OAAA,KACAH,MAAA,CAAAM,SAAA,IAAAN,MAAA,CAAAM,SAAA,CAAAF,WAAA,GAAAC,QAAA,CAAAF,OAAA,KACAH,MAAA,CAAAO,YAAA,IAAAP,MAAA,CAAAO,YAAA,CAAAH,WAAA,GAAAC,QAAA,CAAAF,OAAA,CACA;MACA;MAEA,OAAAL,MAAA;IACA;EACA;EACAU,QAAA;IACA,KAAAC,YAAA;IACA,KAAAC,eAAA;IACA,KAAAC,WAAA;;IAEA;IACA,SAAAC,MAAA,CAAAC,KAAA,CAAAZ,YAAA;MACA,KAAAR,kBAAA,QAAAmB,MAAA,CAAAC,KAAA,CAAAZ,YAAA;IACA;EACA;EACAa,OAAA;IACAL,aAAA;MACA,MAAAM,OAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAF,OAAA;QACA,KAAAzB,IAAA,GAAA4B,IAAA,CAAAC,KAAA,CAAAJ,OAAA;MACA;IACA;IACAL,gBAAA;MACA,KAAAU,MAAA,CAAAC,GAAA,qBAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACA,KAAAhC,WAAA,GAAA+B,GAAA,CAAAlC,IAAA;QACA;MACA;IACA;IACAsB,YAAA;MACA,KAAAhB,OAAA;;MAEA;MACA,MAAA8B,MAAA,QAAAhC,kBAAA;QAAAQ,YAAA,OAAAR;MAAA;MAEA,KAAA2B,MAAA,CAAAC,GAAA;QAAAI;MAAA,GAAAH,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACA,KAAAjC,OAAA,GAAAgC,GAAA,CAAAlC,IAAA;QACA;MACA,GAAAqC,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,KAAA,cAAAF,GAAA;QACA,KAAAG,QAAA,CAAAD,KAAA;MACA,GAAAE,OAAA;QACA,KAAApC,OAAA;MACA;IACA;IACAqC,mBAAA;MACA,KAAArB,WAAA;IACA;IACAsB,aAAA;MACA;IAAA,CACA;IACAC,aAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAhB,IAAA;QACAN,YAAA,CAAAuB,UAAA;QACAvB,YAAA,CAAAuB,UAAA;QACA,KAAAjD,IAAA;QACA,KAAAkD,OAAA,CAAAC,IAAA;QACA,KAAAX,QAAA,CAAAN,OAAA;MACA,GAAAE,KAAA;QACA;MAAA,CACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}