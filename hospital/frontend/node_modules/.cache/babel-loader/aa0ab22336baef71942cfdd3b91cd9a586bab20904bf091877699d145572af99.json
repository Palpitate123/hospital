{"ast":null,"code":"export default {\n  name: 'DepartmentManagement',\n  data() {\n    return {\n      // 科室列表数据\n      departments: [],\n      filteredDepartments: [],\n      loading: false,\n      // 搜索和筛选条件\n      searchKeyword: '',\n      selectedStatus: '',\n      // 分页信息\n      currentPage: 1,\n      pageSize: 10,\n      // 选中的科室\n      selectedDepartments: [],\n      // 当前查看的科室\n      currentDepartment: {},\n      // 添加科室对话框\n      addDepartmentDialogVisible: false,\n      addDepartmentForm: {\n        name: '',\n        description: '',\n        responsiblePerson: '',\n        phone: '',\n        location: '',\n        avatar: ''\n      },\n      addDepartmentRules: {\n        name: [{\n          required: true,\n          message: '请输入科室名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 50,\n          message: '科室名称长度在 2 到 50 个字符',\n          trigger: 'blur'\n        }],\n        description: [{\n          required: true,\n          message: '请输入科室描述',\n          trigger: 'blur'\n        }, {\n          max: 200,\n          message: '科室描述不能超过 200 个字符',\n          trigger: 'blur'\n        }],\n        responsiblePerson: [{\n          required: true,\n          message: '请输入科室负责人',\n          trigger: 'blur'\n        }, {\n          max: 20,\n          message: '负责人姓名不能超过 20 个字符',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入联系电话',\n          trigger: 'blur'\n        }, {\n          pattern: /^\\d{3,4}-?\\d{7,8}$|^1[3-9]\\d{9}$/,\n          message: '请输入正确的电话格式',\n          trigger: 'blur'\n        }],\n        location: [{\n          required: true,\n          message: '请输入科室位置',\n          trigger: 'blur'\n        }, {\n          max: 100,\n          message: '科室位置不能超过 100 个字符',\n          trigger: 'blur'\n        }]\n      },\n      // 编辑科室对话框\n      editDepartmentDialogVisible: false,\n      editDepartmentForm: {\n        id: '',\n        name: '',\n        description: '',\n        responsiblePerson: '',\n        phone: '',\n        location: '',\n        avatar: ''\n      },\n      editDepartmentRules: {\n        name: [{\n          required: true,\n          message: '请输入科室名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 50,\n          message: '科室名称长度在 2 到 50 个字符',\n          trigger: 'blur'\n        }],\n        description: [{\n          required: true,\n          message: '请输入科室描述',\n          trigger: 'blur'\n        }, {\n          max: 200,\n          message: '科室描述不能超过 200 个字符',\n          trigger: 'blur'\n        }],\n        responsiblePerson: [{\n          required: true,\n          message: '请输入科室负责人',\n          trigger: 'blur'\n        }, {\n          max: 20,\n          message: '负责人姓名不能超过 20 个字符',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入联系电话',\n          trigger: 'blur'\n        }, {\n          pattern: /^\\d{3,4}-?\\d{7,8}$|^1[3-9]\\d{9}$/,\n          message: '请输入正确的电话格式',\n          trigger: 'blur'\n        }],\n        location: [{\n          required: true,\n          message: '请输入科室位置',\n          trigger: 'blur'\n        }, {\n          max: 100,\n          message: '科室位置不能超过 100 个字符',\n          trigger: 'blur'\n        }]\n      },\n      // 科室详情对话框\n      departmentDetailDialogVisible: false,\n      // 科室医生列表对话框\n      departmentDoctorsDialogVisible: false,\n      departmentDoctors: []\n    };\n  },\n  mounted() {\n    this.fetchDepartments();\n  },\n  computed: {\n    // 分页后的科室列表\n    paginatedDepartments() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.filteredDepartments.slice(start, end);\n    }\n  },\n  methods: {\n    // 获取科室列表\n    fetchDepartments() {\n      this.loading = true;\n      // 这里应该是API调用，现在使用模拟数据\n      setTimeout(() => {\n        this.departments = [{\n          id: 1,\n          name: '内科',\n          description: '内科是医院的基础科室，负责诊治各种内科疾病，包括呼吸、消化、心血管、神经、内分泌等多个专业方向。',\n          responsiblePerson: '张主任',\n          phone: '010-12345601',\n          location: '门诊楼2层东区',\n          doctorCount: 15,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 2,\n          name: '外科',\n          description: '外科主要负责需要手术治疗的疾病，包括普外科、骨科、神经外科、心血管外科等多个专业领域。',\n          responsiblePerson: '李主任',\n          phone: '010-12345602',\n          location: '门诊楼3层西区',\n          doctorCount: 12,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 3,\n          name: '妇产科',\n          description: '妇产科负责女性生殖系统疾病的诊治和孕期保健，包括产科、妇科、生殖内分泌等专业。',\n          responsiblePerson: '王主任',\n          phone: '010-12345603',\n          location: '门诊楼4层南区',\n          doctorCount: 8,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 4,\n          name: '儿科',\n          description: '儿科专门为儿童提供医疗服务，包括儿童常见病、多发病的诊治和儿童保健。',\n          responsiblePerson: '赵主任',\n          phone: '010-12345604',\n          location: '门诊楼5层北区',\n          doctorCount: 10,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 5,\n          name: '眼科',\n          description: '眼科负责诊治眼部疾病，包括白内障、青光眼、视网膜疾病等，提供视力检查和配镜服务。',\n          responsiblePerson: '刘主任',\n          phone: '010-12345605',\n          location: '门诊楼6层东区',\n          doctorCount: 5,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 6,\n          name: '口腔科',\n          description: '口腔科负责口腔及相关组织的疾病诊治，包括牙体牙髓、口腔修复、正畸等多个专业。',\n          responsiblePerson: '孙主任',\n          phone: '010-12345606',\n          location: '门诊楼1层西区',\n          doctorCount: 7,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 7,\n          name: '皮肤科',\n          description: '皮肤科负责诊治各种皮肤疾病，包括皮炎、湿疹、痤疮、皮肤肿瘤等。',\n          responsiblePerson: '周主任',\n          phone: '010-12345607',\n          location: '门诊楼2层西区',\n          doctorCount: 4,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 8,\n          name: '耳鼻喉科',\n          description: '耳鼻喉科负责诊治耳、鼻、咽喉相关疾病，包括中耳炎、鼻窦炎、咽喉炎等。',\n          responsiblePerson: '吴主任',\n          phone: '010-12345608',\n          location: '门诊楼3层东区',\n          doctorCount: 6,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 9,\n          name: '精神心理科',\n          description: '精神心理科负责诊治各类精神疾病和心理障碍，提供心理咨询和心理治疗服务。',\n          responsiblePerson: '郑主任',\n          phone: '010-12345609',\n          location: '门诊楼7层北区',\n          doctorCount: 3,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }, {\n          id: 10,\n          name: '中医科',\n          description: '中医科提供中医诊疗服务，包括中药治疗、针灸、推拿按摩等传统中医疗法。',\n          responsiblePerson: '钱主任',\n          phone: '010-12345610',\n          location: '门诊楼8层南区',\n          doctorCount: 8,\n          status: 1,\n          createTime: '2023-01-01 00:00:00',\n          avatar: 'https://via.placeholder.com/150'\n        }];\n        this.filteredDepartments = [...this.departments];\n        this.loading = false;\n      }, 500);\n    },\n    // 搜索科室\n    handleSearch() {\n      let results = [...this.departments];\n\n      // 根据关键词搜索\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase();\n        results = results.filter(dept => dept.name.toLowerCase().includes(keyword) || dept.description.toLowerCase().includes(keyword) || dept.responsiblePerson.toLowerCase().includes(keyword));\n      }\n\n      // 根据状态筛选\n      if (this.selectedStatus !== '') {\n        results = results.filter(dept => dept.status === parseInt(this.selectedStatus));\n      }\n      this.filteredDepartments = results;\n      this.currentPage = 1; // 重置到第一页\n    },\n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;\n    },\n    // 显示添加科室对话框\n    showAddDepartmentDialog() {\n      this.resetAddDepartmentForm();\n      this.addDepartmentDialogVisible = true;\n    },\n    // 重置添加科室表单\n    resetAddDepartmentForm() {\n      this.addDepartmentForm = {\n        name: '',\n        description: '',\n        responsiblePerson: '',\n        phone: '',\n        location: '',\n        avatar: ''\n      };\n      this.$refs.addDepartmentForm && this.$refs.addDepartmentForm.resetFields();\n    },\n    // 提交添加科室\n    submitAddDepartment() {\n      this.$refs.addDepartmentForm.validate(valid => {\n        if (valid) {\n          // 这里应该是API调用，现在使用模拟数据\n          const newDepartment = {\n            id: this.departments.length + 1,\n            ...this.addDepartmentForm,\n            doctorCount: 0,\n            status: 1,\n            createTime: new Date().toISOString().replace('T', ' ').substring(0, 19)\n          };\n          this.departments.unshift(newDepartment);\n          this.handleSearch(); // 重新搜索以更新列表\n          this.addDepartmentDialogVisible = false;\n          this.$message.success('科室添加成功');\n        }\n      });\n    },\n    // 显示编辑科室对话框\n    showEditDepartmentDialog(department) {\n      this.editDepartmentForm = {\n        ...department\n      };\n      this.editDepartmentDialogVisible = true;\n    },\n    // 提交编辑科室\n    submitEditDepartment() {\n      this.$refs.editDepartmentForm.validate(valid => {\n        if (valid) {\n          // 这里应该是API调用，现在使用模拟数据\n          const index = this.departments.findIndex(d => d.id === this.editDepartmentForm.id);\n          if (index !== -1) {\n            // 保留医生数量、状态和创建时间\n            const original = this.departments[index];\n            this.departments[index] = {\n              ...this.editDepartmentForm,\n              doctorCount: original.doctorCount,\n              status: original.status,\n              createTime: original.createTime\n            };\n            this.handleSearch(); // 重新搜索以更新列表\n            this.editDepartmentDialogVisible = false;\n            this.$message.success('科室更新成功');\n          }\n        }\n      });\n    },\n    // 更新科室状态\n    updateDepartmentStatus(department) {\n      // 这里应该是API调用，现在只是更新本地数据\n      this.$message.success(`科室状态已更新为${department.status ? '启用' : '禁用'}`);\n    },\n    // 删除科室\n    deleteDepartment(department) {\n      if (department.doctorCount > 0) {\n        this.$message.warning('该科室下还有医生，无法删除');\n        return;\n      }\n      this.$confirm(`确定要删除科室「${department.name}」吗？`, '删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 这里应该是API调用，现在只是更新本地数据\n        const index = this.departments.findIndex(d => d.id === department.id);\n        if (index !== -1) {\n          this.departments.splice(index, 1);\n          this.handleSearch(); // 重新搜索以更新列表\n          this.$message.success('科室删除成功');\n        }\n      }).catch(() => {\n        // 取消删除\n      });\n    },\n    // 查看科室详情\n    viewDepartmentDetail(department) {\n      this.currentDepartment = {\n        ...department\n      };\n      this.departmentDetailDialogVisible = true;\n    },\n    // 查看科室医生\n    viewDepartmentDoctors(department) {\n      // 这里应该是API调用，现在使用模拟数据\n      this.departmentDoctors = this.getDepartmentDoctors(department.id);\n      this.departmentDoctorsDialogVisible = true;\n    },\n    // 获取科室医生（模拟数据）\n    getDepartmentDoctors(departmentId) {\n      const mockDoctors = {\n        1: [\n        // 内科医生\n        {\n          id: 101,\n          name: '张医生',\n          title: '主任医师',\n          specialty: '心血管疾病',\n          phone: '13800138101',\n          status: 1\n        }, {\n          id: 102,\n          name: '李医生',\n          title: '副主任医师',\n          specialty: '消化系统疾病',\n          phone: '13800138102',\n          status: 1\n        }, {\n          id: 103,\n          name: '王医生',\n          title: '主治医师',\n          specialty: '呼吸系统疾病',\n          phone: '13800138103',\n          status: 1\n        }],\n        2: [\n        // 外科医生\n        {\n          id: 201,\n          name: '刘医生',\n          title: '主任医师',\n          specialty: '普外科',\n          phone: '13800138201',\n          status: 1\n        }, {\n          id: 202,\n          name: '陈医生',\n          title: '副主任医师',\n          specialty: '骨科',\n          phone: '13800138202',\n          status: 1\n        }],\n        3: [\n        // 妇产科医生\n        {\n          id: 301,\n          name: '孙医生',\n          title: '主任医师',\n          specialty: '产科',\n          phone: '13800138301',\n          status: 1\n        }, {\n          id: 302,\n          name: '周医生',\n          title: '副主任医师',\n          specialty: '妇科',\n          phone: '13800138302',\n          status: 1\n        }]\n      };\n      return mockDoctors[departmentId] || [];\n    },\n    // 批量删除科室\n    batchDeleteDepartments() {\n      const departmentsWithDoctors = this.selectedDepartments.filter(d => d.doctorCount > 0);\n      if (departmentsWithDoctors.length > 0) {\n        const departmentNames = departmentsWithDoctors.map(d => d.name).join('、');\n        this.$message.warning(`以下科室还有医生，无法删除：${departmentNames}`);\n        return;\n      }\n      const departmentNames = this.selectedDepartments.map(d => d.name).join('、');\n      this.$confirm(`确定要删除以下科室吗？\\n${departmentNames}`, '批量删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 这里应该是API调用，现在只是更新本地数据\n        const idsToDelete = this.selectedDepartments.map(d => d.id);\n        this.departments = this.departments.filter(d => !idsToDelete.includes(d.id));\n        this.handleSearch(); // 重新搜索以更新列表\n        this.selectedDepartments = [];\n        this.$message.success('批量删除成功');\n      }).catch(() => {\n        // 取消删除\n      });\n    },\n    // 批量启用科室\n    batchEnableDepartments() {\n      // 这里应该是API调用，现在只是更新本地数据\n      this.selectedDepartments.forEach(department => {\n        department.status = 1;\n      });\n      this.selectedDepartments = [];\n      this.$message.success('批量启用成功');\n    },\n    // 批量禁用科室\n    batchDisableDepartments() {\n      // 这里应该是API调用，现在只是更新本地数据\n      this.selectedDepartments.forEach(department => {\n        department.status = 0;\n      });\n      this.selectedDepartments = [];\n      this.$message.success('批量禁用成功');\n    },\n    // 清空选择\n    clearSelection() {\n      this.$refs.departmentTable && this.$refs.departmentTable.clearSelection();\n      this.selectedDepartments = [];\n    },\n    // 分页大小变化\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    // 当前页码变化\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    // 多选变化\n    handleSelectionChange(selection) {\n      this.selectedDepartments = selection;\n    },\n    // 图片上传成功处理\n    handleAvatarSuccess(res, file) {\n      // 模拟上传成功\n      this.addDepartmentForm.avatar = URL.createObjectURL(file.raw);\n    },\n    // 编辑图片上传成功处理\n    handleEditAvatarSuccess(res, file) {\n      // 模拟上传成功\n      this.editDepartmentForm.avatar = URL.createObjectURL(file.raw);\n    },\n    // 图片上传前校验\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    }\n  }\n};","map":{"version":3,"names":["name","data","departments","filteredDepartments","loading","searchKeyword","selectedStatus","currentPage","pageSize","selectedDepartments","currentDepartment","addDepartmentDialogVisible","addDepartmentForm","description","responsiblePerson","phone","location","avatar","addDepartmentRules","required","message","trigger","min","max","pattern","editDepartmentDialogVisible","editDepartmentForm","id","editDepartmentRules","departmentDetailDialogVisible","departmentDoctorsDialogVisible","departmentDoctors","mounted","fetchDepartments","computed","paginatedDepartments","start","end","slice","methods","setTimeout","doctorCount","status","createTime","handleSearch","results","keyword","toLowerCase","filter","dept","includes","parseInt","formatDate","dateString","date","Date","getFullYear","getMonth","toString","padStart","getDate","getHours","getMinutes","getSeconds","showAddDepartmentDialog","resetAddDepartmentForm","$refs","resetFields","submitAddDepartment","validate","valid","newDepartment","length","toISOString","replace","substring","unshift","$message","success","showEditDepartmentDialog","department","submitEditDepartment","index","findIndex","d","original","updateDepartmentStatus","deleteDepartment","warning","$confirm","confirmButtonText","cancelButtonText","type","then","splice","catch","viewDepartmentDetail","viewDepartmentDoctors","getDepartmentDoctors","departmentId","mockDoctors","title","specialty","batchDeleteDepartments","departmentsWithDoctors","departmentNames","map","join","idsToDelete","batchEnableDepartments","forEach","batchDisableDepartments","clearSelection","departmentTable","handleSizeChange","val","handleCurrentChange","handleSelectionChange","selection","handleAvatarSuccess","res","file","URL","createObjectURL","raw","handleEditAvatarSuccess","beforeAvatarUpload","isJPG","isLt2M","size","error"],"sources":["src/views/admin/DepartmentManagement.vue"],"sourcesContent":["<template>\n  <div class=\"department-management\">\n    <div class=\"management-header\">\n      <h2>科室管理</h2>\n      <el-button type=\"primary\" @click=\"showAddDepartmentDialog\">\n        <i class=\"el-icon-plus\"></i> 添加科室\n      </el-button>\n    </div>\n\n    <!-- 搜索和筛选 -->\n    <div class=\"search-filter\">\n      <el-input\n        v-model=\"searchKeyword\"\n        placeholder=\"搜索科室名称、描述或负责人\"\n        prefix-icon=\"el-icon-search\"\n        clearable\n        @input=\"handleSearch\"\n        style=\"width: 300px; margin-right: 15px;\"\n      ></el-input>\n      \n      <el-select\n        v-model=\"selectedStatus\"\n        placeholder=\"选择科室状态\"\n        clearable\n        @change=\"handleSearch\"\n        style=\"width: 150px;\"\n      >\n        <el-option label=\"启用\" :value=\"1\"></el-option>\n        <el-option label=\"禁用\" :value=\"0\"></el-option>\n      </el-select>\n    </div>\n\n    <!-- 科室列表 -->\n    <div class=\"department-list\">\n      <el-table\n        :data=\"filteredDepartments\"\n        style=\"width: 100%\"\n        stripe\n        border\n        v-loading=\"loading\"\n        element-loading-text=\"加载中...\"\n        ref=\"departmentTable\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"id\" label=\"科室ID\" width=\"80\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"科室名称\" min-width=\"150\"></el-table-column>\n        <el-table-column prop=\"description\" label=\"科室描述\" show-overflow-tooltip min-width=\"200\"></el-table-column>\n        <el-table-column prop=\"responsiblePerson\" label=\"科室负责人\" min-width=\"120\"></el-table-column>\n        <el-table-column prop=\"phone\" label=\"联系电话\" min-width=\"120\"></el-table-column>\n        <el-table-column prop=\"location\" label=\"科室位置\" min-width=\"150\"></el-table-column>\n        <el-table-column prop=\"doctorCount\" label=\"医生数量\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag type=\"primary\" @click=\"viewDepartmentDoctors(scope.row)\">\n              {{ scope.row.doctorCount }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"status\" label=\"状态\">\n          <template slot-scope=\"scope\">\n            <el-switch\n              v-model=\"scope.row.status\"\n              active-color=\"#67c23a\"\n              inactive-color=\"#909399\"\n              @change=\"updateDepartmentStatus(scope.row)\"\n            ></el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.createTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" size=\"small\" @click=\"showEditDepartmentDialog(scope.row)\">\n              编辑\n            </el-button>\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"deleteDepartment(scope.row)\"\n              style=\"color: #f56c6c;\"\n            >\n              删除\n            </el-button>\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"viewDepartmentDetail(scope.row)\"\n            >\n              详情\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <div class=\"pagination\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next, jumper, sizes, total\"\n          :total=\"filteredDepartments.length\"\n          :page-size.sync=\"pageSize\"\n          :current-page.sync=\"currentPage\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        ></el-pagination>\n      </div>\n    </div>\n\n    <!-- 添加科室对话框 -->\n    <el-dialog\n      title=\"添加科室\"\n      :visible.sync=\"addDepartmentDialogVisible\"\n      width=\"600px\"\n      @close=\"resetAddDepartmentForm\"\n    >\n      <el-form\n        :model=\"addDepartmentForm\"\n        :rules=\"addDepartmentRules\"\n        ref=\"addDepartmentForm\"\n        label-width=\"120px\"\n      >\n        <el-form-item label=\"科室名称\" prop=\"name\">\n          <el-input v-model=\"addDepartmentForm.name\" placeholder=\"请输入科室名称\" maxlength=\"50\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室描述\" prop=\"description\">\n          <el-input\n            v-model=\"addDepartmentForm.description\"\n            type=\"textarea\"\n            rows=\"3\"\n            placeholder=\"请输入科室描述\"\n            maxlength=\"200\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室负责人\" prop=\"responsiblePerson\">\n          <el-input v-model=\"addDepartmentForm.responsiblePerson\" placeholder=\"请输入科室负责人\" maxlength=\"20\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系电话\" prop=\"phone\">\n          <el-input v-model=\"addDepartmentForm.phone\" placeholder=\"请输入联系电话\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室位置\" prop=\"location\">\n          <el-input v-model=\"addDepartmentForm.location\" placeholder=\"请输入科室位置\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室图片\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"#\"\n            :show-file-list=\"false\"\n            :on-success=\"handleAvatarSuccess\"\n            :before-upload=\"beforeAvatarUpload\"\n          >\n            <img v-if=\"addDepartmentForm.avatar\" :src=\"addDepartmentForm.avatar\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n          <div class=\"upload-tip\">点击上传科室图片 (jpg/png, 最大2MB)</div>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addDepartmentDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitAddDepartment\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 编辑科室对话框 -->\n    <el-dialog\n      title=\"编辑科室\"\n      :visible.sync=\"editDepartmentDialogVisible\"\n      width=\"600px\"\n    >\n      <el-form\n        :model=\"editDepartmentForm\"\n        :rules=\"editDepartmentRules\"\n        ref=\"editDepartmentForm\"\n        label-width=\"120px\"\n      >\n        <el-form-item label=\"科室ID\">\n          <el-input v-model=\"editDepartmentForm.id\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室名称\" prop=\"name\">\n          <el-input v-model=\"editDepartmentForm.name\" placeholder=\"请输入科室名称\" maxlength=\"50\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室描述\" prop=\"description\">\n          <el-input\n            v-model=\"editDepartmentForm.description\"\n            type=\"textarea\"\n            rows=\"3\"\n            placeholder=\"请输入科室描述\"\n            maxlength=\"200\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室负责人\" prop=\"responsiblePerson\">\n          <el-input v-model=\"editDepartmentForm.responsiblePerson\" placeholder=\"请输入科室负责人\" maxlength=\"20\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"联系电话\" prop=\"phone\">\n          <el-input v-model=\"editDepartmentForm.phone\" placeholder=\"请输入联系电话\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室位置\" prop=\"location\">\n          <el-input v-model=\"editDepartmentForm.location\" placeholder=\"请输入科室位置\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室图片\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"#\"\n            :show-file-list=\"false\"\n            :on-success=\"handleEditAvatarSuccess\"\n            :before-upload=\"beforeAvatarUpload\"\n          >\n            <img v-if=\"editDepartmentForm.avatar\" :src=\"editDepartmentForm.avatar\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n          <div class=\"upload-tip\">点击上传科室图片 (jpg/png, 最大2MB)</div>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDepartmentDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitEditDepartment\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 科室详情对话框 -->\n    <el-dialog\n      title=\"科室详情\"\n      :visible.sync=\"departmentDetailDialogVisible\"\n      width=\"600px\"\n    >\n      <el-descriptions :column=\"1\" border>\n        <el-descriptions-item label=\"科室ID\">{{ currentDepartment.id }}</el-descriptions-item>\n        <el-descriptions-item label=\"科室名称\">{{ currentDepartment.name }}</el-descriptions-item>\n        <el-descriptions-item label=\"科室描述\">{{ currentDepartment.description }}</el-descriptions-item>\n        <el-descriptions-item label=\"科室负责人\">{{ currentDepartment.responsiblePerson }}</el-descriptions-item>\n        <el-descriptions-item label=\"联系电话\">{{ currentDepartment.phone }}</el-descriptions-item>\n        <el-descriptions-item label=\"科室位置\">{{ currentDepartment.location }}</el-descriptions-item>\n        <el-descriptions-item label=\"医生数量\">{{ currentDepartment.doctorCount }}</el-descriptions-item>\n        <el-descriptions-item label=\"科室状态\">\n          <el-tag :type=\"currentDepartment.status ? 'success' : 'danger'\">\n            {{ currentDepartment.status ? '启用' : '禁用' }}\n          </el-tag>\n        </el-descriptions-item>\n        <el-descriptions-item label=\"创建时间\">{{ formatDate(currentDepartment.createTime) }}</el-descriptions-item>\n        <el-descriptions-item label=\"科室图片\" v-if=\"currentDepartment.avatar\">\n          <img :src=\"currentDepartment.avatar\" class=\"detail-avatar\" />\n        </el-descriptions-item>\n      </el-descriptions>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"departmentDetailDialogVisible = false\">关闭</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 科室医生列表对话框 -->\n    <el-dialog\n      title=\"科室医生列表\"\n      :visible.sync=\"departmentDoctorsDialogVisible\"\n      width=\"800px\"\n    >\n      <div v-if=\"departmentDoctors.length > 0\">\n        <el-table :data=\"departmentDoctors\" stripe border>\n          <el-table-column prop=\"id\" label=\"医生ID\" width=\"80\"></el-table-column>\n          <el-table-column prop=\"name\" label=\"医生姓名\"></el-table-column>\n          <el-table-column prop=\"title\" label=\"职称\"></el-table-column>\n          <el-table-column prop=\"specialty\" label=\"专长\"></el-table-column>\n          <el-table-column prop=\"phone\" label=\"联系电话\"></el-table-column>\n          <el-table-column prop=\"status\" label=\"状态\">\n            <template slot-scope=\"scope\">\n              <el-tag :type=\"scope.row.status ? 'success' : 'danger'\">\n                {{ scope.row.status ? '在职' : '离职' }}\n              </el-tag>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n      <div v-else class=\"empty-tip\">\n        <el-empty description=\"该科室暂无医生\"></el-empty>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"departmentDoctorsDialogVisible = false\">关闭</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 批量操作 -->\n    <div class=\"batch-operations\" v-if=\"selectedDepartments.length > 0\">\n      <el-tag>\n        已选择 {{ selectedDepartments.length }} 项\n      </el-tag>\n      <el-button type=\"danger\" size=\"small\" @click=\"batchDeleteDepartments\">\n        批量删除\n      </el-button>\n      <el-button type=\"warning\" size=\"small\" @click=\"batchEnableDepartments\">\n        批量启用\n      </el-button>\n      <el-button type=\"warning\" size=\"small\" @click=\"batchDisableDepartments\">\n        批量禁用\n      </el-button>\n      <el-button size=\"small\" @click=\"clearSelection\">清空选择</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DepartmentManagement',\n  data() {\n    return {\n      // 科室列表数据\n      departments: [],\n      filteredDepartments: [],\n      loading: false,\n      \n      // 搜索和筛选条件\n      searchKeyword: '',\n      selectedStatus: '',\n      \n      // 分页信息\n      currentPage: 1,\n      pageSize: 10,\n      \n      // 选中的科室\n      selectedDepartments: [],\n      \n      // 当前查看的科室\n      currentDepartment: {},\n      \n      // 添加科室对话框\n      addDepartmentDialogVisible: false,\n      addDepartmentForm: {\n        name: '',\n        description: '',\n        responsiblePerson: '',\n        phone: '',\n        location: '',\n        avatar: ''\n      },\n      addDepartmentRules: {\n        name: [\n          { required: true, message: '请输入科室名称', trigger: 'blur' },\n          { min: 2, max: 50, message: '科室名称长度在 2 到 50 个字符', trigger: 'blur' }\n        ],\n        description: [\n          { required: true, message: '请输入科室描述', trigger: 'blur' },\n          { max: 200, message: '科室描述不能超过 200 个字符', trigger: 'blur' }\n        ],\n        responsiblePerson: [\n          { required: true, message: '请输入科室负责人', trigger: 'blur' },\n          { max: 20, message: '负责人姓名不能超过 20 个字符', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入联系电话', trigger: 'blur' },\n          { pattern: /^\\d{3,4}-?\\d{7,8}$|^1[3-9]\\d{9}$/, message: '请输入正确的电话格式', trigger: 'blur' }\n        ],\n        location: [\n          { required: true, message: '请输入科室位置', trigger: 'blur' },\n          { max: 100, message: '科室位置不能超过 100 个字符', trigger: 'blur' }\n        ]\n      },\n      \n      // 编辑科室对话框\n      editDepartmentDialogVisible: false,\n      editDepartmentForm: {\n        id: '',\n        name: '',\n        description: '',\n        responsiblePerson: '',\n        phone: '',\n        location: '',\n        avatar: ''\n      },\n      editDepartmentRules: {\n        name: [\n          { required: true, message: '请输入科室名称', trigger: 'blur' },\n          { min: 2, max: 50, message: '科室名称长度在 2 到 50 个字符', trigger: 'blur' }\n        ],\n        description: [\n          { required: true, message: '请输入科室描述', trigger: 'blur' },\n          { max: 200, message: '科室描述不能超过 200 个字符', trigger: 'blur' }\n        ],\n        responsiblePerson: [\n          { required: true, message: '请输入科室负责人', trigger: 'blur' },\n          { max: 20, message: '负责人姓名不能超过 20 个字符', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入联系电话', trigger: 'blur' },\n          { pattern: /^\\d{3,4}-?\\d{7,8}$|^1[3-9]\\d{9}$/, message: '请输入正确的电话格式', trigger: 'blur' }\n        ],\n        location: [\n          { required: true, message: '请输入科室位置', trigger: 'blur' },\n          { max: 100, message: '科室位置不能超过 100 个字符', trigger: 'blur' }\n        ]\n      },\n      \n      // 科室详情对话框\n      departmentDetailDialogVisible: false,\n      \n      // 科室医生列表对话框\n      departmentDoctorsDialogVisible: false,\n      departmentDoctors: []\n    }\n  },\n  mounted() {\n    this.fetchDepartments()\n  },\n  computed: {\n    // 分页后的科室列表\n    paginatedDepartments() {\n      const start = (this.currentPage - 1) * this.pageSize\n      const end = start + this.pageSize\n      return this.filteredDepartments.slice(start, end)\n    }\n  },\n  methods: {\n    // 获取科室列表\n    fetchDepartments() {\n      this.loading = true\n      // 这里应该是API调用，现在使用模拟数据\n      setTimeout(() => {\n        this.departments = [\n          {\n            id: 1,\n            name: '内科',\n            description: '内科是医院的基础科室，负责诊治各种内科疾病，包括呼吸、消化、心血管、神经、内分泌等多个专业方向。',\n            responsiblePerson: '张主任',\n            phone: '010-12345601',\n            location: '门诊楼2层东区',\n            doctorCount: 15,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 2,\n            name: '外科',\n            description: '外科主要负责需要手术治疗的疾病，包括普外科、骨科、神经外科、心血管外科等多个专业领域。',\n            responsiblePerson: '李主任',\n            phone: '010-12345602',\n            location: '门诊楼3层西区',\n            doctorCount: 12,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 3,\n            name: '妇产科',\n            description: '妇产科负责女性生殖系统疾病的诊治和孕期保健，包括产科、妇科、生殖内分泌等专业。',\n            responsiblePerson: '王主任',\n            phone: '010-12345603',\n            location: '门诊楼4层南区',\n            doctorCount: 8,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 4,\n            name: '儿科',\n            description: '儿科专门为儿童提供医疗服务，包括儿童常见病、多发病的诊治和儿童保健。',\n            responsiblePerson: '赵主任',\n            phone: '010-12345604',\n            location: '门诊楼5层北区',\n            doctorCount: 10,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 5,\n            name: '眼科',\n            description: '眼科负责诊治眼部疾病，包括白内障、青光眼、视网膜疾病等，提供视力检查和配镜服务。',\n            responsiblePerson: '刘主任',\n            phone: '010-12345605',\n            location: '门诊楼6层东区',\n            doctorCount: 5,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 6,\n            name: '口腔科',\n            description: '口腔科负责口腔及相关组织的疾病诊治，包括牙体牙髓、口腔修复、正畸等多个专业。',\n            responsiblePerson: '孙主任',\n            phone: '010-12345606',\n            location: '门诊楼1层西区',\n            doctorCount: 7,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 7,\n            name: '皮肤科',\n            description: '皮肤科负责诊治各种皮肤疾病，包括皮炎、湿疹、痤疮、皮肤肿瘤等。',\n            responsiblePerson: '周主任',\n            phone: '010-12345607',\n            location: '门诊楼2层西区',\n            doctorCount: 4,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 8,\n            name: '耳鼻喉科',\n            description: '耳鼻喉科负责诊治耳、鼻、咽喉相关疾病，包括中耳炎、鼻窦炎、咽喉炎等。',\n            responsiblePerson: '吴主任',\n            phone: '010-12345608',\n            location: '门诊楼3层东区',\n            doctorCount: 6,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 9,\n            name: '精神心理科',\n            description: '精神心理科负责诊治各类精神疾病和心理障碍，提供心理咨询和心理治疗服务。',\n            responsiblePerson: '郑主任',\n            phone: '010-12345609',\n            location: '门诊楼7层北区',\n            doctorCount: 3,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          },\n          {\n            id: 10,\n            name: '中医科',\n            description: '中医科提供中医诊疗服务，包括中药治疗、针灸、推拿按摩等传统中医疗法。',\n            responsiblePerson: '钱主任',\n            phone: '010-12345610',\n            location: '门诊楼8层南区',\n            doctorCount: 8,\n            status: 1,\n            createTime: '2023-01-01 00:00:00',\n            avatar: 'https://via.placeholder.com/150'\n          }\n        ]\n        this.filteredDepartments = [...this.departments]\n        this.loading = false\n      }, 500)\n    },\n\n    // 搜索科室\n    handleSearch() {\n      let results = [...this.departments]\n      \n      // 根据关键词搜索\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase()\n        results = results.filter(dept => \n          dept.name.toLowerCase().includes(keyword) ||\n          dept.description.toLowerCase().includes(keyword) ||\n          dept.responsiblePerson.toLowerCase().includes(keyword)\n        )\n      }\n      \n      // 根据状态筛选\n      if (this.selectedStatus !== '') {\n        results = results.filter(dept => dept.status === parseInt(this.selectedStatus))\n      }\n      \n      this.filteredDepartments = results\n      this.currentPage = 1 // 重置到第一页\n    },\n\n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`\n    },\n\n    // 显示添加科室对话框\n    showAddDepartmentDialog() {\n      this.resetAddDepartmentForm()\n      this.addDepartmentDialogVisible = true\n    },\n\n    // 重置添加科室表单\n    resetAddDepartmentForm() {\n      this.addDepartmentForm = {\n        name: '',\n        description: '',\n        responsiblePerson: '',\n        phone: '',\n        location: '',\n        avatar: ''\n      }\n      this.$refs.addDepartmentForm && this.$refs.addDepartmentForm.resetFields()\n    },\n\n    // 提交添加科室\n    submitAddDepartment() {\n      this.$refs.addDepartmentForm.validate((valid) => {\n        if (valid) {\n          // 这里应该是API调用，现在使用模拟数据\n          const newDepartment = {\n            id: this.departments.length + 1,\n            ...this.addDepartmentForm,\n            doctorCount: 0,\n            status: 1,\n            createTime: new Date().toISOString().replace('T', ' ').substring(0, 19)\n          }\n          this.departments.unshift(newDepartment)\n          this.handleSearch() // 重新搜索以更新列表\n          this.addDepartmentDialogVisible = false\n          this.$message.success('科室添加成功')\n        }\n      })\n    },\n\n    // 显示编辑科室对话框\n    showEditDepartmentDialog(department) {\n      this.editDepartmentForm = { ...department }\n      this.editDepartmentDialogVisible = true\n    },\n\n    // 提交编辑科室\n    submitEditDepartment() {\n      this.$refs.editDepartmentForm.validate((valid) => {\n        if (valid) {\n          // 这里应该是API调用，现在使用模拟数据\n          const index = this.departments.findIndex(d => d.id === this.editDepartmentForm.id)\n          if (index !== -1) {\n            // 保留医生数量、状态和创建时间\n            const original = this.departments[index]\n            this.departments[index] = { \n              ...this.editDepartmentForm,\n              doctorCount: original.doctorCount,\n              status: original.status,\n              createTime: original.createTime\n            }\n            this.handleSearch() // 重新搜索以更新列表\n            this.editDepartmentDialogVisible = false\n            this.$message.success('科室更新成功')\n          }\n        }\n      })\n    },\n\n    // 更新科室状态\n    updateDepartmentStatus(department) {\n      // 这里应该是API调用，现在只是更新本地数据\n      this.$message.success(`科室状态已更新为${department.status ? '启用' : '禁用'}`)\n    },\n\n    // 删除科室\n    deleteDepartment(department) {\n      if (department.doctorCount > 0) {\n        this.$message.warning('该科室下还有医生，无法删除')\n        return\n      }\n      \n      this.$confirm(`确定要删除科室「${department.name}」吗？`, '删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 这里应该是API调用，现在只是更新本地数据\n        const index = this.departments.findIndex(d => d.id === department.id)\n        if (index !== -1) {\n          this.departments.splice(index, 1)\n          this.handleSearch() // 重新搜索以更新列表\n          this.$message.success('科室删除成功')\n        }\n      }).catch(() => {\n        // 取消删除\n      })\n    },\n\n    // 查看科室详情\n    viewDepartmentDetail(department) {\n      this.currentDepartment = { ...department }\n      this.departmentDetailDialogVisible = true\n    },\n\n    // 查看科室医生\n    viewDepartmentDoctors(department) {\n      // 这里应该是API调用，现在使用模拟数据\n      this.departmentDoctors = this.getDepartmentDoctors(department.id)\n      this.departmentDoctorsDialogVisible = true\n    },\n\n    // 获取科室医生（模拟数据）\n    getDepartmentDoctors(departmentId) {\n      const mockDoctors = {\n        1: [ // 内科医生\n          { id: 101, name: '张医生', title: '主任医师', specialty: '心血管疾病', phone: '13800138101', status: 1 },\n          { id: 102, name: '李医生', title: '副主任医师', specialty: '消化系统疾病', phone: '13800138102', status: 1 },\n          { id: 103, name: '王医生', title: '主治医师', specialty: '呼吸系统疾病', phone: '13800138103', status: 1 }\n        ],\n        2: [ // 外科医生\n          { id: 201, name: '刘医生', title: '主任医师', specialty: '普外科', phone: '13800138201', status: 1 },\n          { id: 202, name: '陈医生', title: '副主任医师', specialty: '骨科', phone: '13800138202', status: 1 }\n        ],\n        3: [ // 妇产科医生\n          { id: 301, name: '孙医生', title: '主任医师', specialty: '产科', phone: '13800138301', status: 1 },\n          { id: 302, name: '周医生', title: '副主任医师', specialty: '妇科', phone: '13800138302', status: 1 }\n        ]\n      }\n      return mockDoctors[departmentId] || []\n    },\n\n    // 批量删除科室\n    batchDeleteDepartments() {\n      const departmentsWithDoctors = this.selectedDepartments.filter(d => d.doctorCount > 0)\n      if (departmentsWithDoctors.length > 0) {\n        const departmentNames = departmentsWithDoctors.map(d => d.name).join('、')\n        this.$message.warning(`以下科室还有医生，无法删除：${departmentNames}`)\n        return\n      }\n\n      const departmentNames = this.selectedDepartments.map(d => d.name).join('、')\n      this.$confirm(`确定要删除以下科室吗？\\n${departmentNames}`, '批量删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 这里应该是API调用，现在只是更新本地数据\n        const idsToDelete = this.selectedDepartments.map(d => d.id)\n        this.departments = this.departments.filter(d => !idsToDelete.includes(d.id))\n        this.handleSearch() // 重新搜索以更新列表\n        this.selectedDepartments = []\n        this.$message.success('批量删除成功')\n      }).catch(() => {\n        // 取消删除\n      })\n    },\n\n    // 批量启用科室\n    batchEnableDepartments() {\n      // 这里应该是API调用，现在只是更新本地数据\n      this.selectedDepartments.forEach(department => {\n        department.status = 1\n      })\n      this.selectedDepartments = []\n      this.$message.success('批量启用成功')\n    },\n\n    // 批量禁用科室\n    batchDisableDepartments() {\n      // 这里应该是API调用，现在只是更新本地数据\n      this.selectedDepartments.forEach(department => {\n        department.status = 0\n      })\n      this.selectedDepartments = []\n      this.$message.success('批量禁用成功')\n    },\n\n    // 清空选择\n    clearSelection() {\n      this.$refs.departmentTable && this.$refs.departmentTable.clearSelection()\n      this.selectedDepartments = []\n    },\n\n    // 分页大小变化\n    handleSizeChange(val) {\n      this.pageSize = val\n    },\n\n    // 当前页码变化\n    handleCurrentChange(val) {\n      this.currentPage = val\n    },\n\n    // 多选变化\n    handleSelectionChange(selection) {\n      this.selectedDepartments = selection\n    },\n\n    // 图片上传成功处理\n    handleAvatarSuccess(res, file) {\n      // 模拟上传成功\n      this.addDepartmentForm.avatar = URL.createObjectURL(file.raw)\n    },\n\n    // 编辑图片上传成功处理\n    handleEditAvatarSuccess(res, file) {\n      // 模拟上传成功\n      this.editDepartmentForm.avatar = URL.createObjectURL(file.raw)\n    },\n\n    // 图片上传前校验\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png'\n      const isLt2M = file.size / 1024 / 1024 < 2\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!')\n      }\n      return isJPG && isLt2M\n    }\n  }\n}\n</script>\n\n<style scoped>\n.department-management {\n  padding: 20px;\n  background-color: #f5f7fa;\n  min-height: calc(100vh - 60px);\n}\n\n.management-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.management-header h2 {\n  margin: 0;\n  color: #303133;\n}\n\n.search-filter {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.department-list {\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  padding: 15px;\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.batch-operations {\n  margin-top: 15px;\n  padding: 10px 15px;\n  background-color: #ecf5ff;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.batch-operations .el-tag {\n  background-color: #409eff;\n  color: #fff;\n}\n\n/* 头像上传样式 */\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: border-color .3s;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 150px;\n  height: 150px;\n  line-height: 150px;\n  text-align: center;\n}\n\n.avatar {\n  width: 150px;\n  height: 150px;\n  display: block;\n}\n\n.upload-tip {\n  margin-top: 10px;\n  color: #909399;\n  font-size: 12px;\n}\n\n/* 详情页头像 */\n.detail-avatar {\n  width: 200px;\n  height: 200px;\n  border-radius: 4px;\n}\n\n/* 空状态提示 */\n.empty-tip {\n  padding: 40px 0;\n  text-align: center;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .search-filter {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 10px;\n  }\n  \n  .search-filter .el-input,\n  .search-filter .el-select {\n    width: 100% !important;\n    margin-right: 0 !important;\n  }\n  \n  .management-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .pagination {\n    justify-content: center;\n  }\n  \n  .avatar-uploader-icon,\n  .avatar {\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n  }\n  \n  .detail-avatar {\n    width: 150px;\n    height: 150px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}