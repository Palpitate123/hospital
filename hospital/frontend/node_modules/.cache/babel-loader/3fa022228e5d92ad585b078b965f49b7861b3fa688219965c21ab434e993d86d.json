{"ast":null,"code":"import patientAPI from '@/api/patient';\nimport doctorAPI from '@/api/doctor';\nimport request from '@/api/request';\nexport default {\n  name: 'UserManagement',\n  data() {\n    return {\n      // 用户列表数据\n      users: [],\n      filteredUsers: [],\n      loading: false,\n      // 搜索和筛选条件\n      searchKeyword: '',\n      selectedRole: '',\n      selectedStatus: '',\n      // 分页信息\n      currentPage: 1,\n      pageSize: 10,\n      // 选中的用户\n      selectedUsers: [],\n      // 用户管理专用API\n      userAPI: {\n        // 获取所有用户（管理员视角）\n        getAllUsers: () => {\n          return request({\n            url: '/users',\n            method: 'get'\n          });\n        },\n        // 添加用户\n        addUser: userData => {\n          return request({\n            url: '/users',\n            method: 'post',\n            data: userData\n          });\n        },\n        // 更新用户\n        updateUser: (userId, userData) => {\n          return request({\n            url: `/users/${userId}`,\n            method: 'put',\n            data: userData\n          });\n        },\n        // 删除用户\n        deleteUser: userId => {\n          return request({\n            url: `/users/${userId}`,\n            method: 'delete'\n          });\n        },\n        // 更新用户状态\n        updateUserStatus: (userId, status) => {\n          return request({\n            url: `/users/${userId}/status`,\n            method: 'put',\n            data: {\n              status: status\n            }\n          });\n        },\n        // 重置密码\n        resetPassword: userId => {\n          return request({\n            url: `/users/${userId}/reset-password`,\n            method: 'put'\n          });\n        }\n      },\n      // 添加用户对话框\n      addUserDialogVisible: false,\n      addUserForm: {\n        username: '',\n        realName: '',\n        phone: '',\n        email: '',\n        role: 'PATIENT',\n        password: ''\n      },\n      addUserRules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '用户名长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }],\n        realName: [{\n          required: true,\n          message: '请输入真实姓名',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入手机号',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: '请输入正确的手机号格式',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请输入邮箱',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: '请输入正确的邮箱格式',\n          trigger: 'blur'\n        }],\n        role: [{\n          required: true,\n          message: '请选择用户角色',\n          trigger: 'change'\n        }],\n        password: [{\n          required: true,\n          message: '请输入初始密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          message: '密码长度不能少于 6 个字符',\n          trigger: 'blur'\n        }]\n      },\n      // 编辑用户对话框\n      editUserDialogVisible: false,\n      editUserForm: {\n        id: '',\n        username: '',\n        realName: '',\n        phone: '',\n        email: '',\n        role: ''\n      },\n      editUserRules: {\n        realName: [{\n          required: true,\n          message: '请输入真实姓名',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入手机号',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: '请输入正确的手机号格式',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请输入邮箱',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: '请输入正确的邮箱格式',\n          trigger: 'blur'\n        }],\n        role: [{\n          required: true,\n          message: '请选择用户角色',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  mounted() {\n    this.fetchUsers();\n  },\n  computed: {\n    // 分页后的用户列表\n    paginatedUsers() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.filteredUsers.slice(start, end);\n    }\n  },\n  methods: {\n    // 获取用户列表\n    async fetchUsers() {\n      this.loading = true;\n      try {\n        // 尝试获取所有用户（管理员视角）\n        try {\n          const response = await this.userAPI.getAllUsers();\n          if (response.data && response.data.length > 0) {\n            this.users = response.data.map(user => ({\n              ...user,\n              role: user.role || 'UNKNOWN'\n            }));\n          } else {\n            // 如果没有统一的用户API，尝试从不同模块获取\n            await this.fetchUsersFromModules();\n          }\n        } catch (error) {\n          console.log('统一用户API不可用，尝试从不同模块获取数据');\n          await this.fetchUsersFromModules();\n        }\n        this.filteredUsers = [...this.users];\n      } catch (error) {\n        console.error('获取用户列表失败:', error);\n        this.$message.error('获取用户列表失败');\n        // 失败时使用空列表\n        this.users = [];\n        this.filteredUsers = [];\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 从不同模块获取用户数据\n    async fetchUsersFromModules() {\n      try {\n        // 并行获取患者和医生数据\n        const [patientsRes, doctorsRes] = await Promise.all([patientAPI.getAllPatients(), doctorAPI.getAllDoctors()]);\n\n        // 处理患者数据\n        const patients = patientsRes.data ? patientsRes.data.map(p => ({\n          id: p.id,\n          username: p.username || `patient${p.id}`,\n          realName: p.realName || p.name,\n          phone: p.phone || '',\n          email: p.email || '',\n          role: 'PATIENT',\n          status: p.status !== undefined ? p.status : 1,\n          createTime: p.createTime || new Date().toISOString()\n        })) : [];\n\n        // 处理医生数据\n        const doctors = doctorsRes.data ? doctorsRes.data.map(d => ({\n          id: d.id,\n          username: d.username || `doctor${d.id}`,\n          realName: d.realName || d.name,\n          phone: d.phone || '',\n          email: d.email || '',\n          role: 'DOCTOR',\n          status: d.status !== undefined ? d.status : 1,\n          createTime: d.createTime || new Date().toISOString()\n        })) : [];\n\n        // 添加管理员账户（模拟）\n        const adminUser = {\n          id: 1,\n          username: 'admin',\n          realName: '管理员',\n          phone: '13800138000',\n          email: 'admin@hospital.com',\n          role: 'ADMIN',\n          status: 1,\n          createTime: '2023-01-01 00:00:00'\n        };\n\n        // 合并所有用户数据\n        this.users = [adminUser, ...patients, ...doctors];\n      } catch (error) {\n        console.error('从模块获取用户数据失败:', error);\n        throw error;\n      }\n    },\n    // 搜索用户\n    handleSearch() {\n      let results = [...this.users];\n\n      // 根据关键词搜索\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase();\n        results = results.filter(user => user.username.toLowerCase().includes(keyword) || user.realName.toLowerCase().includes(keyword) || user.phone.includes(keyword));\n      }\n\n      // 根据角色筛选\n      if (this.selectedRole) {\n        results = results.filter(user => user.role === this.selectedRole);\n      }\n\n      // 根据状态筛选\n      if (this.selectedStatus !== '') {\n        results = results.filter(user => user.status === parseInt(this.selectedStatus));\n      }\n      this.filteredUsers = results;\n      this.currentPage = 1; // 重置到第一页\n    },\n    // 获取角色名称\n    getRoleName(role) {\n      const roleMap = {\n        'PATIENT': '患者',\n        'DOCTOR': '医生',\n        'ADMIN': '管理员'\n      };\n      return roleMap[role] || role;\n    },\n    // 获取角色标签类型\n    getRoleType(role) {\n      const typeMap = {\n        'PATIENT': 'primary',\n        'DOCTOR': 'success',\n        'ADMIN': 'danger'\n      };\n      return typeMap[role] || 'info';\n    },\n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;\n    },\n    // 显示添加用户对话框\n    showAddUserDialog() {\n      this.resetAddUserForm();\n      this.addUserDialogVisible = true;\n    },\n    // 重置添加用户表单\n    resetAddUserForm() {\n      this.addUserForm = {\n        username: '',\n        realName: '',\n        phone: '',\n        email: '',\n        role: 'PATIENT',\n        password: ''\n      };\n      this.$refs.addUserForm && this.$refs.addUserForm.resetFields();\n    },\n    // 提交添加用户\n    submitAddUser() {\n      this.$refs.addUserForm.validate(async valid => {\n        if (valid) {\n          try {\n            const response = await this.userAPI.addUser(this.addUserForm);\n\n            // 根据用户角色，可能需要向对应的模块添加记录\n            if (this.addUserForm.role === 'PATIENT' && patientAPI.addPatient) {\n              await patientAPI.addPatient({\n                ...this.addUserForm,\n                id: response.data.id\n              });\n            } else if (this.addUserForm.role === 'DOCTOR' && doctorAPI.addDoctor) {\n              await doctorAPI.addDoctor({\n                ...this.addUserForm,\n                id: response.data.id\n              });\n            }\n            this.$message.success('用户添加成功');\n            this.fetchUsers(); // 重新获取用户列表\n            this.addUserDialogVisible = false;\n            this.resetAddUserForm();\n          } catch (error) {\n            console.error('添加用户失败:', error);\n            this.$message.error('添加用户失败');\n          }\n        }\n      });\n    },\n    // 显示编辑用户对话框\n    showEditUserDialog(user) {\n      this.editUserForm = {\n        ...user\n      };\n      this.editUserDialogVisible = true;\n    },\n    // 提交编辑用户\n    submitEditUser() {\n      this.$refs.editUserForm.validate(async valid => {\n        if (valid) {\n          try {\n            await this.userAPI.updateUser(this.editUserForm.id, this.editUserForm);\n\n            // 根据用户角色，可能需要更新对应的模块记录\n            if (this.editUserForm.role === 'PATIENT' && patientAPI.updatePatient) {\n              await patientAPI.updatePatient(this.editUserForm.id, this.editUserForm);\n            } else if (this.editUserForm.role === 'DOCTOR' && doctorAPI.updateDoctor) {\n              await doctorAPI.updateDoctor(this.editUserForm.id, this.editUserForm);\n            }\n            this.$message.success('用户更新成功');\n            this.fetchUsers(); // 重新获取用户列表\n            this.editUserDialogVisible = false;\n          } catch (error) {\n            console.error('更新用户失败:', error);\n            this.$message.error('更新用户失败');\n          }\n        }\n      });\n    },\n    // 更新用户状态\n    async updateUserStatus(user) {\n      try {\n        await this.userAPI.updateUserStatus(user.id, user.status);\n\n        // 根据用户角色，可能需要更新对应的模块记录\n        if (user.role === 'PATIENT' && patientAPI.updatePatientStatus) {\n          await patientAPI.updatePatientStatus(user.id, user.status);\n        } else if (user.role === 'DOCTOR' && doctorAPI.updateDoctorStatus) {\n          await doctorAPI.updateDoctorStatus(user.id, user.status);\n        }\n        this.$message.success(`用户状态已更新为${user.status ? '启用' : '禁用'}`);\n        this.fetchUsers(); // 重新获取用户列表以确保数据一致\n      } catch (error) {\n        console.error('更新用户状态失败:', error);\n        this.$message.error('更新用户状态失败');\n        // 恢复原状态\n        user.status = user.status === 1 ? 0 : 1;\n      }\n    },\n    // 删除用户\n    deleteUser(user) {\n      this.$confirm(`确定要删除用户「${user.realName}」吗？`, '删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await this.userAPI.deleteUser(user.id);\n\n          // 根据用户角色，可能需要删除对应的模块记录\n          if (user.role === 'PATIENT' && patientAPI.deletePatient) {\n            await patientAPI.deletePatient(user.id);\n          } else if (user.role === 'DOCTOR' && doctorAPI.deleteDoctor) {\n            await doctorAPI.deleteDoctor(user.id);\n          }\n          this.fetchUsers(); // 重新获取用户列表\n          this.$message.success('用户删除成功');\n        } catch (error) {\n          console.error('删除用户失败:', error);\n          this.$message.error('删除用户失败');\n        }\n      }).catch(() => {\n        // 取消删除\n      });\n    },\n    // 重置密码\n    resetPassword(user) {\n      this.$confirm(`确定要重置用户「${user.realName}」的密码吗？`, '重置确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await this.userAPI.resetPassword(user.id);\n          this.$message.success(`用户「${user.realName}」的密码已重置为：123456`);\n        } catch (error) {\n          console.error('重置密码失败:', error);\n          this.$message.error('重置密码失败');\n        }\n      }).catch(() => {\n        // 取消重置\n      });\n    },\n    // 批量删除用户\n    batchDeleteUsers() {\n      if (this.selectedUsers.some(user => user.role === 'ADMIN')) {\n        this.$message.warning('不能删除管理员用户');\n        return;\n      }\n      const userNames = this.selectedUsers.map(u => u.realName).join('、');\n      this.$confirm(`确定要删除以下用户吗？\\n${userNames}`, '批量删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          // 并行删除所有选中的用户\n          const deletePromises = this.selectedUsers.map(user => {\n            const deleteUserPromise = this.userAPI.deleteUser(user.id);\n\n            // 根据用户角色，可能需要删除对应的模块记录\n            if (user.role === 'PATIENT' && patientAPI.deletePatient) {\n              return Promise.all([deleteUserPromise, patientAPI.deletePatient(user.id)]);\n            } else if (user.role === 'DOCTOR' && doctorAPI.deleteDoctor) {\n              return Promise.all([deleteUserPromise, doctorAPI.deleteDoctor(user.id)]);\n            }\n            return deleteUserPromise;\n          });\n          await Promise.all(deletePromises);\n          this.fetchUsers(); // 重新获取用户列表\n          this.selectedUsers = [];\n          this.$message.success('批量删除成功');\n        } catch (error) {\n          console.error('批量删除用户失败:', error);\n          this.$message.error('批量删除用户失败');\n        }\n      }).catch(() => {\n        // 取消删除\n      });\n    },\n    // 批量启用用户\n    async batchEnableUsers() {\n      try {\n        // 并行启用所有选中的用户\n        const enablePromises = this.selectedUsers.map(user => {\n          const enableUserPromise = this.userAPI.updateUserStatus(user.id, 1);\n\n          // 根据用户角色，可能需要更新对应的模块记录\n          if (user.role === 'PATIENT' && patientAPI.updatePatientStatus) {\n            return Promise.all([enableUserPromise, patientAPI.updatePatientStatus(user.id, 1)]);\n          } else if (user.role === 'DOCTOR' && doctorAPI.updateDoctorStatus) {\n            return Promise.all([enableUserPromise, doctorAPI.updateDoctorStatus(user.id, 1)]);\n          }\n          return enableUserPromise;\n        });\n        await Promise.all(enablePromises);\n        this.fetchUsers(); // 重新获取用户列表\n        this.selectedUsers = [];\n        this.$message.success('批量启用成功');\n      } catch (error) {\n        console.error('批量启用用户失败:', error);\n        this.$message.error('批量启用用户失败');\n      }\n    },\n    // 批量禁用用户\n    async batchDisableUsers() {\n      if (this.selectedUsers.some(user => user.role === 'ADMIN')) {\n        this.$message.warning('不能禁用管理员用户');\n        return;\n      }\n      try {\n        // 并行禁用所有选中的用户\n        const disablePromises = this.selectedUsers.map(user => {\n          const disableUserPromise = this.userAPI.updateUserStatus(user.id, 0);\n\n          // 根据用户角色，可能需要更新对应的模块记录\n          if (user.role === 'PATIENT' && patientAPI.updatePatientStatus) {\n            return Promise.all([disableUserPromise, patientAPI.updatePatientStatus(user.id, 0)]);\n          } else if (user.role === 'DOCTOR' && doctorAPI.updateDoctorStatus) {\n            return Promise.all([disableUserPromise, doctorAPI.updateDoctorStatus(user.id, 0)]);\n          }\n          return disableUserPromise;\n        });\n        await Promise.all(disablePromises);\n        this.fetchUsers(); // 重新获取用户列表\n        this.selectedUsers = [];\n        this.$message.success('批量禁用成功');\n      } catch (error) {\n        console.error('批量禁用用户失败:', error);\n        this.$message.error('批量禁用用户失败');\n      }\n    },\n    // 清空选择\n    clearSelection() {\n      this.$refs.userTable && this.$refs.userTable.clearSelection();\n      this.selectedUsers = [];\n    },\n    // 分页大小变化\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    // 当前页码变化\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    // 多选变化\n    handleSelectionChange(selection) {\n      this.selectedUsers = selection;\n    }\n  }\n};","map":{"version":3,"names":["patientAPI","doctorAPI","request","name","data","users","filteredUsers","loading","searchKeyword","selectedRole","selectedStatus","currentPage","pageSize","selectedUsers","userAPI","getAllUsers","url","method","addUser","userData","updateUser","userId","deleteUser","updateUserStatus","status","resetPassword","addUserDialogVisible","addUserForm","username","realName","phone","email","role","password","addUserRules","required","message","trigger","min","max","pattern","type","editUserDialogVisible","editUserForm","id","editUserRules","mounted","fetchUsers","computed","paginatedUsers","start","end","slice","methods","response","length","map","user","fetchUsersFromModules","error","console","log","$message","patientsRes","doctorsRes","Promise","all","getAllPatients","getAllDoctors","patients","p","undefined","createTime","Date","toISOString","doctors","d","adminUser","handleSearch","results","keyword","toLowerCase","filter","includes","parseInt","getRoleName","roleMap","getRoleType","typeMap","formatDate","dateString","date","getFullYear","getMonth","toString","padStart","getDate","getHours","getMinutes","getSeconds","showAddUserDialog","resetAddUserForm","$refs","resetFields","submitAddUser","validate","valid","addPatient","addDoctor","success","showEditUserDialog","submitEditUser","updatePatient","updateDoctor","updatePatientStatus","updateDoctorStatus","$confirm","confirmButtonText","cancelButtonText","then","deletePatient","deleteDoctor","catch","batchDeleteUsers","some","warning","userNames","u","join","deletePromises","deleteUserPromise","batchEnableUsers","enablePromises","enableUserPromise","batchDisableUsers","disablePromises","disableUserPromise","clearSelection","userTable","handleSizeChange","val","handleCurrentChange","handleSelectionChange","selection"],"sources":["src/views/admin/UserManagement.vue"],"sourcesContent":["<template>\n  <div class=\"user-management\">\n    <div class=\"management-header\">\n      <h2>用户管理</h2>\n      <el-button type=\"primary\" @click=\"showAddUserDialog\">\n        <i class=\"el-icon-plus\"></i> 添加用户\n      </el-button>\n    </div>\n\n    <!-- 搜索和筛选 -->\n    <div class=\"search-filter\">\n      <el-input\n        v-model=\"searchKeyword\"\n        placeholder=\"搜索用户名、姓名或手机号\"\n        prefix-icon=\"el-icon-search\"\n        clearable\n        @input=\"handleSearch\"\n        style=\"width: 300px; margin-right: 15px;\"\n      ></el-input>\n      \n      <el-select\n        v-model=\"selectedRole\"\n        placeholder=\"选择用户角色\"\n        clearable\n        @change=\"handleSearch\"\n        style=\"width: 150px; margin-right: 15px;\"\n      >\n        <el-option label=\"患者\" value=\"PATIENT\"></el-option>\n        <el-option label=\"医生\" value=\"DOCTOR\"></el-option>\n        <el-option label=\"管理员\" value=\"ADMIN\"></el-option>\n      </el-select>\n      \n      <el-select\n        v-model=\"selectedStatus\"\n        placeholder=\"选择用户状态\"\n        clearable\n        @change=\"handleSearch\"\n        style=\"width: 150px;\"\n      >\n        <el-option label=\"启用\" :value=\"1\"></el-option>\n        <el-option label=\"禁用\" :value=\"0\"></el-option>\n      </el-select>\n    </div>\n\n    <!-- 用户列表 -->\n    <div class=\"user-list\">\n      <el-table\n        :data=\"filteredUsers\"\n        style=\"width: 100%\"\n        stripe\n        border\n        v-loading=\"loading\"\n        element-loading-text=\"加载中...\"\n        ref=\"userTable\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"id\" label=\"用户ID\" width=\"80\"></el-table-column>\n        <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n        <el-table-column prop=\"realName\" label=\"真实姓名\"></el-table-column>\n        <el-table-column prop=\"phone\" label=\"手机号\"></el-table-column>\n        <el-table-column prop=\"email\" label=\"邮箱\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"role\" label=\"角色\">\n          <template slot-scope=\"scope\">\n            <el-tag :type=\"getRoleType(scope.row.role)\">\n              {{ getRoleName(scope.row.role) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"status\" label=\"状态\">\n          <template slot-scope=\"scope\">\n            <el-switch\n              v-model=\"scope.row.status\"\n              active-color=\"#67c23a\"\n              inactive-color=\"#909399\"\n              @change=\"updateUserStatus(scope.row)\"\n            ></el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.createTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" size=\"small\" @click=\"showEditUserDialog(scope.row)\">\n              编辑\n            </el-button>\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"deleteUser(scope.row)\"\n              v-if=\"scope.row.role !== 'ADMIN'\"\n              style=\"color: #f56c6c;\"\n            >\n              删除\n            </el-button>\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"resetPassword(scope.row)\"\n              v-if=\"scope.row.role !== 'ADMIN'\"\n            >\n              重置密码\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <div class=\"pagination\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next, jumper, sizes, total\"\n          :total=\"filteredUsers.length\"\n          :page-size.sync=\"pageSize\"\n          :current-page.sync=\"currentPage\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        ></el-pagination>\n      </div>\n    </div>\n\n    <!-- 添加用户对话框 -->\n    <el-dialog\n      title=\"添加用户\"\n      :visible.sync=\"addUserDialogVisible\"\n      width=\"500px\"\n      @close=\"resetAddUserForm\"\n    >\n      <el-form\n        :model=\"addUserForm\"\n        :rules=\"addUserRules\"\n        ref=\"addUserForm\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"addUserForm.username\" placeholder=\"请输入用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"真实姓名\" prop=\"realName\">\n          <el-input v-model=\"addUserForm.realName\" placeholder=\"请输入真实姓名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\" prop=\"phone\">\n          <el-input v-model=\"addUserForm.phone\" placeholder=\"请输入手机号\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"addUserForm.email\" placeholder=\"请输入邮箱\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户角色\" prop=\"role\">\n          <el-select v-model=\"addUserForm.role\" placeholder=\"请选择用户角色\">\n            <el-option label=\"患者\" value=\"PATIENT\"></el-option>\n            <el-option label=\"医生\" value=\"DOCTOR\"></el-option>\n            <el-option label=\"管理员\" value=\"ADMIN\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"初始密码\" prop=\"password\">\n          <el-input\n            v-model=\"addUserForm.password\"\n            type=\"password\"\n            placeholder=\"请输入初始密码\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addUserDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitAddUser\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 编辑用户对话框 -->\n    <el-dialog\n      title=\"编辑用户\"\n      :visible.sync=\"editUserDialogVisible\"\n      width=\"500px\"\n    >\n      <el-form\n        :model=\"editUserForm\"\n        :rules=\"editUserRules\"\n        ref=\"editUserForm\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"editUserForm.username\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"真实姓名\" prop=\"realName\">\n          <el-input v-model=\"editUserForm.realName\" placeholder=\"请输入真实姓名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\" prop=\"phone\">\n          <el-input v-model=\"editUserForm.phone\" placeholder=\"请输入手机号\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"editUserForm.email\" placeholder=\"请输入邮箱\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户角色\" prop=\"role\" v-if=\"editUserForm.role !== 'ADMIN'\">\n          <el-select v-model=\"editUserForm.role\" placeholder=\"请选择用户角色\">\n            <el-option label=\"患者\" value=\"PATIENT\"></el-option>\n            <el-option label=\"医生\" value=\"DOCTOR\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"用户角色\" v-else>\n          <el-input :value=\"getRoleName(editUserForm.role)\" disabled></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editUserDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitEditUser\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 批量操作 -->\n    <div class=\"batch-operations\" v-if=\"selectedUsers.length > 0\">\n      <el-tag>\n        已选择 {{ selectedUsers.length }} 项\n      </el-tag>\n      <el-button\n        type=\"danger\"\n        size=\"small\"\n        @click=\"batchDeleteUsers\"\n        :disabled=\"selectedUsers.some(user => user.role === 'ADMIN')\"\n      >\n        批量删除\n      </el-button>\n      <el-button\n        type=\"warning\"\n        size=\"small\"\n        @click=\"batchEnableUsers\"\n      >\n        批量启用\n      </el-button>\n      <el-button\n        type=\"warning\"\n        size=\"small\"\n        @click=\"batchDisableUsers\"\n      >\n        批量禁用\n      </el-button>\n      <el-button size=\"small\" @click=\"clearSelection\">清空选择</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport patientAPI from '@/api/patient'\nimport doctorAPI from '@/api/doctor'\nimport request from '@/api/request'\n\nexport default {\n  name: 'UserManagement',\n  data() {\n    return {\n      // 用户列表数据\n      users: [],\n      filteredUsers: [],\n      loading: false,\n      \n      // 搜索和筛选条件\n      searchKeyword: '',\n      selectedRole: '',\n      selectedStatus: '',\n      \n      // 分页信息\n      currentPage: 1,\n      pageSize: 10,\n      \n      // 选中的用户\n      selectedUsers: [],\n      // 用户管理专用API\n      userAPI: {\n        // 获取所有用户（管理员视角）\n        getAllUsers: () => {\n          return request({\n            url: '/users',\n            method: 'get'\n          })\n        },\n        // 添加用户\n        addUser: (userData) => {\n          return request({\n            url: '/users',\n            method: 'post',\n            data: userData\n          })\n        },\n        // 更新用户\n        updateUser: (userId, userData) => {\n          return request({\n            url: `/users/${userId}`,\n            method: 'put',\n            data: userData\n          })\n        },\n        // 删除用户\n        deleteUser: (userId) => {\n          return request({\n            url: `/users/${userId}`,\n            method: 'delete'\n          })\n        },\n        // 更新用户状态\n        updateUserStatus: (userId, status) => {\n          return request({\n            url: `/users/${userId}/status`,\n            method: 'put',\n            data: { status: status }\n          })\n        },\n        // 重置密码\n        resetPassword: (userId) => {\n          return request({\n            url: `/users/${userId}/reset-password`,\n            method: 'put'\n          })\n        }\n      },\n      \n      // 添加用户对话框\n      addUserDialogVisible: false,\n      addUserForm: {\n        username: '',\n        realName: '',\n        phone: '',\n        email: '',\n        role: 'PATIENT',\n        password: ''\n      },\n      addUserRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        realName: [\n          { required: true, message: '请输入真实姓名', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入手机号', trigger: 'blur' },\n          { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号格式', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\n          { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n        ],\n        role: [\n          { required: true, message: '请选择用户角色', trigger: 'change' }\n        ],\n        password: [\n          { required: true, message: '请输入初始密码', trigger: 'blur' },\n          { min: 6, message: '密码长度不能少于 6 个字符', trigger: 'blur' }\n        ]\n      },\n      \n      // 编辑用户对话框\n      editUserDialogVisible: false,\n      editUserForm: {\n        id: '',\n        username: '',\n        realName: '',\n        phone: '',\n        email: '',\n        role: ''\n      },\n      editUserRules: {\n        realName: [\n          { required: true, message: '请输入真实姓名', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入手机号', trigger: 'blur' },\n          { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号格式', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\n          { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n        ],\n        role: [\n          { required: true, message: '请选择用户角色', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  mounted() {\n    this.fetchUsers()\n  },\n  computed: {\n    // 分页后的用户列表\n    paginatedUsers() {\n      const start = (this.currentPage - 1) * this.pageSize\n      const end = start + this.pageSize\n      return this.filteredUsers.slice(start, end)\n    }\n  },\n  methods: {\n    // 获取用户列表\n    async fetchUsers() {\n      this.loading = true\n      try {\n        // 尝试获取所有用户（管理员视角）\n        try {\n          const response = await this.userAPI.getAllUsers()\n          if (response.data && response.data.length > 0) {\n            this.users = response.data.map(user => ({\n              ...user,\n              role: user.role || 'UNKNOWN'\n            }))\n          } else {\n            // 如果没有统一的用户API，尝试从不同模块获取\n            await this.fetchUsersFromModules()\n          }\n        } catch (error) {\n          console.log('统一用户API不可用，尝试从不同模块获取数据')\n          await this.fetchUsersFromModules()\n        }\n        \n        this.filteredUsers = [...this.users]\n      } catch (error) {\n        console.error('获取用户列表失败:', error)\n        this.$message.error('获取用户列表失败')\n        // 失败时使用空列表\n        this.users = []\n        this.filteredUsers = []\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    // 从不同模块获取用户数据\n    async fetchUsersFromModules() {\n      try {\n        // 并行获取患者和医生数据\n        const [patientsRes, doctorsRes] = await Promise.all([\n          patientAPI.getAllPatients(),\n          doctorAPI.getAllDoctors()\n        ])\n        \n        // 处理患者数据\n        const patients = patientsRes.data ? patientsRes.data.map(p => ({\n          id: p.id,\n          username: p.username || `patient${p.id}`,\n          realName: p.realName || p.name,\n          phone: p.phone || '',\n          email: p.email || '',\n          role: 'PATIENT',\n          status: p.status !== undefined ? p.status : 1,\n          createTime: p.createTime || new Date().toISOString()\n        })) : []\n        \n        // 处理医生数据\n        const doctors = doctorsRes.data ? doctorsRes.data.map(d => ({\n          id: d.id,\n          username: d.username || `doctor${d.id}`,\n          realName: d.realName || d.name,\n          phone: d.phone || '',\n          email: d.email || '',\n          role: 'DOCTOR',\n          status: d.status !== undefined ? d.status : 1,\n          createTime: d.createTime || new Date().toISOString()\n        })) : []\n        \n        // 添加管理员账户（模拟）\n        const adminUser = {\n          id: 1,\n          username: 'admin',\n          realName: '管理员',\n          phone: '13800138000',\n          email: 'admin@hospital.com',\n          role: 'ADMIN',\n          status: 1,\n          createTime: '2023-01-01 00:00:00'\n        }\n        \n        // 合并所有用户数据\n        this.users = [adminUser, ...patients, ...doctors]\n      } catch (error) {\n        console.error('从模块获取用户数据失败:', error)\n        throw error\n      }\n    },\n\n    // 搜索用户\n    handleSearch() {\n      let results = [...this.users]\n      \n      // 根据关键词搜索\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase()\n        results = results.filter(user => \n          user.username.toLowerCase().includes(keyword) ||\n          user.realName.toLowerCase().includes(keyword) ||\n          user.phone.includes(keyword)\n        )\n      }\n      \n      // 根据角色筛选\n      if (this.selectedRole) {\n        results = results.filter(user => user.role === this.selectedRole)\n      }\n      \n      // 根据状态筛选\n      if (this.selectedStatus !== '') {\n        results = results.filter(user => user.status === parseInt(this.selectedStatus))\n      }\n      \n      this.filteredUsers = results\n      this.currentPage = 1 // 重置到第一页\n    },\n\n    // 获取角色名称\n    getRoleName(role) {\n      const roleMap = {\n        'PATIENT': '患者',\n        'DOCTOR': '医生',\n        'ADMIN': '管理员'\n      }\n      return roleMap[role] || role\n    },\n\n    // 获取角色标签类型\n    getRoleType(role) {\n      const typeMap = {\n        'PATIENT': 'primary',\n        'DOCTOR': 'success',\n        'ADMIN': 'danger'\n      }\n      return typeMap[role] || 'info'\n    },\n\n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`\n    },\n\n    // 显示添加用户对话框\n    showAddUserDialog() {\n      this.resetAddUserForm()\n      this.addUserDialogVisible = true\n    },\n\n    // 重置添加用户表单\n    resetAddUserForm() {\n      this.addUserForm = {\n        username: '',\n        realName: '',\n        phone: '',\n        email: '',\n        role: 'PATIENT',\n        password: ''\n      }\n      this.$refs.addUserForm && this.$refs.addUserForm.resetFields()\n    },\n\n    // 提交添加用户\n    submitAddUser() {\n      this.$refs.addUserForm.validate(async (valid) => {\n        if (valid) {\n          try {\n            const response = await this.userAPI.addUser(this.addUserForm)\n            \n            // 根据用户角色，可能需要向对应的模块添加记录\n            if (this.addUserForm.role === 'PATIENT' && patientAPI.addPatient) {\n              await patientAPI.addPatient({\n                ...this.addUserForm,\n                id: response.data.id\n              })\n            } else if (this.addUserForm.role === 'DOCTOR' && doctorAPI.addDoctor) {\n              await doctorAPI.addDoctor({\n                ...this.addUserForm,\n                id: response.data.id\n              })\n            }\n            \n            this.$message.success('用户添加成功')\n            this.fetchUsers() // 重新获取用户列表\n            this.addUserDialogVisible = false\n            this.resetAddUserForm()\n          } catch (error) {\n            console.error('添加用户失败:', error)\n            this.$message.error('添加用户失败')\n          }\n        }\n      })\n    },\n\n    // 显示编辑用户对话框\n    showEditUserDialog(user) {\n      this.editUserForm = { ...user }\n      this.editUserDialogVisible = true\n    },\n\n    // 提交编辑用户\n    submitEditUser() {\n      this.$refs.editUserForm.validate(async (valid) => {\n        if (valid) {\n          try {\n            await this.userAPI.updateUser(this.editUserForm.id, this.editUserForm)\n            \n            // 根据用户角色，可能需要更新对应的模块记录\n            if (this.editUserForm.role === 'PATIENT' && patientAPI.updatePatient) {\n              await patientAPI.updatePatient(this.editUserForm.id, this.editUserForm)\n            } else if (this.editUserForm.role === 'DOCTOR' && doctorAPI.updateDoctor) {\n              await doctorAPI.updateDoctor(this.editUserForm.id, this.editUserForm)\n            }\n            \n            this.$message.success('用户更新成功')\n            this.fetchUsers() // 重新获取用户列表\n            this.editUserDialogVisible = false\n          } catch (error) {\n            console.error('更新用户失败:', error)\n            this.$message.error('更新用户失败')\n          }\n        }\n      })\n    },\n\n    // 更新用户状态\n    async updateUserStatus(user) {\n      try {\n        await this.userAPI.updateUserStatus(user.id, user.status)\n        \n        // 根据用户角色，可能需要更新对应的模块记录\n        if (user.role === 'PATIENT' && patientAPI.updatePatientStatus) {\n          await patientAPI.updatePatientStatus(user.id, user.status)\n        } else if (user.role === 'DOCTOR' && doctorAPI.updateDoctorStatus) {\n          await doctorAPI.updateDoctorStatus(user.id, user.status)\n        }\n        \n        this.$message.success(`用户状态已更新为${user.status ? '启用' : '禁用'}`)\n        this.fetchUsers() // 重新获取用户列表以确保数据一致\n      } catch (error) {\n        console.error('更新用户状态失败:', error)\n        this.$message.error('更新用户状态失败')\n        // 恢复原状态\n        user.status = user.status === 1 ? 0 : 1\n      }\n    },\n\n    // 删除用户\n    deleteUser(user) {\n      this.$confirm(`确定要删除用户「${user.realName}」吗？`, '删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await this.userAPI.deleteUser(user.id)\n          \n          // 根据用户角色，可能需要删除对应的模块记录\n          if (user.role === 'PATIENT' && patientAPI.deletePatient) {\n            await patientAPI.deletePatient(user.id)\n          } else if (user.role === 'DOCTOR' && doctorAPI.deleteDoctor) {\n            await doctorAPI.deleteDoctor(user.id)\n          }\n          \n          this.fetchUsers() // 重新获取用户列表\n          this.$message.success('用户删除成功')\n        } catch (error) {\n          console.error('删除用户失败:', error)\n          this.$message.error('删除用户失败')\n        }\n      }).catch(() => {\n        // 取消删除\n      })\n    },\n\n    // 重置密码\n    resetPassword(user) {\n      this.$confirm(`确定要重置用户「${user.realName}」的密码吗？`, '重置确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await this.userAPI.resetPassword(user.id)\n          this.$message.success(`用户「${user.realName}」的密码已重置为：123456`)\n        } catch (error) {\n          console.error('重置密码失败:', error)\n          this.$message.error('重置密码失败')\n        }\n      }).catch(() => {\n        // 取消重置\n      })\n    },\n\n    // 批量删除用户\n    batchDeleteUsers() {\n      if (this.selectedUsers.some(user => user.role === 'ADMIN')) {\n        this.$message.warning('不能删除管理员用户')\n        return\n      }\n\n      const userNames = this.selectedUsers.map(u => u.realName).join('、')\n      this.$confirm(`确定要删除以下用户吗？\\n${userNames}`, '批量删除确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          // 并行删除所有选中的用户\n          const deletePromises = this.selectedUsers.map(user => {\n            const deleteUserPromise = this.userAPI.deleteUser(user.id)\n            \n            // 根据用户角色，可能需要删除对应的模块记录\n            if (user.role === 'PATIENT' && patientAPI.deletePatient) {\n              return Promise.all([deleteUserPromise, patientAPI.deletePatient(user.id)])\n            } else if (user.role === 'DOCTOR' && doctorAPI.deleteDoctor) {\n              return Promise.all([deleteUserPromise, doctorAPI.deleteDoctor(user.id)])\n            }\n            \n            return deleteUserPromise\n          })\n          \n          await Promise.all(deletePromises)\n          \n          this.fetchUsers() // 重新获取用户列表\n          this.selectedUsers = []\n          this.$message.success('批量删除成功')\n        } catch (error) {\n          console.error('批量删除用户失败:', error)\n          this.$message.error('批量删除用户失败')\n        }\n      }).catch(() => {\n        // 取消删除\n      })\n    },\n\n    // 批量启用用户\n    async batchEnableUsers() {\n      try {\n        // 并行启用所有选中的用户\n        const enablePromises = this.selectedUsers.map(user => {\n          const enableUserPromise = this.userAPI.updateUserStatus(user.id, 1)\n          \n          // 根据用户角色，可能需要更新对应的模块记录\n          if (user.role === 'PATIENT' && patientAPI.updatePatientStatus) {\n            return Promise.all([enableUserPromise, patientAPI.updatePatientStatus(user.id, 1)])\n          } else if (user.role === 'DOCTOR' && doctorAPI.updateDoctorStatus) {\n            return Promise.all([enableUserPromise, doctorAPI.updateDoctorStatus(user.id, 1)])\n          }\n          \n          return enableUserPromise\n        })\n        \n        await Promise.all(enablePromises)\n        \n        this.fetchUsers() // 重新获取用户列表\n        this.selectedUsers = []\n        this.$message.success('批量启用成功')\n      } catch (error) {\n        console.error('批量启用用户失败:', error)\n        this.$message.error('批量启用用户失败')\n      }\n    },\n\n    // 批量禁用用户\n    async batchDisableUsers() {\n      if (this.selectedUsers.some(user => user.role === 'ADMIN')) {\n        this.$message.warning('不能禁用管理员用户')\n        return\n      }\n\n      try {\n        // 并行禁用所有选中的用户\n        const disablePromises = this.selectedUsers.map(user => {\n          const disableUserPromise = this.userAPI.updateUserStatus(user.id, 0)\n          \n          // 根据用户角色，可能需要更新对应的模块记录\n          if (user.role === 'PATIENT' && patientAPI.updatePatientStatus) {\n            return Promise.all([disableUserPromise, patientAPI.updatePatientStatus(user.id, 0)])\n          } else if (user.role === 'DOCTOR' && doctorAPI.updateDoctorStatus) {\n            return Promise.all([disableUserPromise, doctorAPI.updateDoctorStatus(user.id, 0)])\n          }\n          \n          return disableUserPromise\n        })\n        \n        await Promise.all(disablePromises)\n        \n        this.fetchUsers() // 重新获取用户列表\n        this.selectedUsers = []\n        this.$message.success('批量禁用成功')\n      } catch (error) {\n        console.error('批量禁用用户失败:', error)\n        this.$message.error('批量禁用用户失败')\n      }\n    },\n\n    // 清空选择\n    clearSelection() {\n      this.$refs.userTable && this.$refs.userTable.clearSelection()\n      this.selectedUsers = []\n    },\n\n    // 分页大小变化\n    handleSizeChange(val) {\n      this.pageSize = val\n    },\n\n    // 当前页码变化\n    handleCurrentChange(val) {\n      this.currentPage = val\n    },\n\n    // 多选变化\n    handleSelectionChange(selection) {\n      this.selectedUsers = selection\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-management {\n  padding: 20px;\n  background-color: #f5f7fa;\n  min-height: calc(100vh - 60px);\n}\n\n.management-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.management-header h2 {\n  margin: 0;\n  color: #303133;\n}\n\n.search-filter {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.user-list {\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  padding: 15px;\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.batch-operations {\n  margin-top: 15px;\n  padding: 10px 15px;\n  background-color: #ecf5ff;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.batch-operations .el-tag {\n  background-color: #409eff;\n  color: #fff;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .search-filter {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 10px;\n  }\n  \n  .search-filter .el-input,\n  .search-filter .el-select {\n    width: 100% !important;\n    margin-right: 0 !important;\n  }\n  \n  .management-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .pagination {\n    justify-content: center;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}