{"ast":null,"code":"import axios from 'axios';\n\n// 创建axios实例\nconst service = axios.create({\n  baseURL: 'http://localhost:8083',\n  // 后端API基础路径\n  timeout: 15000 // 请求超时时间\n});\n\n// 请求拦截器\nservice.interceptors.request.use(config => {\n  // 从localStorage获取token\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  console.error('请求错误:', error);\n  return Promise.reject(error);\n});\n\n// 响应拦截器\nservice.interceptors.response.use(response => {\n  const res = response.data;\n  // 假设后端返回的状态码为200表示成功\n  if (res.code !== 200) {\n    // 处理错误情况\n    console.error('错误:', res.msg || '请求失败');\n    return Promise.reject(new Error(res.msg || '请求失败'));\n  }\n  return res;\n}, error => {\n  console.error('响应错误:', error);\n  return Promise.reject(error);\n});\nexport default service;","map":{"version":3,"names":["axios","service","create","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","error","console","Promise","reject","response","res","data","code","msg","Error"],"sources":["C:/Users/徐凌/Documents/trae_projects/hospital/frontend/src/api/request.js"],"sourcesContent":["import axios from 'axios';\n\n// 创建axios实例\nconst service = axios.create({\n  baseURL: 'http://localhost:8083', // 后端API基础路径\n  timeout: 15000 // 请求超时时间\n});\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    // 从localStorage获取token\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => {\n    console.error('请求错误:', error);\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\nservice.interceptors.response.use(\n  response => {\n    const res = response.data;\n    // 假设后端返回的状态码为200表示成功\n    if (res.code !== 200) {\n      // 处理错误情况\n      console.error('错误:', res.msg || '请求失败');\n      return Promise.reject(new Error(res.msg || '请求失败'));\n    }\n    return res;\n  },\n  error => {\n    console.error('响应错误:', error);\n    return Promise.reject(error);\n  }\n);\n\nexport default service;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,OAAO,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC3BC,OAAO,EAAE,uBAAuB;EAAE;EAClCC,OAAO,EAAE,KAAK,CAAC;AACjB,CAAC,CAAC;;AAEF;AACAH,OAAO,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAI;EACR;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;EACrD;EACA,OAAOD,MAAM;AACf,CAAC,EACDK,KAAK,IAAI;EACPC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;EAC7B,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAZ,OAAO,CAACI,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC/BU,QAAQ,IAAI;EACV,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAAI;EACzB;EACA,IAAID,GAAG,CAACE,IAAI,KAAK,GAAG,EAAE;IACpB;IACAN,OAAO,CAACD,KAAK,CAAC,KAAK,EAAEK,GAAG,CAACG,GAAG,IAAI,MAAM,CAAC;IACvC,OAAON,OAAO,CAACC,MAAM,CAAC,IAAIM,KAAK,CAACJ,GAAG,CAACG,GAAG,IAAI,MAAM,CAAC,CAAC;EACrD;EACA,OAAOH,GAAG;AACZ,CAAC,EACDL,KAAK,IAAI;EACPC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;EAC7B,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeZ,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}