(()=>{"use strict";var e={3252:(e,t,a)=>{var s=a(6848),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[];const o={name:"App"},l=o;var n=a(1656),c=(0,n.A)(l,r,i,!1,null,null,null);const d=c.exports;var m=a(6178),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form"},[t("h2",[e._v("医院预约系统登录")]),t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-user"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",{attrs:{label:"用户类型"}},[t("el-radio-group",{model:{value:e.loginForm.userType,callback:function(t){e.$set(e.loginForm,"userType",t)},expression:"loginForm.userType"}},[t("el-radio",{attrs:{label:"patient"}},[e._v("患者")]),t("el-radio",{attrs:{label:"doctor"}},[e._v("医生")]),t("el-radio",{attrs:{label:"admin"}},[e._v("管理员")])],1)],1),t("el-form-item",[t("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")]),t("el-button",{staticClass:"register-btn",on:{click:e.goToRegister}},[e._v("注册")])],1)],1)],1)])},u=[];const h={name:"Login",data(){return{loginForm:{username:"",password:"",userType:"patient"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]}}},methods:{handleLogin(){this.$refs.loginForm.validate(e=>{e&&this.$axios.post("/user/login",{username:this.loginForm.username,password:this.loginForm.password,userType:this.loginForm.userType}).then(e=>{if(200===e.code){localStorage.setItem("token",e.data.token);const t={username:e.data.username,realName:e.data.realName,role:e.data.roleCode.replace("ROLE_","")};localStorage.setItem("user",JSON.stringify(t)),"ROLE_ADMIN"===e.data.roleCode?this.$router.push("/admin/dashboard"):this.$router.push("/home"),this.$message.success("登录成功")}else this.$message.error(e.message||"登录失败")}).catch(e=>{this.$message.error("登录失败，请稍后重试"),console.error("登录失败:",e)})})},goToRegister(){this.$router.push("/register")}}},g=h;var v=(0,n.A)(g,p,u,!1,null,"540e7299",null);const b=v.exports;var f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register-container"},[t("div",{staticClass:"register-form"},[t("h2",[e._v("医院预约系统注册")]),t("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户类型"}},[t("el-radio-group",{on:{change:e.handleUserTypeChange},model:{value:e.registerForm.userType,callback:function(t){e.$set(e.registerForm,"userType",t)},expression:"registerForm.userType"}},[t("el-radio",{attrs:{label:"patient"}},[e._v("患者")]),t("el-radio",{attrs:{label:"doctor"}},[e._v("医生")])],1)],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-user"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.registerForm.confirmPassword,callback:function(t){e.$set(e.registerForm,"confirmPassword",t)},expression:"registerForm.confirmPassword"}})],1),t("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.registerForm.realName,callback:function(t){e.$set(e.registerForm,"realName",t)},expression:"registerForm.realName"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.registerForm.phone,callback:function(t){e.$set(e.registerForm,"phone",t)},expression:"registerForm.phone"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.registerForm.gender,callback:function(t){e.$set(e.registerForm,"gender",t)},expression:"registerForm.gender"}},[t("el-radio",{attrs:{label:"male"}},[e._v("男")]),t("el-radio",{attrs:{label:"female"}},[e._v("女")])],1)],1),"doctor"===e.registerForm.userType?t("div",[t("el-form-item",{attrs:{label:"科室",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择科室"},model:{value:e.registerForm.departmentId,callback:function(t){e.$set(e.registerForm,"departmentId",t)},expression:"registerForm.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"职称",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入职称"},model:{value:e.registerForm.title,callback:function(t){e.$set(e.registerForm,"title",t)},expression:"registerForm.title"}})],1),t("el-form-item",{attrs:{label:"专长",prop:"specialty"}},[t("el-input",{attrs:{placeholder:"请输入专长"},model:{value:e.registerForm.specialty,callback:function(t){e.$set(e.registerForm,"specialty",t)},expression:"registerForm.specialty"}})],1)],1):e._e(),t("el-form-item",[t("el-button",{staticClass:"register-btn",attrs:{type:"primary"},on:{click:e.handleRegister}},[e._v("注册")]),t("el-button",{staticClass:"login-btn",on:{click:e.goToLogin}},[e._v("已有账号，去登录")])],1)],1)],1)])},D=[];const _={name:"Register",data(){return{registerForm:{username:"",password:"",confirmPassword:"",realName:"",phone:"",gender:"male",userType:"patient",departmentId:"",title:"",specialty:""},departments:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:20,message:"用户名长度应在4-20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],departmentId:[{required:()=>"doctor"===this.registerForm.userType,message:"请选择科室",trigger:"blur"}],title:[{required:()=>"doctor"===this.registerForm.userType,message:"请输入职称",trigger:"blur"}],specialty:[{required:()=>"doctor"===this.registerForm.userType,message:"请输入专长",trigger:"blur"}]}}},created(){this.loadDepartments()},methods:{loadDepartments(){this.$axios.get("/api/department/list").then(e=>{200===e.code&&(this.departments=e.data)})},handleUserTypeChange(){this.$nextTick(()=>{this.$refs.registerForm.clearValidate()})},validateConfirmPassword(e,t,a){t!==this.registerForm.password?a(new Error("两次输入的密码不一致")):a()},handleRegister(){this.$refs.registerForm.validate(e=>{if(e){const e="doctor"===this.registerForm.userType?"/api/user/register-doctor":"/api/user/register",t={username:this.registerForm.username,password:this.registerForm.password,realName:this.registerForm.realName,phone:this.registerForm.phone,gender:this.registerForm.gender};"doctor"===this.registerForm.userType&&(t.deptId=this.registerForm.departmentId,t.title=this.registerForm.title,t.specialty=this.registerForm.specialty),this.$axios.post(e,t).then(e=>{200===e.code?(this.$message.success("注册成功，请登录"),this.$router.push("/login")):this.$message.error(e.message||"注册失败")}).catch(e=>{console.error("注册失败:",e),this.$message.error("注册失败，请稍后重试")})}})},goToLogin(){this.$router.push("/login")}}},C=_;var y=(0,n.A)(C,f,D,!1,null,"49a904e3",null);const w=y.exports;var F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-container"},[t("header",{staticClass:"home-header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item active",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/appointment-list"}},[e._v("预约记录")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("main",{staticClass:"home-main"},[t("el-carousel",{attrs:{height:"400px","indicator-position":"outside"}},e._l(e.carouselItems,function(a){return t("el-carousel-item",{key:a.id},[t("div",{staticClass:"carousel-item"},[t("h3",{staticClass:"carousel-title"},[e._v(e._s(a.title))]),t("p",{staticClass:"carousel-desc"},[e._v(e._s(a.description))])])])}),1),t("section",{staticClass:"quick-services"},[t("h2",{staticClass:"section-title"},[e._v("快捷服务")]),t("div",{staticClass:"service-grid"},[e.user&&"ADMIN"!==e.user.role?t("router-link",{staticClass:"service-card",attrs:{to:"/appointment"}},[t("div",{staticClass:"service-icon"},[t("i",{staticClass:"el-icon-date"})]),t("h3",{staticClass:"service-title"},[e._v("在线预约")]),t("p",{staticClass:"service-desc"},[e._v("快速预约医生，无需排队等候")])]):e._e(),e.user&&"ADMIN"!==e.user.role?t("router-link",{staticClass:"service-card",attrs:{to:"/appointment-list"}},[t("div",{staticClass:"service-icon"},[t("i",{staticClass:"el-icon-document"})]),t("h3",{staticClass:"service-title"},[e._v("预约记录")]),t("p",{staticClass:"service-desc"},[e._v("查看和管理您的预约信息")])]):e._e(),t("router-link",{staticClass:"service-card",attrs:{to:"/departments"}},[t("div",{staticClass:"service-icon"},[t("i",{staticClass:"el-icon-office-building"})]),t("h3",{staticClass:"service-title"},[e._v("科室查询")]),t("p",{staticClass:"service-desc"},[e._v("了解医院各科室信息和专长")])]),t("router-link",{staticClass:"service-card",attrs:{to:"/doctors"}},[t("div",{staticClass:"service-icon"},[t("i",{staticClass:"el-icon-user-solid"})]),t("h3",{staticClass:"service-title"},[e._v("医生查询")]),t("p",{staticClass:"service-desc"},[e._v("查找专业医生，了解医生详情")])]),t("router-link",{staticClass:"service-card",attrs:{to:"/medical-guide"}},[t("div",{staticClass:"service-icon"},[t("i",{staticClass:"el-icon-guide"})]),t("h3",{staticClass:"service-title"},[e._v("医疗导诊")]),t("p",{staticClass:"service-desc"},[e._v("智能推荐科室，提供就诊建议")])]),e.user&&"ADMIN"===e.user.role?t("router-link",{staticClass:"service-card",attrs:{to:"/admin/dashboard"}},[t("div",{staticClass:"service-icon"},[t("i",{staticClass:"el-icon-setting"})]),t("h3",{staticClass:"service-title"},[e._v("管理中心")]),t("p",{staticClass:"service-desc"},[e._v("进入系统管理后台")])]):e._e()],1)]),e._m(1)],1),e._m(2)])},x=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("section",{staticClass:"hospital-info"},[t("h2",{staticClass:"section-title"},[e._v("医院介绍")]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"info-text"},[t("p",[e._v("我院是一家集医疗、教学、科研、预防保健为一体的综合性医院，拥有先进的医疗设备和专业的医护团队。")]),t("p",[e._v("医院占地面积广阔，环境优美，科室设置齐全，包括内科、外科、妇产科、儿科、眼科、口腔科等多个临床科室。")]),t("p",[e._v('我们始终坚持"以患者为中心"的服务理念，为患者提供高质量、便捷的医疗服务。')])])])])},function(){var e=this,t=e._self._c;return t("footer",{staticClass:"home-footer"},[t("div",{staticClass:"footer-content"},[t("p",[e._v("© 2024 医院预约系统 版权所有")]),t("p",[e._v("联系方式：电话 0123-4567890 | 地址：医院路88号")])])])}];const S={name:"Home",data(){return{user:null,carouselItems:[{id:1,title:"便捷的在线预约服务",description:"随时随地预约挂号，免去排队等待的烦恼"},{id:2,title:"专业的医疗团队",description:"汇聚各科专家，为您提供优质的医疗服务"},{id:3,title:"先进的医疗设备",description:"配备现代化医疗设备，确保诊断准确可靠"}]}},created(){this.loadUserInfo()},methods:{loadUserInfo(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})}},watch:{$route:{handler(){this.loadUserInfo()},immediate:!0}}},k=S;var $=(0,n.A)(k,F,x,!1,null,"2bd96f94",null);const T=$.exports;var I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-info-wrapper"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("div",{staticClass:"user-info-container"},[t("div",{staticClass:"sidebar"},[t("div",{staticClass:"user-avatar"},[t("el-avatar",{attrs:{size:100,src:e.userAvatar,icon:"el-icon-user-solid"}})],1),t("h3",{staticClass:"user-name"},[e._v(e._s(e.user.name||e.user.username))]),t("p",{staticClass:"user-role"},[e._v(e._s(e.userRoleText))]),t("nav",{staticClass:"sidebar-menu"},[e._m(1),e._m(2),t("router-link",{staticClass:"menu-item",attrs:{to:"/appointment-list"}},[t("i",{staticClass:"el-icon-document"}),t("span",[e._v("预约记录")])])],1)]),t("div",{staticClass:"main-content"},[e._m(3),t("div",{staticClass:"content-body"},[t("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.userForm.gender,callback:function(t){e.$set(e.userForm,"gender",t)},expression:"userForm.gender"}},[t("el-radio",{attrs:{label:"male"}},[e._v("男")]),t("el-radio",{attrs:{label:"female"}},[e._v("女")])],1)],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{type:"email"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),"PATIENT"===e.user.role?t("div",[t("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[t("el-input",{model:{value:e.userForm.idCard,callback:function(t){e.$set(e.userForm,"idCard",t)},expression:"userForm.idCard"}})],1),t("el-form-item",{attrs:{label:"出生日期",prop:"birthDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.userForm.birthDate,callback:function(t){e.$set(e.userForm,"birthDate",t)},expression:"userForm.birthDate"}})],1)],1):e._e(),"DOCTOR"===e.user.role?t("div",[t("el-form-item",{attrs:{label:"科室"}},[t("el-input",{attrs:{disabled:""},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}})],1),t("el-form-item",{attrs:{label:"职称",prop:"title"}},[t("el-input",{model:{value:e.userForm.title,callback:function(t){e.$set(e.userForm,"title",t)},expression:"userForm.title"}})],1),t("el-form-item",{attrs:{label:"专长",prop:"specialty"}},[t("el-input",{model:{value:e.userForm.specialty,callback:function(t){e.$set(e.userForm,"specialty",t)},expression:"userForm.specialty"}})],1),t("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[t("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.userForm.introduction,callback:function(t){e.$set(e.userForm,"introduction",t)},expression:"userForm.introduction"}})],1)],1):e._e(),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleUpdate}},[e._v("保存修改")]),t("el-button",{on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)])])])},N=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-item active"},[t("i",{staticClass:"el-icon-info"}),t("span",[e._v("基本信息")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-item"},[t("i",{staticClass:"el-icon-lock"}),t("span",[e._v("修改密码")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-header"},[t("h2",[e._v("个人信息管理")])])}];const A={name:"UserInfo",data(){return{user:null,userForm:{username:"",name:"",phone:"",gender:"male",email:"",idCard:"",birthDate:"",title:"",specialty:"",introduction:""},userAvatar:"",departmentName:"",loading:!1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],email:[{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"请输入正确的邮箱格式",trigger:"blur"}],idCard:[{pattern:/^\d{17}[\dXx]$/,message:"请输入正确的身份证号格式",trigger:"blur"}],title:[{required:this.user&&"DOCTOR"===this.user.role,message:"请输入职称",trigger:"blur"}],specialty:[{required:this.user&&"DOCTOR"===this.user.role,message:"请输入专长",trigger:"blur"}]}}},computed:{userRoleText(){if(!this.user)return"";switch(this.user.role){case"PATIENT":return"患者";case"DOCTOR":return"医生";case"ADMIN":return"管理员";default:return""}}},created(){this.loadUserInfo()},methods:{handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})},loadUserInfo(){const e=localStorage.getItem("user");e?(this.user=JSON.parse(e),this.$axios.get("/user/info").then(e=>{if(e.success){const t=e.data;this.userForm={username:t.username||"",name:t.name||"",phone:t.phone||"",gender:t.gender||"male",email:t.email||"",idCard:t.idCard||"",birthDate:t.birthDate||"",title:t.title||"",specialty:t.specialty||"",introduction:t.introduction||""},"DOCTOR"===this.user.role&&t.department&&(this.departmentName=t.department.name),this.userAvatar=t.avatar||""}})):this.$router.push("/login")},handleUpdate(){this.$refs.userForm.validate(e=>{e&&(this.loading=!0,this.$axios.put("/user/update",this.userForm).then(e=>{if(e.success){const e={...this.user,...this.userForm};localStorage.setItem("user",JSON.stringify(e)),this.$message.success("信息更新成功")}else this.$message.error(e.message||"更新失败")}).catch(e=>{this.$message.error("更新失败，请稍后重试"),console.error("更新用户信息失败:",e)}).finally(()=>{this.loading=!1}))})},handleCancel(){this.loadUserInfo()}}},U=A;var P=(0,n.A)(U,I,N,!1,null,"7859a3dc",null);const M=P.exports;var R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"department-container"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item active",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("main",{staticClass:"main-content"},[e._m(1),t("div",{staticClass:"search-section"},[t("el-input",{attrs:{placeholder:"请输入科室名称或关键词","prefix-icon":"el-icon-search",size:"large"},scopedSlots:e._u([{key:"append",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1),t("div",{staticClass:"department-list"},e._l(e.filteredDepartments,function(a){return t("el-card",{key:a.id,staticClass:"department-card"},[t("div",{staticClass:"department-header"},[t("h3",{staticClass:"department-name"},[e._v(e._s(a.name))]),t("el-tag",{attrs:{size:"medium",type:"primary"}},[e._v(e._s(a.type))])],1),t("div",{staticClass:"department-content"},[t("p",{staticClass:"department-description"},[e._v(e._s(a.description))]),t("div",{staticClass:"department-info"},[t("div",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-location"}),t("span",[e._v("位置："+e._s(a.location))])]),t("div",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-phone"}),t("span",[e._v("电话："+e._s(a.phone))])]),t("div",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-user-solid"}),t("span",[e._v("医生数量："+e._s(a.doctorCount||0))])])])]),t("div",{staticClass:"department-footer"},[t("router-link",{staticClass:"view-doctors-btn",attrs:{to:{path:"/doctors",query:{departmentId:a.id}}}},[e._v(" 查看医生列表 "),t("i",{staticClass:"el-icon-arrow-right"})]),e.user&&"ADMIN"!==e.user.role?t("router-link",{staticClass:"make-appointment-btn",attrs:{to:{path:"/appointment",query:{departmentId:a.id}}}},[e._v(" 立即预约 ")]):e._e()],1)])}),1),0===e.filteredDepartments.length?t("div",{staticClass:"no-data"},[t("el-empty",{attrs:{description:"暂无科室信息"}})],1):e._e()]),e._m(2)])},z=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h1",[e._v("科室介绍")]),t("p",{staticClass:"page-desc"},[e._v("了解我院各科室的专业领域和医疗特色")])])},function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"footer-content"},[t("p",[e._v("© 2024 医院预约系统 版权所有")])])])}];const E={name:"DepartmentList",data(){return{user:null,departments:[],searchKeyword:"",loading:!1}},computed:{filteredDepartments(){if(!this.searchKeyword.trim())return this.departments;const e=this.searchKeyword.toLowerCase().trim();return this.departments.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.type.toLowerCase().includes(e))}},created(){this.loadUserInfo(),this.loadDepartments()},methods:{loadUserInfo(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},loadDepartments(){this.loading=!0,this.$axios.get("/department/list").then(e=>{e.success&&(this.departments=e.data)}).catch(e=>{console.error("加载科室列表失败:",e),this.$message.error("加载科室列表失败")}).finally(()=>{this.loading=!1})},handleSearch(){},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})}}},q=E;var O=(0,n.A)(q,R,z,!1,null,"73928064",null);const L=O.exports;var V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"doctor-container"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item active",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("main",{staticClass:"main-content"},[e._m(1),t("div",{staticClass:"filter-section"},[t("div",{staticClass:"filter-group"},[t("label",{staticClass:"filter-label"},[e._v("科室筛选：")]),t("el-select",{attrs:{placeholder:"全部科室"},on:{change:e.handleFilterChange},model:{value:e.selectedDepartment,callback:function(t){e.selectedDepartment=t},expression:"selectedDepartment"}},[t("el-option",{attrs:{label:"全部科室",value:""}}),e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),t("div",{staticClass:"filter-group"},[t("label",{staticClass:"filter-label"},[e._v("搜索医生：")]),t("el-input",{attrs:{placeholder:"请输入医生姓名或专长","prefix-icon":"el-icon-search"},on:{input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1)]),t("div",{staticClass:"doctor-list"},e._l(e.filteredDoctors,function(a){return t("el-card",{key:a.id,staticClass:"doctor-card"},[t("div",{staticClass:"doctor-header"},[t("el-avatar",{attrs:{size:100,src:a.avatar,icon:"el-icon-user-solid"}}),t("div",{staticClass:"doctor-basic-info"},[t("h3",{staticClass:"doctor-name"},[e._v(e._s(a.name)),t("el-tag",{staticClass:"doctor-title",attrs:{size:"small"}},[e._v(e._s(a.title))])],1),t("p",{staticClass:"doctor-department"},[e._v(e._s(a.department?.name||"未分配科室"))]),t("p",{staticClass:"doctor-specialty"},[e._v("专长："+e._s(a.specialty))])])],1),t("div",{staticClass:"doctor-content"},[t("p",{staticClass:"doctor-introduction"},[e._v(e._s(a.introduction||"暂无简介"))])]),t("div",{staticClass:"doctor-footer"},[t("div",{staticClass:"doctor-stats"},[t("div",{staticClass:"stat-item"},[t("span",{staticClass:"stat-value"},[e._v(e._s(a.appointmentCount||0))]),t("span",{staticClass:"stat-label"},[e._v("预约量")])]),t("div",{staticClass:"stat-item"},[t("span",{staticClass:"stat-value"},[e._v(e._s(a.consultationTime||"8:00-17:30"))]),t("span",{staticClass:"stat-label"},[e._v("出诊时间")])])]),e.user&&"ADMIN"!==e.user.role?t("router-link",{staticClass:"make-appointment-btn",attrs:{to:{path:"/appointment",query:{doctorId:a.id}}}},[e._v(" 立即预约 ")]):e._e()],1)])}),1),0===e.filteredDoctors.length?t("div",{staticClass:"no-data"},[t("el-empty",{attrs:{description:"暂无医生信息"}})],1):e._e()]),e._m(2)])},B=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h1",[e._v("医生团队")]),t("p",{staticClass:"page-desc"},[e._v("认识我们专业的医疗团队，选择最适合您的医生")])])},function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"footer-content"},[t("p",[e._v("© 2024 医院预约系统 版权所有")])])])}];const j={name:"DoctorList",data(){return{user:null,doctors:[],departments:[],selectedDepartment:"",searchKeyword:"",loading:!1}},computed:{filteredDoctors(){let e=this.doctors;if(this.selectedDepartment&&(e=e.filter(e=>e.departmentId===this.selectedDepartment)),this.searchKeyword.trim()){const t=this.searchKeyword.toLowerCase().trim();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.specialty&&e.specialty.toLowerCase().includes(t)||e.introduction&&e.introduction.toLowerCase().includes(t))}return e}},created(){this.loadUserInfo(),this.loadDepartments(),this.loadDoctors(),this.$route.query.departmentId&&(this.selectedDepartment=this.$route.query.departmentId)},methods:{loadUserInfo(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},loadDepartments(){this.$axios.get("/department/list").then(e=>{e.success&&(this.departments=e.data)})},loadDoctors(){this.loading=!0;const e=this.selectedDepartment?{departmentId:this.selectedDepartment}:{};this.$axios.get("/doctor/list",{params:e}).then(e=>{e.success&&(this.doctors=e.data)}).catch(e=>{console.error("加载医生列表失败:",e),this.$message.error("加载医生列表失败")}).finally(()=>{this.loading=!1})},handleFilterChange(){this.loadDoctors()},handleSearch(){},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})}}},K=j;var G=(0,n.A)(K,V,B,!1,null,"2adfeaff",null);const H=G.exports;var J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"appointment-container"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("main",{staticClass:"main-content"},[e.user?t("div",[e._m(1),t("el-form",{ref:"appointmentFormRef",staticClass:"appointment-form",attrs:{model:e.appointmentForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"选择科室",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择科室"},on:{change:e.handleDepartmentChange},model:{value:e.appointmentForm.departmentId,callback:function(t){e.$set(e.appointmentForm,"departmentId",t)},expression:"appointmentForm.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"选择医生",prop:"doctorId"}},[t("el-select",{attrs:{placeholder:"请先选择科室"},model:{value:e.appointmentForm.doctorId,callback:function(t){e.$set(e.appointmentForm,"doctorId",t)},expression:"appointmentForm.doctorId"}},e._l(e.filteredDoctors,function(e){return t("el-option",{key:e.id,attrs:{label:e.name+" - "+e.title,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"预约日期",prop:"appointmentDate"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"请选择预约日期",format:"yyyy-MM-dd","disabled-date":e.disabledDate},model:{value:e.appointmentForm.appointmentDate,callback:function(t){e.$set(e.appointmentForm,"appointmentDate",t)},expression:"appointmentForm.appointmentDate"}})],1),t("el-form-item",{attrs:{label:"预约时段",prop:"appointmentTime"}},[t("el-select",{attrs:{placeholder:"请选择预约时段"},model:{value:e.appointmentForm.appointmentTime,callback:function(t){e.$set(e.appointmentForm,"appointmentTime",t)},expression:"appointmentForm.appointmentTime"}},e._l(e.availableTimeSlots,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),t("el-form-item",{attrs:{label:"症状描述",prop:"symptoms"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请简要描述您的症状或就诊需求"},model:{value:e.appointmentForm.symptoms,callback:function(t){e.$set(e.appointmentForm,"symptoms",t)},expression:"appointmentForm.symptoms"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e.validatePhone,trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.appointmentForm.contactPhone,callback:function(t){e.$set(e.appointmentForm,"contactPhone",t)},expression:"appointmentForm.contactPhone"}})],1),t("el-form-item",{staticClass:"submit-section"},[t("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.submitForm}},[e._v("提交预约")]),t("el-button",{on:{click:e.resetForm}},[e._v("重置表单")])],1)],1)],1):t("div",[t("el-alert",{attrs:{title:"请先登录",description:"预约功能需要登录后使用，请先登录账号",type:"info","show-icon":"",closable:!1}},[t("router-link",{attrs:{slot:"after-close",to:"/login"},slot:"after-close"},[e._v("立即登录")])],1)],1)])])},W=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h1",[e._v("在线预约")]),t("p",{staticClass:"page-desc"},[e._v("选择合适的医生和时间进行预约")])])}];const Y={name:"Appointment",data(){return{user:null,appointmentForm:{departmentId:"",doctorId:"",appointmentDate:"",appointmentTime:"",symptoms:"",contactPhone:""},departments:[],filteredDoctors:[],availableTimeSlots:["上午","下午"],rules:{},submitting:!1}},created(){this.loadUserInfo(),this.loadDepartments(),this.$route.query.departmentId&&(this.appointmentForm.departmentId=this.$route.query.departmentId,this.handleDepartmentChange()),this.$route.query.doctorId&&(this.appointmentForm.doctorId=this.$route.query.doctorId)},methods:{loadUserInfo(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e),this.user.phone&&(this.appointmentForm.contactPhone=this.user.phone))},loadDepartments(){this.$axios.get("/department/list").then(e=>{e.success&&(this.departments=e.data)}).catch(e=>{console.error("加载科室列表失败:",e),this.$message.error("加载科室列表失败")})},handleDepartmentChange(){this.appointmentForm.departmentId&&(this.appointmentForm.doctorId="",this.$axios.get("/doctor/list",{params:{departmentId:this.appointmentForm.departmentId}}).then(e=>{e.success&&(this.filteredDoctors=e.data)}).catch(e=>{console.error("加载医生列表失败:",e),this.$message.error("加载医生列表失败")}))},disabledDate(e){return e.getTime()<Date.now()-864e5},validatePhone(e,t,a){const s=/^1[3-9]\d{9}$/;t?s.test(t)?a():a(new Error("请输入有效的手机号码")):a(new Error("请输入联系电话"))},submitForm(){this.$refs.appointmentFormRef.validate(e=>{if(e){this.submitting=!0;const e={...this.appointmentForm,userId:this.user.id};this.$axios.post("/appointment/create",e).then(e=>{e.success?(this.$message.success("预约成功！"),this.resetForm(),this.$router.push("/appointment-list")):this.$message.error(e.message||"预约失败")}).catch(e=>{console.error("预约提交失败:",e),this.$message.error("预约提交失败，请重试")}).finally(()=>{this.submitting=!1})}})},resetForm(){this.$refs.appointmentFormRef.resetFields(),this.appointmentForm.doctorId="",this.user&&this.user.phone&&(this.appointmentForm.contactPhone=this.user.phone)},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})}}},Z=Y;var X=(0,n.A)(Z,J,W,!1,null,"221a479c",null);const Q=X.exports;var ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"appointment-list-container"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("main",{staticClass:"main-content"},[e.user?t("div",[e._m(1),t("div",{staticClass:"filter-section"},[t("div",{staticClass:"filter-group"},[t("label",{staticClass:"filter-label"},[e._v("状态筛选：")]),t("el-select",{attrs:{placeholder:"全部状态"},on:{change:e.loadAppointments},model:{value:e.statusFilter,callback:function(t){e.statusFilter=t},expression:"statusFilter"}},[t("el-option",{attrs:{label:"全部状态",value:""}}),t("el-option",{attrs:{label:"待确认",value:"PENDING"}}),t("el-option",{attrs:{label:"已确认",value:"CONFIRMED"}}),t("el-option",{attrs:{label:"已完成",value:"COMPLETED"}}),t("el-option",{attrs:{label:"已取消",value:"CANCELLED"}})],1)],1),t("div",{staticClass:"filter-group"},[t("label",{staticClass:"filter-label"},[e._v("搜索：")]),t("el-input",{attrs:{placeholder:"输入医生姓名或科室名称","prefix-icon":"el-icon-search"},on:{input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1)]),t("div",{staticClass:"appointment-table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filteredAppointments,stripe:""}},[t("el-table-column",{attrs:{prop:"id",label:"预约编号",width:"120"}}),t("el-table-column",{attrs:{prop:"doctorName",label:"医生",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.doctor?.name||"-"))]}}])}),t("el-table-column",{attrs:{prop:"departmentName",label:"科室",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.department?.name||"-"))]}}])}),t("el-table-column",{attrs:{prop:"appointmentDate",label:"预约日期",width:"120"}}),t("el-table-column",{attrs:{prop:"appointmentTime",label:"预约时段",width:"100"}}),t("el-table-column",{attrs:{prop:"symptoms",label:"症状描述","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getStatusType(a.row.status)}},[e._v(e._s(e.getStatusText(a.row.status)))])]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),"ADMIN"!==e.user.role?t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return["PENDING"===a.row.status?t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.cancelAppointment(a.row.id)}}},[e._v(" 取消预约 ")]):t("span",[e._v("-")])]}}],null,!1,1735552385)}):e._e()],1)],1),0!==e.filteredAppointments.length||e.loading?e._e():t("div",{staticClass:"no-data"},[t("el-empty",{attrs:{description:"暂无预约记录"}})],1)]):t("div",[t("el-alert",{attrs:{title:"请先登录",description:"查看预约记录需要登录后使用，请先登录账号",type:"info","show-icon":"",closable:!1}},[t("router-link",{attrs:{slot:"after-close",to:"/login"},slot:"after-close"},[e._v("立即登录")])],1)],1)]),e._m(2)])},te=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h1",[e._v("我的预约记录")]),t("p",{staticClass:"page-desc"},[e._v("查看和管理您的所有预约信息")])])},function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"footer-content"},[t("p",[e._v("© 2024 医院预约系统 版权所有")])])])}];const ae={name:"AppointmentList",data(){return{user:null,appointments:[],statusFilter:"",searchKeyword:"",loading:!1}},computed:{filteredAppointments(){let e=[...this.appointments];if(this.statusFilter&&(e=e.filter(e=>e.status===this.statusFilter)),this.searchKeyword.trim()){const t=this.searchKeyword.toLowerCase().trim();e=e.filter(e=>e.doctor?.name&&e.doctor.name.toLowerCase().includes(t)||e.department?.name&&e.department.name.toLowerCase().includes(t))}return e}},created(){this.loadUserInfo(),this.user&&this.loadAppointments()},watch:{user(e){e&&this.loadAppointments()}},methods:{loadUserInfo(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},loadAppointments(){if(!this.user)return;this.loading=!0;const e="ADMIN"===this.user.role?{}:{userId:this.user.id};this.$axios.get("/appointment/list",{params:e}).then(e=>{e.success&&(this.appointments=e.data)}).catch(e=>{console.error("加载预约列表失败:",e),this.$message.error("加载预约列表失败")}).finally(()=>{this.loading=!1})},handleSearch(){},getStatusType(e){const t={PENDING:"warning",CONFIRMED:"success",COMPLETED:"info",CANCELLED:"danger"};return t[e]||"default"},getStatusText(e){const t={PENDING:"待确认",CONFIRMED:"已确认",COMPLETED:"已完成",CANCELLED:"已取消"};return t[e]||e},cancelAppointment(e){this.$confirm("确定要取消该预约吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.put(`/appointment/cancel/${e}`).then(e=>{e.success?(this.$message.success("取消预约成功"),this.loadAppointments()):this.$message.error(e.message||"取消预约失败")}).catch(e=>{console.error("取消预约失败:",e),this.$message.error("取消预约失败，请重试")})}).catch(()=>{})},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})}}},se=ae;var re=(0,n.A)(se,ee,te,!1,null,"77f57e68",null);const ie=re.exports;var oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"medical-guide-container"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[e._m(0),t("nav",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/home"}},[e._v("首页")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/departments"}},[e._v("科室介绍")]),t("router-link",{staticClass:"nav-item",attrs:{to:"/doctors"}},[e._v("医生团队")]),t("router-link",{staticClass:"nav-item active",attrs:{to:"/medical-guide"}},[e._v("医疗导诊")])],1),t("div",{staticClass:"user-info"},[e.user?t("div",{staticClass:"logged-in"},[t("span",{staticClass:"welcome"},[e._v("欢迎，"+e._s(e.user.name||e.user.username))]),t("router-link",{staticClass:"btn-text",attrs:{to:"/user-info"}},[e._v("个人信息")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/appointment-list"}},[e._v("预约记录")]),t("button",{staticClass:"btn-text",on:{click:e.handleLogout}},[e._v("退出登录")])],1):t("div",{staticClass:"not-logged-in"},[t("router-link",{staticClass:"btn-primary",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"btn-text",attrs:{to:"/register"}},[e._v("注册")])],1)])])]),t("main",{staticClass:"main-content"},[e._m(1),t("el-card",{staticClass:"guide-card symptom-checker"},[t("template",{slot:"header"},[t("h3",{staticClass:"card-title"},[e._v("症状自查向导")])]),t("div",{staticClass:"symptom-form"},[t("el-form",{attrs:{model:e.symptomForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"主要症状"}},[t("el-select",{attrs:{placeholder:"请选择主要症状"},model:{value:e.symptomForm.mainSymptom,callback:function(t){e.$set(e.symptomForm,"mainSymptom",t)},expression:"symptomForm.mainSymptom"}},e._l(e.commonSymptoms,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),t("el-form-item",{attrs:{label:"伴随症状"}},[t("el-select",{attrs:{multiple:"",placeholder:"可多选"},model:{value:e.symptomForm.secondarySymptoms,callback:function(t){e.$set(e.symptomForm,"secondarySymptoms",t)},expression:"symptomForm.secondarySymptoms"}},e._l(e.allSymptoms,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),t("el-form-item",{attrs:{label:"症状持续时间"}},[t("el-radio-group",{model:{value:e.symptomForm.duration,callback:function(t){e.$set(e.symptomForm,"duration",t)},expression:"symptomForm.duration"}},[t("el-radio-button",{attrs:{label:"几小时"}}),t("el-radio-button",{attrs:{label:"1-3天"}}),t("el-radio-button",{attrs:{label:"1周内"}}),t("el-radio-button",{attrs:{label:"长期存在"}})],1)],1),t("el-form-item",{attrs:{label:"症状严重程度"}},[t("el-rate",{attrs:{"show-score":"",max:5},model:{value:e.symptomForm.severity,callback:function(t){e.$set(e.symptomForm,"severity",t)},expression:"symptomForm.severity"}})],1),t("el-form-item",{staticClass:"submit-section"},[t("el-button",{attrs:{type:"primary",loading:e.analyzing},on:{click:e.analyzeSymptoms}},[e._v("分析症状")])],1)],1)],1)],2),e.analysisResult?t("el-card",{staticClass:"guide-card analysis-result"},[t("template",{slot:"header"},[t("h3",{staticClass:"card-title"},[e._v("初步分析结果")])]),t("div",{staticClass:"result-content"},[t("div",{staticClass:"recommended-dept"},[t("h4",{staticClass:"result-subtitle"},[e._v("建议就诊科室：")]),t("div",{staticClass:"dept-tags"},e._l(e.analysisResult.recommendedDepartments,function(a){return t("el-tag",{key:a,attrs:{type:"primary",closable:""},on:{click:function(t){return e.goToDepartment(a)}}},[e._v(e._s(a))])}),1)]),t("div",{staticClass:"advice"},[t("h4",{staticClass:"result-subtitle"},[e._v("就诊建议：")]),t("p",{staticClass:"advice-text"},[e._v(e._s(e.analysisResult.advice))])]),e.analysisResult.isEmergency?t("div",{staticClass:"emergency-warning"},[t("el-alert",{attrs:{title:"紧急提示",description:"您的症状可能需要紧急处理，请立即前往急诊科就诊或拨打120急救电话",type:"error","show-icon":""}})],1):e._e(),t("div",{staticClass:"action-buttons"},[t("router-link",{staticClass:"make-appointment-btn",attrs:{to:{path:"/appointment"}}},[e._v(" 立即预约 ")]),t("router-link",{staticClass:"view-doctors-btn",attrs:{to:{path:"/doctors"}}},[e._v(" 查看医生列表 ")])],1)])],2):e._e(),t("el-card",{staticClass:"guide-card faq-section"},[t("template",{slot:"header"},[t("h3",{staticClass:"card-title"},[e._v("常见问题指南")])]),t("el-collapse",{attrs:{accordion:""}},[t("el-collapse-item",{attrs:{title:"如何选择合适的科室就诊？",name:"1"}},[t("div",{staticClass:"faq-content"},[t("p",[e._v("选择科室主要根据您的症状和不适部位：")]),t("ul",[t("li",[e._v("头痛、头晕：建议先看神经内科")]),t("li",[e._v("心脏不适、胸痛：建议心内科")]),t("li",[e._v("腹痛、消化不良：建议消化内科")]),t("li",[e._v("关节疼痛：建议骨科或风湿免疫科")]),t("li",[e._v("发热、咳嗽：建议呼吸内科或感染科")])]),t("p",[e._v("如不确定，可先到全科医学科或内科进行初步筛查。")])])]),t("el-collapse-item",{attrs:{title:"初诊患者需要注意什么？",name:"2"}},[t("div",{staticClass:"faq-content"},[t("p",[e._v("初诊患者需要注意以下几点：")]),t("ul",[t("li",[e._v("携带有效身份证件（身份证、医保卡等）")]),t("li",[e._v("提前准备好症状描述，包括发病时间、持续时长、症状变化等信息")]),t("li",[e._v("如有既往病历、检查报告等，请一并携带")]),t("li",[e._v("提前通过我院APP或网站预约，避免长时间排队等候")]),t("li",[e._v("建议上午前往就诊，以便进行各项检查")])])])]),t("el-collapse-item",{attrs:{title:"哪些情况需要看急诊？",name:"3"}},[t("div",{staticClass:"faq-content"},[t("p",[e._v("以下情况建议立即前往急诊科就诊：")]),t("ul",[t("li",[e._v("突发剧烈胸痛、呼吸困难")]),t("li",[e._v("严重外伤、大量出血")]),t("li",[e._v("剧烈头痛、呕吐、意识不清")]),t("li",[e._v("高热（体温超过39.5℃）、持续不退")]),t("li",[e._v("突发腹痛、疑似急腹症")]),t("li",[e._v("严重过敏反应，如喉头水肿、呼吸困难等")]),t("li",[e._v("食物中毒症状严重者")])]),t("p",[e._v("紧急情况下请直接拨打120急救电话。")])])]),t("el-collapse-item",{attrs:{title:"预约挂号有哪些注意事项？",name:"4"}},[t("div",{staticClass:"faq-content"},[t("p",[e._v("预约挂号需要注意：")]),t("ul",[t("li",[e._v("预约成功后，请在就诊当天提前30分钟到院取号")]),t("li",[e._v("如需取消预约，请至少提前4小时操作，避免影响个人信誉记录")]),t("li",[e._v("一个账号同一科室同一天只能预约一个号源")]),t("li",[e._v("挂号后请按照预约时间准时就诊，过时未到者可能需要重新排队")]),t("li",[e._v("特殊科室（如专家门诊）可能需要提前一周预约")])])])])],1)],2),t("el-card",{staticClass:"guide-card health-tips"},[t("template",{slot:"header"},[t("h3",{staticClass:"card-title"},[e._v("健康小贴士")])]),t("div",{staticClass:"health-tips-content"},[t("div",{staticClass:"tip-item"},[t("i",{staticClass:"el-icon-info-circle health-icon"}),t("div",{staticClass:"tip-text"},[t("p",{staticClass:"tip-title"},[e._v("保持良好作息习惯")]),t("p",{staticClass:"tip-desc"},[e._v("每天保持7-8小时充足睡眠，有助于增强免疫力，促进身体健康。")])])]),t("div",{staticClass:"tip-item"},[t("i",{staticClass:"el-icon-medal health-icon"}),t("div",{staticClass:"tip-text"},[t("p",{staticClass:"tip-title"},[e._v("合理饮食结构")]),t("p",{staticClass:"tip-desc"},[e._v("多吃蔬菜水果，控制脂肪和盐分摄入，保持饮食多样化。")])])]),t("div",{staticClass:"tip-item"},[t("i",{staticClass:"el-icon-cpu health-icon"}),t("div",{staticClass:"tip-text"},[t("p",{staticClass:"tip-title"},[e._v("适量运动锻炼")]),t("p",{staticClass:"tip-desc"},[e._v("每周至少进行150分钟中等强度有氧运动，保持身体健康活力。")])])]),t("div",{staticClass:"tip-item"},[t("i",{staticClass:"el-icon-info-circle health-icon"}),t("div",{staticClass:"tip-text"},[t("p",{staticClass:"tip-title"},[e._v("保持良好作息习惯")]),t("p",{staticClass:"tip-desc"},[e._v("每天保持7-8小时充足睡眠，有助于增强免疫力，促进身体健康。")])])]),t("div",{staticClass:"tip-item"},[t("i",{staticClass:"el-icon-medal health-icon"}),t("div",{staticClass:"tip-text"},[t("p",{staticClass:"tip-title"},[e._v("合理饮食结构")]),t("p",{staticClass:"tip-desc"},[e._v("多吃蔬菜水果，控制脂肪和盐分摄入，保持饮食多样化。")])])]),t("div",{staticClass:"tip-item"},[t("i",{staticClass:"el-icon-cpu health-icon"}),t("div",{staticClass:"tip-text"},[t("p",{staticClass:"tip-title"},[e._v("适量运动锻炼")]),t("p",{staticClass:"tip-desc"},[e._v("每周至少进行150分钟中等强度有氧运动，保持身体健康活力。")])])])])],2)],1),e._m(2)])},le=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("i",{staticClass:"el-icon-medal-1"}),t("span",[e._v("医院预约系统")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h1",[e._v("医疗导诊服务")]),t("p",{staticClass:"page-desc"},[e._v("根据您的症状和需求，为您推荐合适的科室和就诊建议")])])},function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"footer-content"},[t("p",[e._v("© 2024 医院预约系统 版权所有")])])])}],ne=a(788),ce=a.n(ne);const de=ce().create({baseURL:"http://localhost:8083/api",timeout:15e3});de.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e},e=>(console.error("请求错误:",e),Promise.reject(e))),de.interceptors.response.use(e=>{const t=e.data;return 200!==t.code?(console.error("错误:",t.msg||"请求失败"),Promise.reject(new Error(t.msg||"请求失败"))):t},e=>(console.error("响应错误:",e),Promise.reject(e)));const me=de,pe={getGuidanceRecords:e=>me({url:"/medical-guidance/patient/"+e,method:"get"}),createGuidance:e=>me({url:"/medical-guidance",method:"post",data:e}),getDepartmentRecommendation:e=>me({url:"/medical-guidance/recommend",method:"post",data:{symptoms:e}}),getGuidanceDetail:e=>me({url:"/medical-guidance/"+e,method:"get"}),updateGuidanceStatus:(e,t)=>me({url:"/medical-guidance/"+e+"/status",method:"put",data:{status:t}}),getCommonDepartments:()=>me({url:"/medical-guidance/common-departments",method:"get"}),getHealthTips:()=>me({url:"/medical-guidance/health-tips",method:"get"})},ue=pe,he={name:"MedicalGuide",data(){return{user:null,analyzing:!1,analysisResult:null,symptomForm:{mainSymptom:"",secondarySymptoms:[],duration:"",severity:3},commonSymptoms:[{label:"头痛",value:"headache"},{label:"腹痛",value:"abdominalPain"},{label:"发热",value:"fever"},{label:"咳嗽",value:"cough"},{label:"胸痛",value:"chestPain"},{label:"头晕",value:"dizziness"},{label:"恶心呕吐",value:"nausea"},{label:"关节疼痛",value:"jointPain"}],allSymptoms:[{label:"头痛",value:"headache"},{label:"头晕",value:"dizziness"},{label:"发热",value:"fever"},{label:"咳嗽",value:"cough"},{label:"胸闷",value:"chestTightness"},{label:"胸痛",value:"chestPain"},{label:"腹痛",value:"abdominalPain"},{label:"恶心",value:"nausea"},{label:"呕吐",value:"vomiting"},{label:"腹泻",value:"diarrhea"},{label:"便秘",value:"constipation"},{label:"关节疼痛",value:"jointPain"},{label:"肌肉酸痛",value:"musclePain"},{label:"呼吸困难",value:"difficultyBreathing"},{label:"乏力",value:"fatigue"},{label:"失眠",value:"insomnia"},{label:"皮疹",value:"rash"},{label:"视力模糊",value:"blurredVision"}],symptomToDepartment:{headache:["神经内科","神经外科"],dizziness:["神经内科","耳鼻喉科"],fever:["呼吸内科","感染科"],cough:["呼吸内科"],chestPain:["心内科","呼吸内科"],abdominalPain:["消化内科","普通外科"],nausea:["消化内科"],jointPain:["骨科","风湿免疫科"]}}},created(){this.loadUserInfo()},methods:{loadUserInfo(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},analyzeSymptoms(){if(!this.symptomForm.mainSymptom)return void this.$message.warning("请选择主要症状");this.analyzing=!0;let e=this.symptomForm.mainSymptom;this.symptomForm.secondarySymptoms&&this.symptomForm.secondarySymptoms.length>0&&(e+=","+this.symptomForm.secondarySymptoms.join(",")),ue.getDepartmentRecommendation(e).then(e=>{this.analysisResult={recommendedDepartments:e.recommendedDepartments||["全科医学科"],advice:e.advice||"建议前往推荐科室就诊",isEmergency:e.isEmergency||!1}}).catch(e=>{console.error("症状分析失败:",e),this.$message.error("症状分析失败，请稍后重试");let t=this.symptomToDepartment[this.symptomForm.mainSymptom]||["全科医学科"],a="系统暂时无法连接后端服务，以下是基于本地数据的推荐。",s=!1;this.symptomForm.severity>4&&("chestPain"!==this.symptomForm.mainSymptom&&"difficultyBreathing"!==this.symptomForm.mainSymptom||(s=!0)),this.analysisResult={recommendedDepartments:t,advice:a,isEmergency:s}}).finally(()=>{this.analyzing=!1})},goToDepartment(e){this.$router.push({path:"/departments",query:{search:e}})},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.user=null,this.$router.push("/login"),this.$message.success("退出登录成功")}).catch(()=>{})}}},ge=he;var ve=(0,n.A)(ge,oe,le,!1,null,"1c557e9b",null);const be=ve.exports;var fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-dashboard"},[t("div",{staticClass:"dashboard-header"},[t("h2",[e._v("管理员仪表盘")]),t("div",{staticClass:"system-info"},[t("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:e.handleDateChange},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),t("span",{staticClass:"current-time"},[e._v(e._s(e.currentTime))])],1)]),t("div",{staticClass:"stats-cards"},[t("el-card",{staticClass:"stat-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-icon user-icon"},[t("i",{staticClass:"el-icon-user-solid"})]),t("div",{staticClass:"stat-info"},[t("div",{staticClass:"stat-number"},[e._v(e._s(e.totalUsers))]),t("div",{staticClass:"stat-label"},[e._v("总用户数")])]),t("div",{staticClass:"stat-change positive"},[t("i",{staticClass:"el-icon-caret-top"}),e._v(" "+e._s(e.userGrowthRate)+"% ")])])]),t("el-card",{staticClass:"stat-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-icon doctor-icon"},[t("i",{staticClass:"el-icon-user"})]),t("div",{staticClass:"stat-info"},[t("div",{staticClass:"stat-number"},[e._v(e._s(e.totalDoctors))]),t("div",{staticClass:"stat-label"},[e._v("医生总数")])]),t("div",{staticClass:"stat-change positive"},[t("i",{staticClass:"el-icon-caret-top"}),e._v(" "+e._s(e.doctorGrowthRate)+"% ")])])]),t("el-card",{staticClass:"stat-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-icon dept-icon"},[t("i",{staticClass:"el-icon-building"})]),t("div",{staticClass:"stat-info"},[t("div",{staticClass:"stat-number"},[e._v(e._s(e.totalDepartments))]),t("div",{staticClass:"stat-label"},[e._v("科室总数")])]),t("div",{staticClass:"stat-change neutral"},[t("i",{staticClass:"el-icon-minus"}),e._v(" 0% ")])])]),t("el-card",{staticClass:"stat-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-icon appointment-icon"},[t("i",{staticClass:"el-icon-tickets"})]),t("div",{staticClass:"stat-info"},[t("div",{staticClass:"stat-number"},[e._v(e._s(e.totalAppointments))]),t("div",{staticClass:"stat-label"},[e._v("今日预约数")])]),t("div",{staticClass:"stat-change positive"},[t("i",{staticClass:"el-icon-caret-top"}),e._v(" "+e._s(e.appointmentGrowthRate)+"% ")])])])],1),t("div",{staticClass:"dashboard-content"},[t("div",{staticClass:"recent-appointments"},[t("div",{staticClass:"section-header"},[t("h3",[e._v("最近预约")]),t("router-link",{staticClass:"view-all",attrs:{to:"/admin/appointments"}},[e._v("查看全部")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.recentAppointments}},[t("el-table-column",{attrs:{prop:"id",label:"预约ID",width:"80"}}),t("el-table-column",{attrs:{prop:"patientName",label:"患者姓名"}}),t("el-table-column",{attrs:{prop:"doctorName",label:"医生姓名"}}),t("el-table-column",{attrs:{prop:"departmentName",label:"科室"}}),t("el-table-column",{attrs:{prop:"appointmentTime",label:"预约时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.appointmentTime))+" ")]}}])}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getStatusType(a.row.status)}},[e._v(e._s(a.row.status))])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"100"}},[[t("el-button",{attrs:{type:"text",size:"small"}},[e._v("详情")])]],2)],1)],1),t("div",{staticClass:"system-status"},[e._m(0),t("el-card",{attrs:{shadow:"hover"}},[t("div",{staticClass:"status-grid"},[t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("系统运行时间")]),t("div",{staticClass:"status-value"},[e._v(e._s(e.systemUptime))])]),t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("在线用户数")]),t("div",{staticClass:"status-value"},[e._v(e._s(e.onlineUsers))])]),t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("服务器状态")]),t("div",{staticClass:"status-value"},[t("span",{staticClass:"status-badge online"},[e._v("正常")])])]),t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("数据库状态")]),t("div",{staticClass:"status-value"},[t("span",{staticClass:"status-badge online"},[e._v("正常")])])])])])],1)]),t("div",{staticClass:"quick-actions"},[e._m(1),t("div",{staticClass:"action-buttons"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-user"},on:{click:e.goToUserManagement}},[e._v("用户管理")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-building"},on:{click:e.goToDepartmentManagement}},[e._v("科室管理")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-user-solid"},on:{click:e.goToDoctorManagement}},[e._v("医生管理")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:e.goToAppointmentManagement}},[e._v("预约管理")])],1)])])},De=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-header"},[t("h3",[e._v("系统状态")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-header"},[t("h3",[e._v("快速操作")])])}];const _e={name:"Dashboard",data(){return{selectedDate:new Date,currentTime:"",totalUsers:0,userGrowthRate:0,totalDoctors:0,doctorGrowthRate:0,totalDepartments:0,totalAppointments:0,appointmentGrowthRate:0,systemUptime:"7天 12小时",onlineUsers:25,recentAppointments:[]}},mounted(){this.initializeDashboard(),this.startTimeUpdate()},methods:{initializeDashboard(){this.fetchStatistics(),this.fetchRecentAppointments()},fetchStatistics(){setTimeout(()=>{this.totalUsers=528,this.userGrowthRate=3.2,this.totalDoctors=86,this.doctorGrowthRate=5.1,this.totalDepartments=24,this.totalAppointments=128,this.appointmentGrowthRate=8.7},500)},fetchRecentAppointments(){setTimeout(()=>{this.recentAppointments=[{id:1001,patientName:"张三",doctorName:"李医生",departmentName:"内科",appointmentTime:"2024-01-20 09:30:00",status:"已确认"},{id:1002,patientName:"李四",doctorName:"王医生",departmentName:"外科",appointmentTime:"2024-01-20 10:00:00",status:"待确认"},{id:1003,patientName:"王五",doctorName:"赵医生",departmentName:"儿科",appointmentTime:"2024-01-20 10:30:00",status:"已确认"},{id:1004,patientName:"赵六",doctorName:"孙医生",departmentName:"妇产科",appointmentTime:"2024-01-20 11:00:00",status:"已取消"},{id:1005,patientName:"钱七",doctorName:"周医生",departmentName:"眼科",appointmentTime:"2024-01-20 11:30:00",status:"已确认"}]},500)},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},getStatusType(e){switch(e){case"已确认":return"success";case"待确认":return"warning";case"已取消":return"danger";default:return"info"}},handleDateChange(e){console.log("选择日期:",e),this.fetchStatistics(),this.fetchRecentAppointments()},updateCurrentTime(){const e=new Date;this.currentTime=e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},startTimeUpdate(){this.updateCurrentTime(),setInterval(()=>{this.updateCurrentTime()},1e3)},goToUserManagement(){this.$router.push("/admin/users")},goToDepartmentManagement(){this.$router.push("/admin/departments")},goToDoctorManagement(){this.$router.push("/admin/doctors")},goToAppointmentManagement(){this.$router.push("/admin/appointments")}}},Ce=_e;var ye=(0,n.A)(Ce,fe,De,!1,null,"1434536f",null);const we=ye.exports;var Fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-management"},[t("div",{staticClass:"management-header"},[t("h2",[e._v("用户管理")]),t("el-button",{attrs:{type:"primary"},on:{click:e.showAddUserDialog}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加用户 ")])],1),t("div",{staticClass:"search-filter"},[t("el-input",{staticStyle:{width:"300px","margin-right":"15px"},attrs:{placeholder:"搜索用户名、姓名或手机号","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),t("el-select",{staticStyle:{width:"150px","margin-right":"15px"},attrs:{placeholder:"选择用户角色",clearable:""},on:{change:e.handleSearch},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},[t("el-option",{attrs:{label:"患者",value:"PATIENT"}}),t("el-option",{attrs:{label:"医生",value:"DOCTOR"}}),t("el-option",{attrs:{label:"管理员",value:"ADMIN"}})],1),t("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择用户状态",clearable:""},on:{change:e.handleSearch},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}},[t("el-option",{attrs:{label:"启用",value:1}}),t("el-option",{attrs:{label:"禁用",value:0}})],1)],1),t("div",{staticClass:"user-list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"userTable",staticStyle:{width:"100%"},attrs:{data:e.filteredUsers,stripe:"",border:"","element-loading-text":"加载中..."},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"80"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"realName",label:"真实姓名"}}),t("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"role",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getRoleType(a.row.role)}},[e._v(" "+e._s(e.getRoleName(a.row.role))+" ")])]}}])}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#909399"},on:{change:function(t){return e.updateUserStatus(a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.createTime))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showEditUserDialog(a.row)}}},[e._v(" 编辑 ")]),"ADMIN"!==a.row.role?t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteUser(a.row)}}},[e._v(" 删除 ")]):e._e(),"ADMIN"!==a.row.role?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.resetPassword(a.row)}}},[e._v(" 重置密码 ")]):e._e()]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, sizes, total",total:e.filteredUsers.length,"page-size":e.pageSize,"current-page":e.currentPage,"page-sizes":[10,20,50,100]},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"添加用户",visible:e.addUserDialogVisible,width:"500px"},on:{"update:visible":function(t){e.addUserDialogVisible=t},close:e.resetAddUserForm}},[t("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,rules:e.addUserRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),t("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[t("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.addUserForm.realName,callback:function(t){e.$set(e.addUserForm,"realName",t)},expression:"addUserForm.realName"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.addUserForm.phone,callback:function(t){e.$set(e.addUserForm,"phone",t)},expression:"addUserForm.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),t("el-form-item",{attrs:{label:"用户角色",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.addUserForm.role,callback:function(t){e.$set(e.addUserForm,"role",t)},expression:"addUserForm.role"}},[t("el-option",{attrs:{label:"患者",value:"PATIENT"}}),t("el-option",{attrs:{label:"医生",value:"DOCTOR"}}),t("el-option",{attrs:{label:"管理员",value:"ADMIN"}})],1)],1),t("el-form-item",{attrs:{label:"初始密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入初始密码"},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addUserDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitAddUser}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"编辑用户",visible:e.editUserDialogVisible,width:"500px"},on:{"update:visible":function(t){e.editUserDialogVisible=t}}},[t("el-form",{ref:"editUserForm",attrs:{model:e.editUserForm,rules:e.editUserRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),t("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[t("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.editUserForm.realName,callback:function(t){e.$set(e.editUserForm,"realName",t)},expression:"editUserForm.realName"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.editUserForm.phone,callback:function(t){e.$set(e.editUserForm,"phone",t)},expression:"editUserForm.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),"ADMIN"!==e.editUserForm.role?t("el-form-item",{attrs:{label:"用户角色",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.editUserForm.role,callback:function(t){e.$set(e.editUserForm,"role",t)},expression:"editUserForm.role"}},[t("el-option",{attrs:{label:"患者",value:"PATIENT"}}),t("el-option",{attrs:{label:"医生",value:"DOCTOR"}})],1)],1):t("el-form-item",{attrs:{label:"用户角色"}},[t("el-input",{attrs:{value:e.getRoleName(e.editUserForm.role),disabled:""}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editUserDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitEditUser}},[e._v("确定")])],1)],1),e.selectedUsers.length>0?t("div",{staticClass:"batch-operations"},[t("el-tag",[e._v(" 已选择 "+e._s(e.selectedUsers.length)+" 项 ")]),t("el-button",{attrs:{type:"danger",size:"small",disabled:e.selectedUsers.some(e=>"ADMIN"===e.role)},on:{click:e.batchDeleteUsers}},[e._v(" 批量删除 ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.batchEnableUsers}},[e._v(" 批量启用 ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.batchDisableUsers}},[e._v(" 批量禁用 ")]),t("el-button",{attrs:{size:"small"},on:{click:e.clearSelection}},[e._v("清空选择")])],1):e._e()],1)},xe=[];const Se={name:"UserManagement",data(){return{users:[],filteredUsers:[],loading:!1,searchKeyword:"",selectedRole:"",selectedStatus:"",currentPage:1,pageSize:10,selectedUsers:[],addUserDialogVisible:!1,addUserForm:{username:"",realName:"",phone:"",email:"",role:"PATIENT",password:""},addUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],role:[{required:!0,message:"请选择用户角色",trigger:"change"}],password:[{required:!0,message:"请输入初始密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}]},editUserDialogVisible:!1,editUserForm:{id:"",username:"",realName:"",phone:"",email:"",role:""},editUserRules:{realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],role:[{required:!0,message:"请选择用户角色",trigger:"change"}]}}},mounted(){this.fetchUsers()},computed:{paginatedUsers(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredUsers.slice(e,t)}},methods:{fetchUsers(){this.loading=!0,setTimeout(()=>{this.users=[{id:1,username:"admin",realName:"管理员",phone:"13800138000",email:"admin@hospital.com",role:"ADMIN",status:1,createTime:"2023-01-01 00:00:00"},{id:2,username:"patient1",realName:"张三",phone:"13800138001",email:"zhangsan@example.com",role:"PATIENT",status:1,createTime:"2023-01-02 10:30:00"},{id:3,username:"doctor1",realName:"李医生",phone:"13800138002",email:"doctor_li@hospital.com",role:"DOCTOR",status:1,createTime:"2023-01-03 14:20:00"},{id:4,username:"patient2",realName:"李四",phone:"13800138003",email:"lisi@example.com",role:"PATIENT",status:0,createTime:"2023-01-04 09:15:00"},{id:5,username:"doctor2",realName:"王医生",phone:"13800138004",email:"doctor_wang@hospital.com",role:"DOCTOR",status:1,createTime:"2023-01-05 16:45:00"},{id:6,username:"patient3",realName:"王五",phone:"13800138005",email:"wangwu@example.com",role:"PATIENT",status:1,createTime:"2023-01-06 11:20:00"},{id:7,username:"patient4",realName:"赵六",phone:"13800138006",email:"zhaoliu@example.com",role:"PATIENT",status:1,createTime:"2023-01-07 13:50:00"},{id:8,username:"doctor3",realName:"刘医生",phone:"13800138007",email:"doctor_liu@hospital.com",role:"DOCTOR",status:1,createTime:"2023-01-08 09:00:00"},{id:9,username:"patient5",realName:"孙七",phone:"13800138008",email:"sunqi@example.com",role:"PATIENT",status:0,createTime:"2023-01-09 15:30:00"},{id:10,username:"patient6",realName:"周八",phone:"13800138009",email:"zhouba@example.com",role:"PATIENT",status:1,createTime:"2023-01-10 10:10:00"}],this.filteredUsers=[...this.users],this.loading=!1},500)},handleSearch(){let e=[...this.users];if(this.searchKeyword){const t=this.searchKeyword.toLowerCase();e=e.filter(e=>e.username.toLowerCase().includes(t)||e.realName.toLowerCase().includes(t)||e.phone.includes(t))}this.selectedRole&&(e=e.filter(e=>e.role===this.selectedRole)),""!==this.selectedStatus&&(e=e.filter(e=>e.status===parseInt(this.selectedStatus))),this.filteredUsers=e,this.currentPage=1},getRoleName(e){const t={PATIENT:"患者",DOCTOR:"医生",ADMIN:"管理员"};return t[e]||e},getRoleType(e){const t={PATIENT:"primary",DOCTOR:"success",ADMIN:"danger"};return t[e]||"info"},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`},showAddUserDialog(){this.resetAddUserForm(),this.addUserDialogVisible=!0},resetAddUserForm(){this.addUserForm={username:"",realName:"",phone:"",email:"",role:"PATIENT",password:""},this.$refs.addUserForm&&this.$refs.addUserForm.resetFields()},submitAddUser(){this.$refs.addUserForm.validate(e=>{if(e){const e={id:this.users.length+1,...this.addUserForm,status:1,createTime:(new Date).toISOString().replace("T"," ").substring(0,19)};this.users.unshift(e),this.handleSearch(),this.addUserDialogVisible=!1,this.$message.success("用户添加成功")}})},showEditUserDialog(e){this.editUserForm={...e},this.editUserDialogVisible=!0},submitEditUser(){this.$refs.editUserForm.validate(e=>{if(e){const e=this.users.findIndex(e=>e.id===this.editUserForm.id);-1!==e&&(this.users[e]={...this.users[e],...this.editUserForm},this.handleSearch(),this.editUserDialogVisible=!1,this.$message.success("用户更新成功"))}})},updateUserStatus(e){this.$message.success("用户状态已更新为"+(e.status?"启用":"禁用"))},deleteUser(e){this.$confirm(`确定要删除用户「${e.realName}」吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.users.findIndex(t=>t.id===e.id);-1!==t&&(this.users.splice(t,1),this.handleSearch(),this.$message.success("用户删除成功"))}).catch(()=>{})},resetPassword(e){this.$confirm(`确定要重置用户「${e.realName}」的密码吗？`,"重置确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success(`用户「${e.realName}」的密码已重置为：123456`)}).catch(()=>{})},batchDeleteUsers(){if(this.selectedUsers.some(e=>"ADMIN"===e.role))return void this.$message.warning("不能删除管理员用户");const e=this.selectedUsers.map(e=>e.realName).join("、");this.$confirm(`确定要删除以下用户吗？\n${e}`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.selectedUsers.map(e=>e.id);this.users=this.users.filter(t=>!e.includes(t.id)),this.handleSearch(),this.selectedUsers=[],this.$message.success("批量删除成功")}).catch(()=>{})},batchEnableUsers(){this.selectedUsers.forEach(e=>{e.status=1}),this.selectedUsers=[],this.$message.success("批量启用成功")},batchDisableUsers(){this.selectedUsers.some(e=>"ADMIN"===e.role)?this.$message.warning("不能禁用管理员用户"):(this.selectedUsers.forEach(e=>{e.status=0}),this.selectedUsers=[],this.$message.success("批量禁用成功"))},clearSelection(){this.$refs.userTable&&this.$refs.userTable.clearSelection(),this.selectedUsers=[]},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},handleSelectionChange(e){this.selectedUsers=e}}},ke=Se;var $e=(0,n.A)(ke,Fe,xe,!1,null,"039a41e6",null);const Te=$e.exports;var Ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"department-management"},[t("div",{staticClass:"management-header"},[t("h2",[e._v("科室管理")]),t("el-button",{attrs:{type:"primary"},on:{click:e.showAddDepartmentDialog}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加科室 ")])],1),t("div",{staticClass:"search-filter"},[t("el-input",{staticStyle:{width:"300px","margin-right":"15px"},attrs:{placeholder:"搜索科室名称、描述或负责人","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),t("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择科室状态",clearable:""},on:{change:e.handleSearch},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}},[t("el-option",{attrs:{label:"启用",value:1}}),t("el-option",{attrs:{label:"禁用",value:0}})],1)],1),t("div",{staticClass:"department-list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"departmentTable",staticStyle:{width:"100%"},attrs:{data:e.filteredDepartments,stripe:"",border:"","element-loading-text":"加载中..."},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"科室ID",width:"80"}}),t("el-table-column",{attrs:{prop:"name",label:"科室名称","min-width":"150"}}),t("el-table-column",{attrs:{prop:"description",label:"科室描述","show-overflow-tooltip":"","min-width":"200"}}),t("el-table-column",{attrs:{prop:"responsiblePerson",label:"科室负责人","min-width":"120"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系电话","min-width":"120"}}),t("el-table-column",{attrs:{prop:"location",label:"科室位置","min-width":"150"}}),t("el-table-column",{attrs:{prop:"doctorCount",label:"医生数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"primary"},on:{click:function(t){return e.viewDepartmentDoctors(a.row)}}},[e._v(" "+e._s(a.row.doctorCount)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#909399"},on:{change:function(t){return e.updateDepartmentStatus(a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.createTime))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showEditDepartmentDialog(a.row)}}},[e._v(" 编辑 ")]),t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteDepartment(a.row)}}},[e._v(" 删除 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.viewDepartmentDetail(a.row)}}},[e._v(" 详情 ")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, sizes, total",total:e.filteredDepartments.length,"page-size":e.pageSize,"current-page":e.currentPage,"page-sizes":[10,20,50,100]},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"添加科室",visible:e.addDepartmentDialogVisible,width:"600px"},on:{"update:visible":function(t){e.addDepartmentDialogVisible=t},close:e.resetAddDepartmentForm}},[t("el-form",{ref:"addDepartmentForm",attrs:{model:e.addDepartmentForm,rules:e.addDepartmentRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"科室名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入科室名称",maxlength:"50"},model:{value:e.addDepartmentForm.name,callback:function(t){e.$set(e.addDepartmentForm,"name",t)},expression:"addDepartmentForm.name"}})],1),t("el-form-item",{attrs:{label:"科室描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入科室描述",maxlength:"200"},model:{value:e.addDepartmentForm.description,callback:function(t){e.$set(e.addDepartmentForm,"description",t)},expression:"addDepartmentForm.description"}})],1),t("el-form-item",{attrs:{label:"科室负责人",prop:"responsiblePerson"}},[t("el-input",{attrs:{placeholder:"请输入科室负责人",maxlength:"20"},model:{value:e.addDepartmentForm.responsiblePerson,callback:function(t){e.$set(e.addDepartmentForm,"responsiblePerson",t)},expression:"addDepartmentForm.responsiblePerson"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.addDepartmentForm.phone,callback:function(t){e.$set(e.addDepartmentForm,"phone",t)},expression:"addDepartmentForm.phone"}})],1),t("el-form-item",{attrs:{label:"科室位置",prop:"location"}},[t("el-input",{attrs:{placeholder:"请输入科室位置",maxlength:"100"},model:{value:e.addDepartmentForm.location,callback:function(t){e.$set(e.addDepartmentForm,"location",t)},expression:"addDepartmentForm.location"}})],1),t("el-form-item",{attrs:{label:"科室图片"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.addDepartmentForm.avatar?t("img",{staticClass:"avatar",attrs:{src:e.addDepartmentForm.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"upload-tip"},[e._v("点击上传科室图片 (jpg/png, 最大2MB)")])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDepartmentDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitAddDepartment}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"编辑科室",visible:e.editDepartmentDialogVisible,width:"600px"},on:{"update:visible":function(t){e.editDepartmentDialogVisible=t}}},[t("el-form",{ref:"editDepartmentForm",attrs:{model:e.editDepartmentForm,rules:e.editDepartmentRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"科室ID"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editDepartmentForm.id,callback:function(t){e.$set(e.editDepartmentForm,"id",t)},expression:"editDepartmentForm.id"}})],1),t("el-form-item",{attrs:{label:"科室名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入科室名称",maxlength:"50"},model:{value:e.editDepartmentForm.name,callback:function(t){e.$set(e.editDepartmentForm,"name",t)},expression:"editDepartmentForm.name"}})],1),t("el-form-item",{attrs:{label:"科室描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入科室描述",maxlength:"200"},model:{value:e.editDepartmentForm.description,callback:function(t){e.$set(e.editDepartmentForm,"description",t)},expression:"editDepartmentForm.description"}})],1),t("el-form-item",{attrs:{label:"科室负责人",prop:"responsiblePerson"}},[t("el-input",{attrs:{placeholder:"请输入科室负责人",maxlength:"20"},model:{value:e.editDepartmentForm.responsiblePerson,callback:function(t){e.$set(e.editDepartmentForm,"responsiblePerson",t)},expression:"editDepartmentForm.responsiblePerson"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.editDepartmentForm.phone,callback:function(t){e.$set(e.editDepartmentForm,"phone",t)},expression:"editDepartmentForm.phone"}})],1),t("el-form-item",{attrs:{label:"科室位置",prop:"location"}},[t("el-input",{attrs:{placeholder:"请输入科室位置",maxlength:"100"},model:{value:e.editDepartmentForm.location,callback:function(t){e.$set(e.editDepartmentForm,"location",t)},expression:"editDepartmentForm.location"}})],1),t("el-form-item",{attrs:{label:"科室图片"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-success":e.handleEditAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editDepartmentForm.avatar?t("img",{staticClass:"avatar",attrs:{src:e.editDepartmentForm.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"upload-tip"},[e._v("点击上传科室图片 (jpg/png, 最大2MB)")])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDepartmentDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitEditDepartment}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"科室详情",visible:e.departmentDetailDialogVisible,width:"600px"},on:{"update:visible":function(t){e.departmentDetailDialogVisible=t}}},[t("el-descriptions",{attrs:{column:1,border:""}},[t("el-descriptions-item",{attrs:{label:"科室ID"}},[e._v(e._s(e.currentDepartment.id))]),t("el-descriptions-item",{attrs:{label:"科室名称"}},[e._v(e._s(e.currentDepartment.name))]),t("el-descriptions-item",{attrs:{label:"科室描述"}},[e._v(e._s(e.currentDepartment.description))]),t("el-descriptions-item",{attrs:{label:"科室负责人"}},[e._v(e._s(e.currentDepartment.responsiblePerson))]),t("el-descriptions-item",{attrs:{label:"联系电话"}},[e._v(e._s(e.currentDepartment.phone))]),t("el-descriptions-item",{attrs:{label:"科室位置"}},[e._v(e._s(e.currentDepartment.location))]),t("el-descriptions-item",{attrs:{label:"医生数量"}},[e._v(e._s(e.currentDepartment.doctorCount))]),t("el-descriptions-item",{attrs:{label:"科室状态"}},[t("el-tag",{attrs:{type:e.currentDepartment.status?"success":"danger"}},[e._v(" "+e._s(e.currentDepartment.status?"启用":"禁用")+" ")])],1),t("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.formatDate(e.currentDepartment.createTime)))]),e.currentDepartment.avatar?t("el-descriptions-item",{attrs:{label:"科室图片"}},[t("img",{staticClass:"detail-avatar",attrs:{src:e.currentDepartment.avatar}})]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.departmentDetailDialogVisible=!1}}},[e._v("关闭")])],1)],1),t("el-dialog",{attrs:{title:"科室医生列表",visible:e.departmentDoctorsDialogVisible,width:"800px"},on:{"update:visible":function(t){e.departmentDoctorsDialogVisible=t}}},[e.departmentDoctors.length>0?t("div",[t("el-table",{attrs:{data:e.departmentDoctors,stripe:"",border:""}},[t("el-table-column",{attrs:{prop:"id",label:"医生ID",width:"80"}}),t("el-table-column",{attrs:{prop:"name",label:"医生姓名"}}),t("el-table-column",{attrs:{prop:"title",label:"职称"}}),t("el-table-column",{attrs:{prop:"specialty",label:"专长"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:a.row.status?"success":"danger"}},[e._v(" "+e._s(a.row.status?"在职":"离职")+" ")])]}}],null,!1,181948163)})],1)],1):t("div",{staticClass:"empty-tip"},[t("el-empty",{attrs:{description:"该科室暂无医生"}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.departmentDoctorsDialogVisible=!1}}},[e._v("关闭")])],1)]),e.selectedDepartments.length>0?t("div",{staticClass:"batch-operations"},[t("el-tag",[e._v(" 已选择 "+e._s(e.selectedDepartments.length)+" 项 ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.batchDeleteDepartments}},[e._v(" 批量删除 ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.batchEnableDepartments}},[e._v(" 批量启用 ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.batchDisableDepartments}},[e._v(" 批量禁用 ")]),t("el-button",{attrs:{size:"small"},on:{click:e.clearSelection}},[e._v("清空选择")])],1):e._e()],1)},Ne=[];const Ae={name:"DepartmentManagement",data(){return{departments:[],filteredDepartments:[],loading:!1,searchKeyword:"",selectedStatus:"",currentPage:1,pageSize:10,selectedDepartments:[],currentDepartment:{},addDepartmentDialogVisible:!1,addDepartmentForm:{name:"",description:"",responsiblePerson:"",phone:"",location:"",avatar:""},addDepartmentRules:{name:[{required:!0,message:"请输入科室名称",trigger:"blur"},{min:2,max:50,message:"科室名称长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入科室描述",trigger:"blur"},{max:200,message:"科室描述不能超过 200 个字符",trigger:"blur"}],responsiblePerson:[{required:!0,message:"请输入科室负责人",trigger:"blur"},{max:20,message:"负责人姓名不能超过 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^\d{3,4}-?\d{7,8}$|^1[3-9]\d{9}$/,message:"请输入正确的电话格式",trigger:"blur"}],location:[{required:!0,message:"请输入科室位置",trigger:"blur"},{max:100,message:"科室位置不能超过 100 个字符",trigger:"blur"}]},editDepartmentDialogVisible:!1,editDepartmentForm:{id:"",name:"",description:"",responsiblePerson:"",phone:"",location:"",avatar:""},editDepartmentRules:{name:[{required:!0,message:"请输入科室名称",trigger:"blur"},{min:2,max:50,message:"科室名称长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入科室描述",trigger:"blur"},{max:200,message:"科室描述不能超过 200 个字符",trigger:"blur"}],responsiblePerson:[{required:!0,message:"请输入科室负责人",trigger:"blur"},{max:20,message:"负责人姓名不能超过 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^\d{3,4}-?\d{7,8}$|^1[3-9]\d{9}$/,message:"请输入正确的电话格式",trigger:"blur"}],location:[{required:!0,message:"请输入科室位置",trigger:"blur"},{max:100,message:"科室位置不能超过 100 个字符",trigger:"blur"}]},departmentDetailDialogVisible:!1,departmentDoctorsDialogVisible:!1,departmentDoctors:[]}},mounted(){this.fetchDepartments()},computed:{paginatedDepartments(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredDepartments.slice(e,t)}},methods:{fetchDepartments(){this.loading=!0,setTimeout(()=>{this.departments=[{id:1,name:"内科",description:"内科是医院的基础科室，负责诊治各种内科疾病，包括呼吸、消化、心血管、神经、内分泌等多个专业方向。",responsiblePerson:"张主任",phone:"010-12345601",location:"门诊楼2层东区",doctorCount:15,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:2,name:"外科",description:"外科主要负责需要手术治疗的疾病，包括普外科、骨科、神经外科、心血管外科等多个专业领域。",responsiblePerson:"李主任",phone:"010-12345602",location:"门诊楼3层西区",doctorCount:12,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:3,name:"妇产科",description:"妇产科负责女性生殖系统疾病的诊治和孕期保健，包括产科、妇科、生殖内分泌等专业。",responsiblePerson:"王主任",phone:"010-12345603",location:"门诊楼4层南区",doctorCount:8,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:4,name:"儿科",description:"儿科专门为儿童提供医疗服务，包括儿童常见病、多发病的诊治和儿童保健。",responsiblePerson:"赵主任",phone:"010-12345604",location:"门诊楼5层北区",doctorCount:10,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:5,name:"眼科",description:"眼科负责诊治眼部疾病，包括白内障、青光眼、视网膜疾病等，提供视力检查和配镜服务。",responsiblePerson:"刘主任",phone:"010-12345605",location:"门诊楼6层东区",doctorCount:5,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:6,name:"口腔科",description:"口腔科负责口腔及相关组织的疾病诊治，包括牙体牙髓、口腔修复、正畸等多个专业。",responsiblePerson:"孙主任",phone:"010-12345606",location:"门诊楼1层西区",doctorCount:7,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:7,name:"皮肤科",description:"皮肤科负责诊治各种皮肤疾病，包括皮炎、湿疹、痤疮、皮肤肿瘤等。",responsiblePerson:"周主任",phone:"010-12345607",location:"门诊楼2层西区",doctorCount:4,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:8,name:"耳鼻喉科",description:"耳鼻喉科负责诊治耳、鼻、咽喉相关疾病，包括中耳炎、鼻窦炎、咽喉炎等。",responsiblePerson:"吴主任",phone:"010-12345608",location:"门诊楼3层东区",doctorCount:6,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:9,name:"精神心理科",description:"精神心理科负责诊治各类精神疾病和心理障碍，提供心理咨询和心理治疗服务。",responsiblePerson:"郑主任",phone:"010-12345609",location:"门诊楼7层北区",doctorCount:3,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"},{id:10,name:"中医科",description:"中医科提供中医诊疗服务，包括中药治疗、针灸、推拿按摩等传统中医疗法。",responsiblePerson:"钱主任",phone:"010-12345610",location:"门诊楼8层南区",doctorCount:8,status:1,createTime:"2023-01-01 00:00:00",avatar:"https://via.placeholder.com/150"}],this.filteredDepartments=[...this.departments],this.loading=!1},500)},handleSearch(){let e=[...this.departments];if(this.searchKeyword){const t=this.searchKeyword.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.responsiblePerson.toLowerCase().includes(t))}""!==this.selectedStatus&&(e=e.filter(e=>e.status===parseInt(this.selectedStatus))),this.filteredDepartments=e,this.currentPage=1},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`},showAddDepartmentDialog(){this.resetAddDepartmentForm(),this.addDepartmentDialogVisible=!0},resetAddDepartmentForm(){this.addDepartmentForm={name:"",description:"",responsiblePerson:"",phone:"",location:"",avatar:""},this.$refs.addDepartmentForm&&this.$refs.addDepartmentForm.resetFields()},submitAddDepartment(){this.$refs.addDepartmentForm.validate(e=>{if(e){const e={id:this.departments.length+1,...this.addDepartmentForm,doctorCount:0,status:1,createTime:(new Date).toISOString().replace("T"," ").substring(0,19)};this.departments.unshift(e),this.handleSearch(),this.addDepartmentDialogVisible=!1,this.$message.success("科室添加成功")}})},showEditDepartmentDialog(e){this.editDepartmentForm={...e},this.editDepartmentDialogVisible=!0},submitEditDepartment(){this.$refs.editDepartmentForm.validate(e=>{if(e){const e=this.departments.findIndex(e=>e.id===this.editDepartmentForm.id);if(-1!==e){const t=this.departments[e];this.departments[e]={...this.editDepartmentForm,doctorCount:t.doctorCount,status:t.status,createTime:t.createTime},this.handleSearch(),this.editDepartmentDialogVisible=!1,this.$message.success("科室更新成功")}}})},updateDepartmentStatus(e){this.$message.success("科室状态已更新为"+(e.status?"启用":"禁用"))},deleteDepartment(e){e.doctorCount>0?this.$message.warning("该科室下还有医生，无法删除"):this.$confirm(`确定要删除科室「${e.name}」吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.departments.findIndex(t=>t.id===e.id);-1!==t&&(this.departments.splice(t,1),this.handleSearch(),this.$message.success("科室删除成功"))}).catch(()=>{})},viewDepartmentDetail(e){this.currentDepartment={...e},this.departmentDetailDialogVisible=!0},viewDepartmentDoctors(e){this.departmentDoctors=this.getDepartmentDoctors(e.id),this.departmentDoctorsDialogVisible=!0},getDepartmentDoctors(e){const t={1:[{id:101,name:"张医生",title:"主任医师",specialty:"心血管疾病",phone:"13800138101",status:1},{id:102,name:"李医生",title:"副主任医师",specialty:"消化系统疾病",phone:"13800138102",status:1},{id:103,name:"王医生",title:"主治医师",specialty:"呼吸系统疾病",phone:"13800138103",status:1}],2:[{id:201,name:"刘医生",title:"主任医师",specialty:"普外科",phone:"13800138201",status:1},{id:202,name:"陈医生",title:"副主任医师",specialty:"骨科",phone:"13800138202",status:1}],3:[{id:301,name:"孙医生",title:"主任医师",specialty:"产科",phone:"13800138301",status:1},{id:302,name:"周医生",title:"副主任医师",specialty:"妇科",phone:"13800138302",status:1}]};return t[e]||[]},batchDeleteDepartments(){const e=this.selectedDepartments.filter(e=>e.doctorCount>0);if(e.length>0){const t=e.map(e=>e.name).join("、");return void this.$message.warning(`以下科室还有医生，无法删除：${t}`)}const t=this.selectedDepartments.map(e=>e.name).join("、");this.$confirm(`确定要删除以下科室吗？\n${t}`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.selectedDepartments.map(e=>e.id);this.departments=this.departments.filter(t=>!e.includes(t.id)),this.handleSearch(),this.selectedDepartments=[],this.$message.success("批量删除成功")}).catch(()=>{})},batchEnableDepartments(){this.selectedDepartments.forEach(e=>{e.status=1}),this.selectedDepartments=[],this.$message.success("批量启用成功")},batchDisableDepartments(){this.selectedDepartments.forEach(e=>{e.status=0}),this.selectedDepartments=[],this.$message.success("批量禁用成功")},clearSelection(){this.$refs.departmentTable&&this.$refs.departmentTable.clearSelection(),this.selectedDepartments=[]},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},handleSelectionChange(e){this.selectedDepartments=e},handleAvatarSuccess(e,t){this.addDepartmentForm.avatar=URL.createObjectURL(t.raw)},handleEditAvatarSuccess(e,t){this.editDepartmentForm.avatar=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},Ue=Ae;var Pe=(0,n.A)(Ue,Ie,Ne,!1,null,"1434db30",null);const Me=Pe.exports;var Re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"doctor-management"},[t("div",{staticClass:"management-header"},[t("h2",[e._v("医生管理")]),t("el-button",{attrs:{type:"primary"},on:{click:e.showAddDoctorDialog}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加医生 ")])],1),t("div",{staticClass:"search-filter"},[t("el-input",{staticStyle:{width:"300px","margin-right":"15px"},attrs:{placeholder:"搜索医生姓名、专长或电话","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),t("el-select",{staticStyle:{width:"150px","margin-right":"15px"},attrs:{placeholder:"选择科室",clearable:""},on:{change:e.handleSearch},model:{value:e.selectedDepartmentId,callback:function(t){e.selectedDepartmentId=t},expression:"selectedDepartmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),t("el-select",{staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"选择职称",clearable:""},on:{change:e.handleSearch},model:{value:e.selectedTitle,callback:function(t){e.selectedTitle=t},expression:"selectedTitle"}},[t("el-option",{attrs:{label:"主任医师",value:"主任医师"}}),t("el-option",{attrs:{label:"副主任医师",value:"副主任医师"}}),t("el-option",{attrs:{label:"主治医师",value:"主治医师"}}),t("el-option",{attrs:{label:"住院医师",value:"住院医师"}})],1),t("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"选择状态",clearable:""},on:{change:e.handleSearch},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}},[t("el-option",{attrs:{label:"在职",value:1}}),t("el-option",{attrs:{label:"离职",value:0}})],1)],1),t("div",{staticClass:"doctor-list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"doctorTable",staticStyle:{width:"100%"},attrs:{data:e.paginatedDoctors,stripe:"",border:"","element-loading-text":"加载中..."},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"医生ID",width:"80"}}),t("el-table-column",{attrs:{label:"头像",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticClass:"doctor-avatar",attrs:{src:e.row.avatar,alt:"医生头像"}})]}}])}),t("el-table-column",{attrs:{prop:"name",label:"医生姓名","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{effect:"dark",content:"点击查看详情",placement:"top"}},[t("span",{staticClass:"doctor-name",on:{click:function(t){return e.viewDoctorDetail(a.row)}}},[e._v(e._s(a.row.name))])])]}}])}),t("el-table-column",{attrs:{prop:"departmentName",label:"所属科室","min-width":"120"}}),t("el-table-column",{attrs:{prop:"title",label:"职称","min-width":"100"}}),t("el-table-column",{attrs:{prop:"specialty",label:"专长","show-overflow-tooltip":"","min-width":"200"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系电话","min-width":"120"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":"","min-width":"180"}}),t("el-table-column",{attrs:{prop:"gender",label:"性别",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"男"===a.row.gender?"info":"danger"}},[e._v(" "+e._s(a.row.gender)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"age",label:"年龄",width:"80"}}),t("el-table-column",{attrs:{prop:"experience",label:"工作年限",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.experience)+" 年 ")]}}])}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#909399"},on:{change:function(t){return e.updateDoctorStatus(a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"入职时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.createTime))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showEditDoctorDialog(a.row)}}},[e._v(" 编辑 ")]),t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteDoctor(a.row)}}},[e._v(" 删除 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.viewDoctorSchedule(a.row)}}},[e._v(" 排班 ")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, sizes, total",total:e.filteredDoctors.length,"page-size":e.pageSize,"current-page":e.currentPage,"page-sizes":[10,20,50,100]},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"添加医生",visible:e.addDoctorDialogVisible,width:"700px"},on:{"update:visible":function(t){e.addDoctorDialogVisible=t},close:e.resetAddDoctorForm}},[t("el-form",{ref:"addDoctorForm",staticClass:"doctor-form",attrs:{model:e.addDoctorForm,rules:e.addDoctorRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"医生头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-success":e.handleAddAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.addDoctorForm.avatar?t("img",{staticClass:"avatar",attrs:{src:e.addDoctorForm.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"upload-tip"},[e._v("点击上传医生头像 (jpg/png, 最大2MB)")])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"医生姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入医生姓名",maxlength:"20"},model:{value:e.addDoctorForm.name,callback:function(t){e.$set(e.addDoctorForm,"name",t)},expression:"addDoctorForm.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-radio-group",{model:{value:e.addDoctorForm.gender,callback:function(t){e.$set(e.addDoctorForm,"gender",t)},expression:"addDoctorForm.gender"}},[t("el-radio",{attrs:{label:"男"}}),t("el-radio",{attrs:{label:"女"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input-number",{attrs:{min:22,max:80,step:1,placeholder:"请输入年龄"},model:{value:e.addDoctorForm.age,callback:function(t){e.$set(e.addDoctorForm,"age",t)},expression:"addDoctorForm.age"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"工作年限",prop:"experience"}},[t("el-input-number",{attrs:{min:0,max:50,step:1,placeholder:"请输入工作年限"},model:{value:e.addDoctorForm.experience,callback:function(t){e.$set(e.addDoctorForm,"experience",t)},expression:"addDoctorForm.experience"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所属科室",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择科室",filterable:"","allow-create":""},model:{value:e.addDoctorForm.departmentId,callback:function(t){e.$set(e.addDoctorForm,"departmentId",t)},expression:"addDoctorForm.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"职称",prop:"title"}},[t("el-select",{attrs:{placeholder:"请选择职称"},model:{value:e.addDoctorForm.title,callback:function(t){e.$set(e.addDoctorForm,"title",t)},expression:"addDoctorForm.title"}},[t("el-option",{attrs:{label:"主任医师",value:"主任医师"}}),t("el-option",{attrs:{label:"副主任医师",value:"副主任医师"}}),t("el-option",{attrs:{label:"主治医师",value:"主治医师"}}),t("el-option",{attrs:{label:"住院医师",value:"住院医师"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.addDoctorForm.phone,callback:function(t){e.$set(e.addDoctorForm,"phone",t)},expression:"addDoctorForm.phone"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.addDoctorForm.email,callback:function(t){e.$set(e.addDoctorForm,"email",t)},expression:"addDoctorForm.email"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"专长",prop:"specialty"}},[t("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入医生专长",maxlength:"200"},model:{value:e.addDoctorForm.specialty,callback:function(t){e.$set(e.addDoctorForm,"specialty",t)},expression:"addDoctorForm.specialty"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"个人简介",prop:"introduction"}},[t("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入个人简介",maxlength:"500"},model:{value:e.addDoctorForm.introduction,callback:function(t){e.$set(e.addDoctorForm,"introduction",t)},expression:"addDoctorForm.introduction"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDoctorDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitAddDoctor}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"编辑医生",visible:e.editDoctorDialogVisible,width:"700px"},on:{"update:visible":function(t){e.editDoctorDialogVisible=t}}},[t("el-form",{ref:"editDoctorForm",staticClass:"doctor-form",attrs:{model:e.editDoctorForm,rules:e.editDoctorRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"医生头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-success":e.handleEditAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editDoctorForm.avatar?t("img",{staticClass:"avatar",attrs:{src:e.editDoctorForm.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"upload-tip"},[e._v("点击上传医生头像 (jpg/png, 最大2MB)")])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"医生ID"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editDoctorForm.id,callback:function(t){e.$set(e.editDoctorForm,"id",t)},expression:"editDoctorForm.id"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"医生姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入医生姓名",maxlength:"20"},model:{value:e.editDoctorForm.name,callback:function(t){e.$set(e.editDoctorForm,"name",t)},expression:"editDoctorForm.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-radio-group",{model:{value:e.editDoctorForm.gender,callback:function(t){e.$set(e.editDoctorForm,"gender",t)},expression:"editDoctorForm.gender"}},[t("el-radio",{attrs:{label:"男"}}),t("el-radio",{attrs:{label:"女"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input-number",{attrs:{min:22,max:80,step:1,placeholder:"请输入年龄"},model:{value:e.editDoctorForm.age,callback:function(t){e.$set(e.editDoctorForm,"age",t)},expression:"editDoctorForm.age"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"工作年限",prop:"experience"}},[t("el-input-number",{attrs:{min:0,max:50,step:1,placeholder:"请输入工作年限"},model:{value:e.editDoctorForm.experience,callback:function(t){e.$set(e.editDoctorForm,"experience",t)},expression:"editDoctorForm.experience"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"所属科室",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择科室",filterable:""},model:{value:e.editDoctorForm.departmentId,callback:function(t){e.$set(e.editDoctorForm,"departmentId",t)},expression:"editDoctorForm.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"职称",prop:"title"}},[t("el-select",{attrs:{placeholder:"请选择职称"},model:{value:e.editDoctorForm.title,callback:function(t){e.$set(e.editDoctorForm,"title",t)},expression:"editDoctorForm.title"}},[t("el-option",{attrs:{label:"主任医师",value:"主任医师"}}),t("el-option",{attrs:{label:"副主任医师",value:"副主任医师"}}),t("el-option",{attrs:{label:"主治医师",value:"主治医师"}}),t("el-option",{attrs:{label:"住院医师",value:"住院医师"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.editDoctorForm.phone,callback:function(t){e.$set(e.editDoctorForm,"phone",t)},expression:"editDoctorForm.phone"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.editDoctorForm.email,callback:function(t){e.$set(e.editDoctorForm,"email",t)},expression:"editDoctorForm.email"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"专长",prop:"specialty"}},[t("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入医生专长",maxlength:"200"},model:{value:e.editDoctorForm.specialty,callback:function(t){e.$set(e.editDoctorForm,"specialty",t)},expression:"editDoctorForm.specialty"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"个人简介",prop:"introduction"}},[t("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入个人简介",maxlength:"500"},model:{value:e.editDoctorForm.introduction,callback:function(t){e.$set(e.editDoctorForm,"introduction",t)},expression:"editDoctorForm.introduction"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDoctorDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitEditDoctor}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"医生详情",visible:e.doctorDetailDialogVisible,width:"800px"},on:{"update:visible":function(t){e.doctorDetailDialogVisible=t}}},[t("div",{staticClass:"doctor-detail"},[t("div",{staticClass:"doctor-basic-info"},[t("img",{staticClass:"detail-avatar",attrs:{src:e.currentDoctor.avatar,alt:"医生头像"}}),t("div",{staticClass:"doctor-info"},[t("h3",[e._v(e._s(e.currentDoctor.name))]),t("div",{staticClass:"info-row"},[t("el-tag",{attrs:{size:"small",type:"男"===e.currentDoctor.gender?"info":"danger"}},[e._v(" "+e._s(e.currentDoctor.gender)+" ")]),t("span",{staticClass:"age"},[e._v(e._s(e.currentDoctor.age)+" 岁")]),t("span",{staticClass:"experience"},[e._v(e._s(e.currentDoctor.experience)+" 年工作经验")])],1),t("div",{staticClass:"info-row"},[t("el-tag",{attrs:{size:"small",type:"success"}},[e._v(e._s(e.currentDoctor.departmentName))]),t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(e.currentDoctor.title))])],1)])]),t("el-divider"),t("el-descriptions",{attrs:{column:1,border:""}},[t("el-descriptions-item",{attrs:{label:"联系电话"}},[e._v(e._s(e.currentDoctor.phone))]),t("el-descriptions-item",{attrs:{label:"电子邮箱"}},[e._v(e._s(e.currentDoctor.email))]),t("el-descriptions-item",{attrs:{label:"专长"}},[e._v(e._s(e.currentDoctor.specialty))]),t("el-descriptions-item",{attrs:{label:"个人简介",span:3}},[e._v(e._s(e.currentDoctor.introduction))]),t("el-descriptions-item",{attrs:{label:"医生状态"}},[t("el-tag",{attrs:{type:e.currentDoctor.status?"success":"danger"}},[e._v(" "+e._s(e.currentDoctor.status?"在职":"离职")+" ")])],1),t("el-descriptions-item",{attrs:{label:"入职时间"}},[e._v(e._s(e.formatDate(e.currentDoctor.createTime)))])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.doctorDetailDialogVisible=!1}}},[e._v("关闭")])],1)]),t("el-dialog",{attrs:{title:"医生排班管理",visible:e.scheduleDialogVisible,width:"800px"},on:{"update:visible":function(t){e.scheduleDialogVisible=t}}},[t("div",{staticClass:"schedule-header"},[t("h3",[e._v(e._s(e.selectedDoctorForSchedule.name)+" - 排班设置")]),t("div",{staticClass:"schedule-period"},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.fetchDoctorSchedule},model:{value:e.scheduleDateRange,callback:function(t){e.scheduleDateRange=t},expression:"scheduleDateRange"}})],1)]),t("div",{staticClass:"schedule-calendar"},[t("el-table",{attrs:{data:e.doctorSchedule,border:""}},[t("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),t("el-table-column",{attrs:{prop:"weekday",label:"星期",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getWeekdayType(a.row.weekday)}},[e._v(" "+e._s(a.row.weekday)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"morning",label:"上午"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#909399"},on:{change:function(t){return e.updateSchedule(a.row)}},model:{value:a.row.morning,callback:function(t){e.$set(a.row,"morning",t)},expression:"scope.row.morning"}})]}}])}),t("el-table-column",{attrs:{prop:"afternoon",label:"下午"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#909399"},on:{change:function(t){return e.updateSchedule(a.row)}},model:{value:a.row.afternoon,callback:function(t){e.$set(a.row,"afternoon",t)},expression:"scope.row.afternoon"}})]}}])}),t("el-table-column",{attrs:{prop:"evening",label:"晚上"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#909399"},on:{change:function(t){return e.updateSchedule(a.row)}},model:{value:a.row.evening,callback:function(t){e.$set(a.row,"evening",t)},expression:"scope.row.evening"}})]}}])})],1)],1),t("div",{staticClass:"schedule-actions"},[t("el-button",{on:{click:function(t){return e.batchSetSchedule("all")}}},[e._v("全选")]),t("el-button",{on:{click:function(t){return e.batchSetSchedule("morning")}}},[e._v("全选上午")]),t("el-button",{on:{click:function(t){return e.batchSetSchedule("afternoon")}}},[e._v("全选下午")]),t("el-button",{on:{click:function(t){return e.batchSetSchedule("evening")}}},[e._v("全选晚上")]),t("el-button",{on:{click:function(t){return e.batchSetSchedule("none")}}},[e._v("全不选")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.scheduleDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveSchedule}},[e._v("保存排班")])],1)]),e.selectedDoctors.length>0?t("div",{staticClass:"batch-operations"},[t("el-tag",[e._v(" 已选择 "+e._s(e.selectedDoctors.length)+" 项 ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.batchDeleteDoctors}},[e._v(" 批量删除 ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.batchEnableDoctors}},[e._v(" 批量启用 ")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.batchDisableDoctors}},[e._v(" 批量禁用 ")]),t("el-button",{attrs:{size:"small"},on:{click:e.batchMoveDepartment}},[e._v("调整科室")]),t("el-button",{attrs:{size:"small"},on:{click:e.clearSelection}},[e._v("清空选择")])],1):e._e(),t("el-dialog",{attrs:{title:"批量调整科室",visible:e.batchMoveDialogVisible,width:"400px"},on:{"update:visible":function(t){e.batchMoveDialogVisible=t}}},[t("el-form",{ref:"batchMoveForm",attrs:{model:e.batchMoveForm,rules:e.batchMoveRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"目标科室",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择目标科室"},model:{value:e.batchMoveForm.departmentId,callback:function(t){e.$set(e.batchMoveForm,"departmentId",t)},expression:"batchMoveForm.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.batchMoveDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmBatchMove}},[e._v("确定")])],1)],1)],1)},ze=[];const Ee={name:"DoctorManagement",data(){return{doctors:[],filteredDoctors:[],loading:!1,departments:[],searchKeyword:"",selectedDepartmentId:"",selectedTitle:"",selectedStatus:"",currentPage:1,pageSize:10,selectedDoctors:[],currentDoctor:{},selectedDoctorForSchedule:{},addDoctorDialogVisible:!1,addDoctorForm:{name:"",gender:"男",age:"",experience:"",departmentId:"",title:"",phone:"",email:"",specialty:"",introduction:"",avatar:""},addDoctorRules:{name:[{required:!0,message:"请输入医生姓名",trigger:"blur"},{min:2,max:20,message:"医生姓名长度在 2 到 20 个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{type:"number",min:22,max:80,message:"年龄在 22 到 80 之间",trigger:"blur"}],experience:[{required:!0,message:"请输入工作年限",trigger:"blur"},{type:"number",min:0,max:50,message:"工作年限在 0 到 50 之间",trigger:"blur"}],departmentId:[{required:!0,message:"请选择所属科室",trigger:"change"}],title:[{required:!0,message:"请选择职称",trigger:"change"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],specialty:[{required:!0,message:"请输入医生专长",trigger:"blur"},{max:200,message:"专长不能超过 200 个字符",trigger:"blur"}],introduction:[{required:!0,message:"请输入个人简介",trigger:"blur"},{max:500,message:"个人简介不能超过 500 个字符",trigger:"blur"}]},editDoctorDialogVisible:!1,editDoctorForm:{id:"",name:"",gender:"男",age:"",experience:"",departmentId:"",departmentName:"",title:"",phone:"",email:"",specialty:"",introduction:"",avatar:"",status:1,createTime:""},editDoctorRules:{name:[{required:!0,message:"请输入医生姓名",trigger:"blur"},{min:2,max:20,message:"医生姓名长度在 2 到 20 个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{type:"number",min:22,max:80,message:"年龄在 22 到 80 之间",trigger:"blur"}],experience:[{required:!0,message:"请输入工作年限",trigger:"blur"},{type:"number",min:0,max:50,message:"工作年限在 0 到 50 之间",trigger:"blur"}],departmentId:[{required:!0,message:"请选择所属科室",trigger:"change"}],title:[{required:!0,message:"请选择职称",trigger:"change"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],specialty:[{required:!0,message:"请输入医生专长",trigger:"blur"},{max:200,message:"专长不能超过 200 个字符",trigger:"blur"}],introduction:[{required:!0,message:"请输入个人简介",trigger:"blur"},{max:500,message:"个人简介不能超过 500 个字符",trigger:"blur"}]},doctorDetailDialogVisible:!1,scheduleDialogVisible:!1,scheduleDateRange:[new Date,new Date(Date.now()+6048e5)],doctorSchedule:[],batchMoveDialogVisible:!1,batchMoveForm:{departmentId:""},batchMoveRules:{departmentId:[{required:!0,message:"请选择目标科室",trigger:"change"}]}}},mounted(){this.fetchDepartments(),this.fetchDoctors()},computed:{paginatedDoctors(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredDoctors.slice(e,t)}},methods:{fetchDepartments(){this.departments=[{id:1,name:"内科"},{id:2,name:"外科"},{id:3,name:"妇产科"},{id:4,name:"儿科"},{id:5,name:"眼科"},{id:6,name:"口腔科"},{id:7,name:"皮肤科"},{id:8,name:"耳鼻喉科"},{id:9,name:"精神心理科"},{id:10,name:"中医科"}]},fetchDoctors(){this.loading=!0,setTimeout(()=>{this.doctors=[{id:1,name:"张医生",gender:"男",age:45,experience:20,departmentId:1,departmentName:"内科",title:"主任医师",specialty:"心血管疾病、高血压、冠心病",phone:"13800138101",email:"zhang@hospital.com",introduction:"张医生从医20年，擅长心血管疾病的诊断与治疗，在冠心病、高血压等方面有丰富的临床经验。曾在多家三甲医院进修学习，发表学术论文30余篇。",avatar:"https://randomuser.me/api/portraits/men/32.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:2,name:"李医生",gender:"男",age:40,experience:15,departmentId:1,departmentName:"内科",title:"副主任医师",specialty:"消化系统疾病、肝胆疾病",phone:"13800138102",email:"li@hospital.com",introduction:"李医生专注于消化系统疾病的诊治，对肝胆疾病有深入研究。曾参与多项国家级科研项目，临床经验丰富。",avatar:"https://randomuser.me/api/portraits/men/42.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:3,name:"王医生",gender:"女",age:38,experience:12,departmentId:2,departmentName:"外科",title:"主治医师",specialty:"普外科、腹腔镜手术",phone:"13800138103",email:"wang@hospital.com",introduction:"王医生擅长腹腔镜微创手术，对普外科常见疾病有丰富的诊疗经验，手术技术精湛，患者满意度高。",avatar:"https://randomuser.me/api/portraits/women/22.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:4,name:"刘医生",gender:"男",age:50,experience:25,departmentId:2,departmentName:"外科",title:"主任医师",specialty:"骨科、关节外科、脊柱外科",phone:"13800138104",email:"liu@hospital.com",introduction:"刘医生是骨科领域的知名专家，擅长各类骨科手术，尤其在关节置换和脊柱手术方面造诣深厚。",avatar:"https://randomuser.me/api/portraits/men/54.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:5,name:"陈医生",gender:"女",age:35,experience:10,departmentId:3,departmentName:"妇产科",title:"副主任医师",specialty:"产科、高危妊娠",phone:"13800138105",email:"chen@hospital.com",introduction:"陈医生专注于产科领域，对高危妊娠的管理有丰富经验，曾成功救治多例复杂高危产妇，受到患者广泛好评。",avatar:"https://randomuser.me/api/portraits/women/34.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:6,name:"赵医生",gender:"男",age:30,experience:5,departmentId:4,departmentName:"儿科",title:"主治医师",specialty:"小儿呼吸系统疾病、儿童保健",phone:"13800138106",email:"zhao@hospital.com",introduction:"赵医生亲和力强，擅长与儿童沟通，专注于儿童常见病、多发病的诊治，尤其在呼吸系统疾病方面有独到见解。",avatar:"https://randomuser.me/api/portraits/men/28.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:7,name:"孙医生",gender:"女",age:42,experience:18,departmentId:5,departmentName:"眼科",title:"主任医师",specialty:"白内障、青光眼",phone:"13800138107",email:"sun@hospital.com",introduction:"孙医生是眼科领域的专家，擅长各类眼科手术，特别是白内障超声乳化和青光眼手术，技术精湛，成功率高。",avatar:"https://randomuser.me/api/portraits/women/46.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:8,name:"周医生",gender:"男",age:36,experience:12,departmentId:6,departmentName:"口腔科",title:"副主任医师",specialty:"口腔修复、种植牙",phone:"13800138108",email:"zhou@hospital.com",introduction:"周医生专注于口腔修复和种植牙领域，拥有先进的口腔修复技术和丰富的临床经验，为众多患者解决了口腔问题。",avatar:"https://randomuser.me/api/portraits/men/36.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:9,name:"吴医生",gender:"女",age:34,experience:8,departmentId:7,departmentName:"皮肤科",title:"主治医师",specialty:"痤疮、湿疹、皮炎",phone:"13800138109",email:"wu@hospital.com",introduction:"吴医生专注于常见皮肤病的诊治，对痤疮、湿疹等疾病有独特的治疗方法，治疗效果显著，深受患者信赖。",avatar:"https://randomuser.me/api/portraits/women/30.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:10,name:"郑医生",gender:"男",age:48,experience:22,departmentId:8,departmentName:"耳鼻喉科",title:"主任医师",specialty:"中耳炎、鼻窦炎、咽喉炎",phone:"13800138110",email:"zheng@hospital.com",introduction:"郑医生在耳鼻喉科领域有丰富的临床经验，擅长各类耳鼻喉疾病的诊治，手术技术精湛，口碑良好。",avatar:"https://randomuser.me/api/portraits/men/50.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:11,name:"钱医生",gender:"男",age:43,experience:18,departmentId:9,departmentName:"精神心理科",title:"副主任医师",specialty:"抑郁症、焦虑症、失眠",phone:"13800138111",email:"qian@hospital.com",introduction:"钱医生专注于精神心理疾病的诊断与治疗，擅长心理疏导和药物治疗相结合的方法，帮助众多患者重获心理健康。",avatar:"https://randomuser.me/api/portraits/men/44.jpg",status:1,createTime:"2023-01-01 00:00:00"},{id:12,name:"孙医生",gender:"女",age:40,experience:15,departmentId:10,departmentName:"中医科",title:"主任医师",specialty:"中医内科、针灸、推拿",phone:"13800138112",email:"sun2@hospital.com",introduction:"孙医生出身中医世家，擅长中医辨证施治，结合针灸、推拿等传统疗法，治疗各种慢性疾病有独特疗效。",avatar:"https://randomuser.me/api/portraits/women/40.jpg",status:1,createTime:"2023-01-01 00:00:00"}],this.filteredDoctors=[...this.doctors],this.loading=!1},500)},handleSearch(){let e=[...this.doctors];if(this.searchKeyword){const t=this.searchKeyword.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.specialty.toLowerCase().includes(t)||e.phone.includes(t)||e.email.toLowerCase().includes(t))}""!==this.selectedDepartmentId&&(e=e.filter(e=>e.departmentId===parseInt(this.selectedDepartmentId))),""!==this.selectedTitle&&(e=e.filter(e=>e.title===this.selectedTitle)),""!==this.selectedStatus&&(e=e.filter(e=>e.status===parseInt(this.selectedStatus))),this.filteredDoctors=e,this.currentPage=1},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`},showAddDoctorDialog(){this.resetAddDoctorForm(),this.addDoctorDialogVisible=!0},resetAddDoctorForm(){this.addDoctorForm={name:"",gender:"男",age:"",experience:"",departmentId:"",title:"",phone:"",email:"",specialty:"",introduction:"",avatar:""},this.$refs.addDoctorForm&&this.$refs.addDoctorForm.resetFields()},submitAddDoctor(){this.$refs.addDoctorForm.validate(e=>{if(e){const e=this.departments.find(e=>e.id===this.addDoctorForm.departmentId)?.name||"",t={id:this.doctors.length+1,...this.addDoctorForm,departmentName:e,status:1,createTime:(new Date).toISOString().replace("T"," ").substring(0,19)};this.doctors.unshift(t),this.handleSearch(),this.addDoctorDialogVisible=!1,this.$message.success("医生添加成功")}})},showEditDoctorDialog(e){this.editDoctorForm={...e},this.editDoctorDialogVisible=!0},submitEditDoctor(){this.$refs.editDoctorForm.validate(e=>{if(e){const e=this.departments.find(e=>e.id===this.editDoctorForm.departmentId)?.name||"",t=this.doctors.findIndex(e=>e.id===this.editDoctorForm.id);if(-1!==t){const a=this.doctors[t];this.doctors[t]={...this.editDoctorForm,departmentName:e,status:a.status,createTime:a.createTime},this.handleSearch(),this.editDoctorDialogVisible=!1,this.$message.success("医生信息更新成功")}}})},updateDoctorStatus(e){this.$message.success("医生状态已更新为"+(e.status?"在职":"离职"))},deleteDoctor(e){this.$confirm(`确定要删除医生「${e.name}」吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.doctors.findIndex(t=>t.id===e.id);-1!==t&&(this.doctors.splice(t,1),this.handleSearch(),this.$message.success("医生删除成功"))}).catch(()=>{})},viewDoctorDetail(e){this.currentDoctor={...e},this.doctorDetailDialogVisible=!0},viewDoctorSchedule(e){this.selectedDoctorForSchedule={...e},this.fetchDoctorSchedule(),this.scheduleDialogVisible=!0},fetchDoctorSchedule(){const e=this.scheduleDateRange[0],t=this.scheduleDateRange[1],a=["周日","周一","周二","周三","周四","周五","周六"],s=[];let r=new Date(e);while(r<=t){const e=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getDate().toString().padStart(2,"0")}`,t=a[r.getDay()],i=0===r.getDay()||6===r.getDay();s.push({date:e,weekday:t,morning:!i,afternoon:!i,evening:!1}),r.setDate(r.getDate()+1)}this.doctorSchedule=s},getWeekdayType(e){return"周六"===e||"周日"===e?"warning":"primary"},updateSchedule(){},batchSetSchedule(e){this.doctorSchedule.forEach(t=>{"all"===e?(t.morning=!0,t.afternoon=!0,t.evening=!0):"morning"===e?t.morning=!0:"afternoon"===e?t.afternoon=!0:"evening"===e?t.evening=!0:"none"===e&&(t.morning=!1,t.afternoon=!1,t.evening=!1)})},saveSchedule(){this.scheduleDialogVisible=!1,this.$message.success("排班保存成功")},batchDeleteDoctors(){const e=this.selectedDoctors.map(e=>e.name).join("、");this.$confirm(`确定要删除以下医生吗？\n${e}`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.selectedDoctors.map(e=>e.id);this.doctors=this.doctors.filter(t=>!e.includes(t.id)),this.handleSearch(),this.selectedDoctors=[],this.$message.success("批量删除成功")}).catch(()=>{})},batchEnableDoctors(){this.selectedDoctors.forEach(e=>{e.status=1}),this.selectedDoctors=[],this.$message.success("批量启用成功")},batchDisableDoctors(){this.selectedDoctors.forEach(e=>{e.status=0}),this.selectedDoctors=[],this.$message.success("批量禁用成功")},batchMoveDepartment(){0!==this.selectedDoctors.length?(this.batchMoveForm.departmentId="",this.batchMoveDialogVisible=!0):this.$message.warning("请先选择医生")},confirmBatchMove(){this.$refs.batchMoveForm.validate(e=>{if(e){const e=this.departments.find(e=>e.id===this.batchMoveForm.departmentId)?.name||"";this.selectedDoctors.forEach(t=>{t.departmentId=this.batchMoveForm.departmentId,t.departmentName=e}),this.handleSearch(),this.selectedDoctors=[],this.batchMoveDialogVisible=!1,this.$message.success("批量调整科室成功")}})},clearSelection(){this.$refs.doctorTable&&this.$refs.doctorTable.clearSelection(),this.selectedDoctors=[]},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},handleSelectionChange(e){this.selectedDoctors=e},handleAddAvatarSuccess(e,t){this.addDoctorForm.avatar=URL.createObjectURL(t.raw)},handleEditAvatarSuccess(e,t){this.editDoctorForm.avatar=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},qe=Ee;var Oe=(0,n.A)(qe,Re,ze,!1,null,"31ca2e50",null);const Le=Oe.exports;var Ve=function(){var e=this,t=e._self._c;return t("div",{staticClass:"appointment-management"},[e._m(0),t("div",{staticClass:"search-filter"},[t("el-form",{staticClass:"search-form",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{attrs:{label:"患者姓名"}},[t("el-input",{attrs:{placeholder:"请输入患者姓名"},model:{value:e.searchForm.patientName,callback:function(t){e.$set(e.searchForm,"patientName",t)},expression:"searchForm.patientName"}})],1),t("el-form-item",{attrs:{label:"医生姓名"}},[t("el-input",{attrs:{placeholder:"请输入医生姓名"},model:{value:e.searchForm.doctorName,callback:function(t){e.$set(e.searchForm,"doctorName",t)},expression:"searchForm.doctorName"}})],1),t("el-form-item",{attrs:{label:"科室"}},[t("el-select",{attrs:{placeholder:"请选择科室",clearable:""},model:{value:e.searchForm.departmentId,callback:function(t){e.$set(e.searchForm,"departmentId",t)},expression:"searchForm.departmentId"}},e._l(e.departments,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"预约状态"}},[t("el-select",{attrs:{placeholder:"请选择预约状态",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[t("el-option",{attrs:{label:"待确认",value:"PENDING"}}),t("el-option",{attrs:{label:"已确认",value:"CONFIRMED"}}),t("el-option",{attrs:{label:"已取消",value:"CANCELLED"}}),t("el-option",{attrs:{label:"已完成",value:"COMPLETED"}}),t("el-option",{attrs:{label:"已爽约",value:"NO_SHOW"}})],1)],1),t("el-form-item",{attrs:{label:"预约日期"}},[t("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.filteredAppointments,stripe:""}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{prop:"id",label:"预约编号",width:"120"}}),t("el-table-column",{attrs:{prop:"patientName",label:"患者姓名",width:"120"}}),t("el-table-column",{attrs:{prop:"patientPhone",label:"患者电话",width:"150"}}),t("el-table-column",{attrs:{prop:"departmentName",label:"科室",width:"120"}}),t("el-table-column",{attrs:{prop:"doctorName",label:"医生姓名",width:"120"}}),t("el-table-column",{attrs:{prop:"appointmentDate",label:"预约日期",width:"120",formatter:e.formatDate}}),t("el-table-column",{attrs:{prop:"appointmentTime",label:"预约时间段",width:"150"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getStatusType(a.row.status)}},[e._v(e._s(e.getStatusText(a.row.status)))])]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180",formatter:e.formatDateTime}}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleViewDetail(a.row)}}},[e._v("查看详情")]),"PENDING"===a.row.status?t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.handleConfirm(a.row)}}},[e._v("确认预约")]):e._e(),["PENDING","CONFIRMED"].includes(a.row.status)?t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleCancel(a.row)}}},[e._v("取消预约")]):e._e()]}}])})],1)],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, ->, total",total:e.filteredAppointments.length,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"预约详情",visible:e.detailDialogVisible,width:"600px",top:"10vh"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[e.selectedAppointment?t("div",{staticClass:"appointment-detail"},[t("el-descriptions",{attrs:{column:1,border:""}},[t("el-descriptions-item",{attrs:{label:"预约编号"}},[e._v(e._s(e.selectedAppointment.id))]),t("el-descriptions-item",{attrs:{label:"患者信息"}},[t("div",[e._v(e._s(e.selectedAppointment.patientName)+" ("+e._s(e.selectedAppointment.patientPhone)+")")]),t("div",[e._v(e._s("male"===e.selectedAppointment.patientGender?"男":"女")+"，"+e._s(e.selectedAppointment.patientAge)+"岁")])]),t("el-descriptions-item",{attrs:{label:"就诊科室"}},[e._v(e._s(e.selectedAppointment.departmentName))]),t("el-descriptions-item",{attrs:{label:"预约医生"}},[e._v(e._s(e.selectedAppointment.doctorName))]),t("el-descriptions-item",{attrs:{label:"预约日期"}},[e._v(e._s(e.formatDate(e.selectedAppointment.appointmentDate)))]),t("el-descriptions-item",{attrs:{label:"预约时间"}},[e._v(e._s(e.selectedAppointment.appointmentTime))]),t("el-descriptions-item",{attrs:{label:"预约状态"}},[t("el-tag",{attrs:{type:e.getStatusType(e.selectedAppointment.status)}},[e._v(e._s(e.getStatusText(e.selectedAppointment.status)))])],1),t("el-descriptions-item",{attrs:{label:"病情描述"}},[e._v(e._s(e.selectedAppointment.description||"无"))]),t("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.formatDateTime(e.selectedAppointment.createTime)))]),t("el-descriptions-item",{attrs:{label:"更新时间"}},[e._v(e._s(e.formatDateTime(e.selectedAppointment.updateTime)))])],1)],1):e._e()]),e.selectedRows.length>0?t("div",{staticClass:"batch-operations"},[t("el-button",{attrs:{type:"danger"},on:{click:e.handleBatchCancel}},[e._v("批量取消")]),t("el-button",{attrs:{type:"success",disabled:!e.canBatchConfirm},on:{click:e.handleBatchConfirm}},[e._v("批量确认")]),t("span",[e._v("已选择 "+e._s(e.selectedRows.length)+" 条记录")])],1):e._e()],1)},Be=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-header"},[t("h2",[e._v("预约管理")])])}];const je={name:"AppointmentManagement",data(){return{appointments:[],departments:[],loading:!1,searchForm:{patientName:"",doctorName:"",departmentId:"",status:""},dateRange:[],currentPage:1,pageSize:10,detailDialogVisible:!1,selectedAppointment:null,selectedRows:[]}},computed:{filteredAppointments(){let e=this.appointments.filter(e=>{if(this.searchForm.patientName&&!e.patientName.toLowerCase().includes(this.searchForm.patientName.toLowerCase()))return!1;if(this.searchForm.doctorName&&!e.doctorName.toLowerCase().includes(this.searchForm.doctorName.toLowerCase()))return!1;if(this.searchForm.departmentId&&e.departmentId!==this.searchForm.departmentId)return!1;if(this.searchForm.status&&e.status!==this.searchForm.status)return!1;if(this.dateRange&&2===this.dateRange.length){const t=new Date(e.appointmentDate),a=new Date(this.dateRange[0]),s=new Date(this.dateRange[1]);if(t<a||t>s)return!1}return!0});const t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return e.slice(t,a)},canBatchConfirm(){return this.selectedRows.every(e=>"PENDING"===e.status)}},created(){this.loadData()},methods:{loadData(){this.loading=!0,setTimeout(()=>{this.appointments=this.getMockAppointments(),this.departments=this.getMockDepartments(),this.loading=!1},500)},handleSearch(){this.currentPage=1},handleReset(){this.searchForm={patientName:"",doctorName:"",departmentId:"",status:""},this.dateRange=[],this.currentPage=1},handleCurrentChange(e){this.currentPage=e},handleViewDetail(e){this.selectedAppointment=e,this.detailDialogVisible=!0},handleConfirm(e){this.$confirm("确认该预约吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.status="CONFIRMED",e.updateTime=(new Date).toISOString(),this.$message.success("预约确认成功")}).catch(()=>{})},handleCancel(e){this.$confirm("取消该预约吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.status="CANCELLED",e.updateTime=(new Date).toISOString(),this.$message.success("预约已取消")}).catch(()=>{})},handleBatchCancel(){this.$confirm(`确定要取消选中的 ${this.selectedRows.length} 个预约吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.selectedRows.forEach(e=>{e.status="CANCELLED",e.updateTime=(new Date).toISOString()}),this.selectedRows=[],this.$message.success("批量取消成功")}).catch(()=>{})},handleBatchConfirm(){this.$confirm(`确定要确认选中的 ${this.selectedRows.length} 个预约吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.selectedRows.forEach(e=>{e.status="CONFIRMED",e.updateTime=(new Date).toISOString()}),this.selectedRows=[],this.$message.success("批量确认成功")}).catch(()=>{})},getStatusText(e){const t={PENDING:"待确认",CONFIRMED:"已确认",CANCELLED:"已取消",COMPLETED:"已完成",NO_SHOW:"已爽约"};return t[e]||e},getStatusType(e){const t={PENDING:"warning",CONFIRMED:"success",CANCELLED:"danger",COMPLETED:"info",NO_SHOW:"danger"};return t[e]||"default"},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},formatDateTime(e){if(!e)return"";const t=new Date(e);return`${this.formatDate(t)} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`},getMockDepartments(){return[{id:"1",name:"内科"},{id:"2",name:"外科"},{id:"3",name:"儿科"},{id:"4",name:"妇产科"},{id:"5",name:"眼科"},{id:"6",name:"耳鼻喉科"},{id:"7",name:"口腔科"},{id:"8",name:"皮肤科"}]},getMockAppointments(){const e=[],t=this.getMockDepartments(),a=["PENDING","CONFIRMED","CANCELLED","COMPLETED","NO_SHOW"],s=["08:00-09:00","09:00-10:00","10:00-11:00","14:00-15:00","15:00-16:00","16:00-17:00"],r=["张三","李四","王五","赵六","钱七","孙八","周九","吴十"],i=["李医生","王医生","张医生","刘医生","陈医生","杨医生","黄医生","周医生"];for(let o=1;o<=50;o++){const l=new Date;l.setDate(l.getDate()+Math.floor(15*Math.random())-5);const n=t[Math.floor(Math.random()*t.length)];e.push({id:`APT${String(o).padStart(6,"0")}`,patientId:`PAT${String(o).padStart(6,"0")}`,patientName:r[Math.floor(Math.random()*r.length)],patientPhone:`138${String(Math.floor(1e8*Math.random())).padStart(8,"0")}`,patientGender:Math.random()>.5?"male":"female",patientAge:Math.floor(80*Math.random())+18,doctorId:`DOC${String(Math.floor(20*Math.random())+1).padStart(4,"0")}`,doctorName:i[Math.floor(Math.random()*i.length)],departmentId:n.id,departmentName:n.name,appointmentDate:l.toISOString().split("T")[0],appointmentTime:s[Math.floor(Math.random()*s.length)],status:a[Math.floor(Math.random()*a.length)],description:Math.random()>.5?"偶尔头晕，需要检查":"",createTime:new Date(l.getTime()-864e5*Math.random()*3).toISOString(),updateTime:new Date(l.getTime()-36e5*Math.random()).toISOString()})}return e.sort((e,t)=>new Date(t.appointmentDate)-new Date(e.appointmentDate))}}},Ke=je;var Ge=(0,n.A)(Ke,Ve,Be,!1,null,"a0fa369c",null);const He=Ge.exports;s["default"].use(m.Ay);const Je=new m.Ay({routes:[{path:"/",redirect:"/home"},{path:"/login",name:"Login",component:b,meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:w,meta:{requiresAuth:!1}},{path:"/home",name:"Home",component:T,meta:{requiresAuth:!1}},{path:"/user-info",name:"UserInfo",component:M,meta:{requiresAuth:!0}},{path:"/departments",name:"DepartmentList",component:L,meta:{requiresAuth:!1}},{path:"/doctors",name:"DoctorList",component:H,meta:{requiresAuth:!1}},{path:"/appointment",name:"Appointment",component:Q,meta:{requiresAuth:!0}},{path:"/appointment-list",name:"AppointmentList",component:ie,meta:{requiresAuth:!0}},{path:"/medical-guide",name:"MedicalGuide",component:be,meta:{requiresAuth:!1}},{path:"/admin/dashboard",name:"AdminDashboard",component:we,meta:{requiresAuth:!0,role:"ADMIN"}},{path:"/admin/users",name:"AdminUserManagement",component:Te,meta:{requiresAuth:!0,role:"ADMIN"}},{path:"/admin/departments",name:"AdminDepartmentManagement",component:Me,meta:{requiresAuth:!0,role:"ADMIN"}},{path:"/admin/doctors",name:"AdminDoctorManagement",component:Le,meta:{requiresAuth:!0,role:"ADMIN"}},{path:"/admin/appointments",name:"AdminAppointmentManagement",component:He,meta:{requiresAuth:!0,role:"ADMIN"}}]});Je.beforeEach((e,t,a)=>{const s=localStorage.getItem("token"),r=JSON.parse(localStorage.getItem("user"));e.meta.requiresAuth?s?e.meta.role&&r&&r.role!==e.meta.role?a("/home"):a():a("/login"):a()});const We=Je;var Ye=a(9143),Ze=a.n(Ye);s["default"].use(Ze()),s["default"].config.productionTip=!1,ce().defaults.baseURL="http://localhost:8083/api",ce().defaults.timeout=1e4,ce().interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),ce().interceptors.response.use(e=>e.data,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),We.push("/login")),Promise.reject(e))),s["default"].prototype.$axios=ce(),new s["default"]({router:We,render:e=>e(d)}).$mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s](i,i.exports,a),i.loaded=!0,i.exports}a.m=e,(()=>{a.amdO={}})(),(()=>{var e=[];a.O=(t,s,r,i)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,r,i]=e[d],l=!0,n=0;n<s.length;n++)(!1&i||o>=i)&&Object.keys(a.O).every(e=>a.O[e](s[n]))?s.splice(n--,1):(l=!1,i<o&&(o=i));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,r,i]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,i,[o,l,n]=s,c=0;if(o.some(t=>0!==e[t])){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var d=n(a)}for(t&&t(s);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkhospital_frontend"]=self["webpackChunkhospital_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],()=>a(3252));s=a.O(s)})();
//# sourceMappingURL=app.caba762a.js.map